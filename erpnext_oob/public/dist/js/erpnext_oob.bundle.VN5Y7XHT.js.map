{
  "version": 3,
  "sources": ["../../../../../apps/frappe/node_modules/frappe-datatable/node_modules/sortablejs/Sortable.js", "../../../../../apps/frappe/node_modules/frappe-datatable/dist/frappe-datatable.cjs.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/erpnext_oob.js", "../../../../../apps/frappe/frappe/public/js/frappe/widgets/widget_dialog.js", "../../../../../apps/frappe/frappe/public/js/frappe/widgets/base_widget.js", "../../../../../apps/frappe/frappe/public/js/frappe/widgets/onboarding_widget.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/widgets/onboarding_widget.js", "../../../../../apps/frappe/frappe/public/js/frappe/widgets/number_card_widget.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/widgets/number_card_widget.js", "../../../../../apps/frappe/frappe/public/js/frappe/widgets/chart_widget.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/widgets/chart_widget.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/ui/page.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/ui/search_utils.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/form/controls/link.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/form/controls/select.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/form/controls/date_range.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/form/controls/table.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/form/formatters.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/lib/datatable/datatable.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/lib/gantt/gantt.js", "../../../../../apps/erpnext_oob/erpnext_oob/public/js/controllers/stock_controller.js"],
  "sourcesContent": ["/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function sortableFactory() {\n\t\"use strict\";\n\n\tif (typeof window === \"undefined\" || !window.document) {\n\t\treturn function sortableError() {\n\t\t\tthrow new Error(\"Sortable.js requires a window with a document\");\n\t\t};\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\t\tlastDownEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\t\tscrollCustomFn,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tputSortable,\n\n\t\tautoScrolls = [],\n\t\tscrolling = false,\n\n\t\tawaitingDragStarted = false,\n\t\tignoreNextClick = false,\n\t\tsortables = [],\n\n\t\tpointerElemChangedInterval,\n\t\tlastPointerElemX,\n\t\tlastPointerElemY,\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\n\t\tlastTarget,\n\t\tlastDirection,\n\t\tpastFirstInvertThresh = false,\n\t\tisCircumstantialInvert = false,\n\t\tlastMode, // 'swap' or 'insert'\n\n\t\ttargetMoveDistance,\n\n\n\t\tforRepaintDummy,\n\t\trealDragElRect, // dragEl rect after current animation\n\n\t\t/** @const */\n\t\tR_SPACE = /\\s+/g,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\t\tsetTimeout = win.setTimeout,\n\n\t\t$ = win.jQuery || win.Zepto,\n\t\tPolymer = win.Polymer,\n\n\t\tcaptureMode = {\n\t\t\tcapture: false,\n\t\t\tpassive: false\n\t\t},\n\n\t\tIE11OrLess = !!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\\.|msie|iemobile)/i),\n\t\tEdge = !!navigator.userAgent.match(/Edge/i),\n\t\t// FireFox = !!navigator.userAgent.match(/firefox/i),\n\n\t\tCSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n\n\t\t// This will not pass for IE9, because IE9 DnD only works on anchors\n\t\tsupportDraggable = ('draggable' in document.createElement('div')),\n\n\t\tsupportCssPointerEvents = (function() {\n\t\t\t// false when <= IE11\n\t\t\tif (IE11OrLess) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar el = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\t\t_alignedSilent = false,\n\n\t\tabs = Math.abs,\n\t\tmin = Math.min,\n\n\t\tsavedInputChecked = [],\n\n\t\t_detectDirection = function(el, options) {\n\t\t\tvar elCSS = _css(el),\n\t\t\t\telWidth = parseInt(elCSS.width),\n\t\t\t\tchild1 = _getChild(el, 0, options),\n\t\t\t\tchild2 = _getChild(el, 1, options),\n\t\t\t\tfirstChildCSS = child1 && _css(child1),\n\t\t\t\tsecondChildCSS = child2 && _css(child2),\n\t\t\t\tfirstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + _getRect(child1).width,\n\t\t\t\tsecondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + _getRect(child2).width;\n\t\t\tif (elCSS.display === 'flex') {\n\t\t\t\treturn elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse'\n\t\t\t\t? 'vertical' : 'horizontal';\n\t\t\t}\n\t\t\tif (child1 && firstChildCSS.float !== 'none') {\n\t\t\t\tvar touchingSideChild2 = firstChildCSS.float === 'left' ? 'left' : 'right';\n\n\t\t\t\treturn child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ?\n\t\t\t\t\t'vertical' : 'horizontal';\n\t\t\t}\n\t\t\treturn (child1 &&\n\t\t\t\t(\n\t\t\t\t\tfirstChildCSS.display === 'block' ||\n\t\t\t\t\tfirstChildCSS.display === 'flex' ||\n\t\t\t\t\tfirstChildCSS.display === 'table' ||\n\t\t\t\t\tfirstChildCSS.display === 'grid' ||\n\t\t\t\t\tfirstChildWidth >= elWidth &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' ||\n\t\t\t\t\tchild2 &&\n\t\t\t\t\telCSS[CSSFloatProperty] === 'none' &&\n\t\t\t\t\tfirstChildWidth + secondChildWidth > elWidth\n\t\t\t\t) ?\n\t\t\t\t'vertical' : 'horizontal'\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n\t\t * @param  {Number} x      X position\n\t\t * @param  {Number} y      Y position\n\t\t * @return {HTMLElement}   Element of the first found nearest Sortable\n\t\t */\n\t\t_detectNearestEmptySortable = function(x, y) {\n\t\t\tfor (var i = 0; i < sortables.length; i++) {\n\t\t\t\tif (sortables[i].children.length) continue;\n\n\t\t\t\tvar rect = _getRect(sortables[i]),\n\t\t\t\t\tthreshold = sortables[i][expando].options.emptyInsertThreshold,\n\t\t\t\t\tinsideHorizontally = x >= (rect.left - threshold) && x <= (rect.right + threshold),\n\t\t\t\t\tinsideVertically = y >= (rect.top - threshold) && y <= (rect.bottom + threshold);\n\n\t\t\t\tif (insideHorizontally && insideVertically) {\n\t\t\t\t\treturn sortables[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_isClientInRowColumn = function(x, y, el, axis, options) {\n\t\t\tvar targetRect = _getRect(el),\n\t\t\t\ttargetS1Opp = axis === 'vertical' ? targetRect.left : targetRect.top,\n\t\t\t\ttargetS2Opp = axis === 'vertical' ? targetRect.right : targetRect.bottom,\n\t\t\t\tmouseOnOppAxis = axis === 'vertical' ? x : y;\n\n\t\t\treturn targetS1Opp < mouseOnOppAxis && mouseOnOppAxis < targetS2Opp;\n\t\t},\n\n\t\t_isElInRowColumn = function(el1, el2, axis) {\n\t\t\tvar el1Rect = el1 === dragEl && realDragElRect || _getRect(el1),\n\t\t\t\tel2Rect = el2 === dragEl && realDragElRect || _getRect(el2),\n\t\t\t\tel1S1Opp = axis === 'vertical' ? el1Rect.left : el1Rect.top,\n\t\t\t\tel1S2Opp = axis === 'vertical' ? el1Rect.right : el1Rect.bottom,\n\t\t\t\tel1OppLength = axis === 'vertical' ? el1Rect.width : el1Rect.height,\n\t\t\t\tel2S1Opp = axis === 'vertical' ? el2Rect.left : el2Rect.top,\n\t\t\t\tel2S2Opp = axis === 'vertical' ? el2Rect.right : el2Rect.bottom,\n\t\t\t\tel2OppLength = axis === 'vertical' ? el2Rect.width : el2Rect.height;\n\n\t\t\treturn (\n\t\t\t\tel1S1Opp === el2S1Opp ||\n\t\t\t\tel1S2Opp === el2S2Opp ||\n\t\t\t\t(el1S1Opp + el1OppLength / 2) === (el2S1Opp + el2OppLength / 2)\n\t\t\t);\n\t\t},\n\n\t\t_getParentAutoScrollElement = function(el, includeSelf) {\n\t\t\t// skip to window\n\t\t\tif (!el || !el.getBoundingClientRect) return win;\n\n\t\t\tvar elem = el;\n\t\t\tvar gotSelf = false;\n\t\t\tdo {\n\t\t\t\t// we don't need to get elem css if it isn't even overflowing in the first place (performance)\n\t\t\t\tif (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n\t\t\t\t\tvar elemCSS = _css(elem);\n\t\t\t\t\tif (\n\t\t\t\t\t\telem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') ||\n\t\t\t\t\t\telem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (!elem || !elem.getBoundingClientRect || elem === document.body) return win;\n\n\t\t\t\t\t\tif (gotSelf || includeSelf) return elem;\n\t\t\t\t\t\tgotSelf = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t\t} while (elem = elem.parentNode);\n\n\t\t\treturn win;\n\t\t},\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl, /**Boolean*/isFallback) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (options.scroll) {\n\t\t\t\tvar _this = rootEl ? rootEl[expando] : window,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinWidth = window.innerWidth,\n\t\t\t\t\twinHeight = window.innerHeight,\n\n\t\t\t\t\tscrollThisInstance = false;\n\n\t\t\t\t// Detect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\t_clearAutoScrolls();\n\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = _getParentAutoScrollElement(rootEl, true);\n\t\t\t\t\t\tscrollParentEl = scrollEl;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tvar layersOut = 0;\n\t\t\t\tvar currentParent = scrollEl;\n\t\t\t\tdo {\n\t\t\t\t\tvar\tel = currentParent,\n\t\t\t\t\t\trect = _getRect(el),\n\n\t\t\t\t\t\ttop = rect.top,\n\t\t\t\t\t\tbottom = rect.bottom,\n\t\t\t\t\t\tleft = rect.left,\n\t\t\t\t\t\tright = rect.right,\n\n\t\t\t\t\t\twidth = rect.width,\n\t\t\t\t\t\theight = rect.height,\n\n\t\t\t\t\t\tscrollWidth,\n\t\t\t\t\t\tscrollHeight,\n\n\t\t\t\t\t\tcss,\n\n\t\t\t\t\t\tvx,\n\t\t\t\t\t\tvy,\n\n\t\t\t\t\t\tcanScrollX,\n\t\t\t\t\t\tcanScrollY,\n\n\t\t\t\t\t\tscrollPosX,\n\t\t\t\t\t\tscrollPosY;\n\n\n\t\t\t\t\tif (el !== win) {\n\t\t\t\t\t\tscrollWidth = el.scrollWidth;\n\t\t\t\t\t\tscrollHeight = el.scrollHeight;\n\n\t\t\t\t\t\tcss = _css(el);\n\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll');\n\n\t\t\t\t\t\tscrollPosX = el.scrollLeft;\n\t\t\t\t\t\tscrollPosY = el.scrollTop;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscrollWidth = document.documentElement.scrollWidth;\n\t\t\t\t\t\tscrollHeight = document.documentElement.scrollHeight;\n\n\t\t\t\t\t\tcss = _css(document.documentElement);\n\n\t\t\t\t\t\tcanScrollX = width < scrollWidth && (css.overflowX === 'auto' || css.overflowX === 'scroll' || css.overflowX === 'visible');\n\t\t\t\t\t\tcanScrollY = height < scrollHeight && (css.overflowY === 'auto' || css.overflowY === 'scroll' || css.overflowY === 'visible');\n\n\t\t\t\t\t\tscrollPosX = document.documentElement.scrollLeft;\n\t\t\t\t\t\tscrollPosY = document.documentElement.scrollTop;\n\t\t\t\t\t}\n\n\t\t\t\t\tvx = canScrollX && (abs(right - x) <= sens && (scrollPosX + width) < scrollWidth) - (abs(left - x) <= sens && !!scrollPosX);\n\n\t\t\t\t\tvy = canScrollY && (abs(bottom - y) <= sens && (scrollPosY + height) < scrollHeight) - (abs(top - y) <= sens && !!scrollPosY);\n\n\n\t\t\t\t\tif (!autoScrolls[layersOut]) {\n\t\t\t\t\t\tfor (var i = 0; i <= layersOut; i++) {\n\t\t\t\t\t\t\tif (!autoScrolls[i]) {\n\t\t\t\t\t\t\t\tautoScrolls[i] = {};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n\t\t\t\t\t\tautoScrolls[layersOut].el = el;\n\t\t\t\t\t\tautoScrolls[layersOut].vx = vx;\n\t\t\t\t\t\tautoScrolls[layersOut].vy = vy;\n\n\t\t\t\t\t\tclearInterval(autoScrolls[layersOut].pid);\n\n\t\t\t\t\t\tif (el && (vx != 0 || vy != 0)) {\n\t\t\t\t\t\t\tscrollThisInstance = true;\n\t\t\t\t\t\t\t/* jshint loopfunc:true */\n\t\t\t\t\t\t\tautoScrolls[layersOut].pid = setInterval((function () {\n\t\t\t\t\t\t\t\t// emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n\t\t\t\t\t\t\t\tif (isFallback && this.layer === 0) {\n\t\t\t\t\t\t\t\t\tSortable.active._emulateDragOver(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvar scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n\t\t\t\t\t\t\t\tvar scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n\t\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\t\tif (scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt, touchEvt, autoScrolls[this.layer].el) !== 'continue') {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (autoScrolls[this.layer].el === win) {\n\t\t\t\t\t\t\t\t\twin.scrollTo(win.pageXOffset + scrollOffsetX, win.pageYOffset + scrollOffsetY);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tautoScrolls[this.layer].el.scrollTop += scrollOffsetY;\n\t\t\t\t\t\t\t\t\tautoScrolls[this.layer].el.scrollLeft += scrollOffsetX;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).bind({layer: layersOut}), 24);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlayersOut++;\n\t\t\t\t} while (options.bubbleScroll && currentParent !== win && (currentParent = _getParentAutoScrollElement(currentParent, false)));\n\t\t\t\tscrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n\t\t\t}\n\t\t}, 30),\n\n\t\t_clearAutoScrolls = function () {\n\t\t\tautoScrolls.forEach(function(autoScroll) {\n\t\t\t\tclearInterval(autoScroll.pid);\n\t\t\t});\n\t\t\tautoScrolls = [];\n\t\t},\n\n\t\t_prepareGroup = function (options) {\n\t\t\tfunction toFn(value, pull) {\n\t\t\t\treturn function(to, from, dragEl, evt) {\n\t\t\t\t\tvar sameGroup = to.options.group.name &&\n\t\t\t\t\t\t\t\t\tfrom.options.group.name &&\n\t\t\t\t\t\t\t\t\tto.options.group.name === from.options.group.name;\n\n\t\t\t\t\tif (value == null && (pull || sameGroup)) {\n\t\t\t\t\t\t// Default pull value\n\t\t\t\t\t\t// Default pull and put value if same group\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (value == null || value === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (pull && value === 'clone') {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t} else if (typeof value === 'function') {\n\t\t\t\t\t\treturn toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar otherGroup = (pull ? to : from).options.group.name;\n\n\t\t\t\t\t\treturn (value === true ||\n\t\t\t\t\t\t(typeof value === 'string' && value === otherGroup) ||\n\t\t\t\t\t\t(value.join && value.indexOf(otherGroup) > -1));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar group = {};\n\t\t\tvar originalGroup = options.group;\n\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\n\t\t\t\toriginalGroup = {name: originalGroup};\n\t\t\t}\n\n\t\t\tgroup.name = originalGroup.name;\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\n\t\t\tgroup.revertClone = originalGroup.revertClone;\n\n\t\t\toptions.group = group;\n\t\t},\n\n\t\t_checkAlignment = function(evt) {\n\t\t\tif (!dragEl || !dragEl.parentNode) return;\n\t\t\tdragEl.parentNode[expando] && dragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t},\n\n\t\t_isTrueParentSortable = function(el, target) {\n\t\t\tvar trueParent = target;\n\t\t\twhile (!trueParent[expando]) {\n\t\t\t\ttrueParent = trueParent.parentNode;\n\t\t\t}\n\n\t\t\treturn el === trueParent;\n\t\t},\n\n\t\t_artificalBubble = function(sortable, originalEvt, method) {\n\t\t\t// Artificial IE bubbling\n\t\t\tvar nextParent = sortable.parentNode;\n\t\t\twhile (nextParent && !nextParent[expando]) {\n\t\t\t\tnextParent = nextParent.parentNode;\n\t\t\t}\n\n\t\t\tif (nextParent) {\n\t\t\t\tnextParent[expando][method](_extend(originalEvt, {\n\t\t\t\t\tartificialBubble: true\n\t\t\t\t}));\n\t\t\t}\n\t\t},\n\n\t\t_hideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t}\n\t\t},\n\n\t\t_unhideGhostForTarget = function() {\n\t\t\tif (!supportCssPointerEvents && ghostEl) {\n\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t}\n\t\t};\n\n\n\t// #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\tdocument.addEventListener('click', function(evt) {\n\t\tif (ignoreNextClick) {\n\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation && evt.stopPropagation();\n\t\t\tevt.stopImmediatePropagation && evt.stopImmediatePropagation();\n\t\t\tignoreNextClick = false;\n\t\t\treturn false;\n\t\t}\n\t}, true);\n\n\tvar nearestEmptyInsertDetectEvent = function(evt) {\n\t\tevt = evt.touches ? evt.touches[0] : evt;\n\t\tif (dragEl) {\n\t\t\tvar nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n\t\t\tif (nearest) {\n\t\t\t\tnearest[expando]._onDragOver({\n\t\t\t\t\tclientX: evt.clientX,\n\t\t\t\t\tclientY: evt.clientY,\n\t\t\t\t\ttarget: nearest,\n\t\t\t\t\trootEl: nearest\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\t// We do not want this to be triggered if completed (bubbling canceled), so only define it here\n\t_on(document, 'dragover', nearestEmptyInsertDetectEvent);\n\t_on(document, 'mousemove', nearestEmptyInsertDetectEvent);\n\t_on(document, 'touchmove', nearestEmptyInsertDetectEvent);\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'Sortable: `el` must be HTMLElement, not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: null,\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tbubbleScroll: true,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? '>li' : '>*',\n\t\t\tswapThreshold: 1, // percentage; 0 <= x <= 1\n\t\t\tinvertSwap: false, // invert always\n\t\t\tinvertedSwapThreshold: null, // will be set to same as swapThreshold if default\n\t\t\tremoveCloneOnHide: true,\n\t\t\tdirection: function() {\n\t\t\t\treturn _detectDirection(el, this.options);\n\t\t\t},\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tdragClass: 'sortable-drag',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tpreventOnFilter: true,\n\t\t\tanimation: 0,\n\t\t\teasing: null,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\ttouchStartThreshold: parseInt(window.devicePixelRatio, 10) || 1,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\t\t\tfallbackTolerance: 0,\n\t\t\tfallbackOffset: {x: 0, y: 0},\n\t\t\tsupportPointer: Sortable.supportPointer !== false && (\n\t\t\t\t('PointerEvent' in window) ||\n\t\t\t\twindow.navigator && ('msPointerEnabled' in window.navigator) // microsoft\n\t\t\t),\n\t\t\temptyInsertThreshold: 5\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\t// Bind events\n\t\tif (options.supportPointer) {\n\t\t\t_on(el, 'pointerdown', this._onTapStart);\n\t\t} else {\n\t\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t\t_on(el, 'touchstart', this._onTapStart);\n\t\t}\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\tsortables.push(this.el);\n\n\t\t// Restore sorting\n\t\toptions.store && options.store.get && this.sort(options.store.get(this) || []);\n\t}\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_computeIsAligned: function(evt) {\n\t\t\tvar target;\n\n\t\t\tif (ghostEl && !supportCssPointerEvents) {\n\t\t\t\t_hideGhostForTarget();\n\t\t\t\ttarget = document.elementFromPoint(evt.clientX, evt.clientY);\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t} else {\n\t\t\t\ttarget = evt.target;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, this.options.draggable, this.el, false);\n\t\t\tif (_alignedSilent) return;\n\t\t\tif (!dragEl || dragEl.parentNode !== this.el) return;\n\n\t\t\tvar children = this.el.children;\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t// Don't change for target in case it is changed to aligned before onDragOver is fired\n\t\t\t\tif (_closest(children[i], this.options.draggable, this.el, false) && children[i] !== target) {\n\t\t\t\t\tchildren[i].sortableMouseAligned = _isClientInRowColumn(evt.clientX, evt.clientY, children[i], this._getDirection(evt, null), this.options);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Used for nulling last target when not in element, nothing to do with checking if aligned\n\t\t\tif (!_closest(target, this.options.draggable, this.el, true)) {\n\t\t\t\tlastTarget = null;\n\t\t\t}\n\n\t\t\t_alignedSilent = true;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_alignedSilent = false;\n\t\t\t}, 30);\n\n\t\t},\n\n\t\t_getDirection: function(evt, target) {\n\t\t\treturn (typeof this.options.direction === 'function') ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n\t\t},\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tif (!evt.cancelable) return;\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\tpreventOnFilter = options.preventOnFilter,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = evt.target.shadowRoot && ((evt.path && evt.path[0]) || (evt.composedPath && evt.composedPath()[0])) || target,\n\t\t\t\tfilter = options.filter,\n\t\t\t\tstartIndex;\n\n\t\t\t_saveInputCheckedState(el);\n\n\n\t\t\t// IE: Calls events in capture mode if event element is nested. This ensures only correct element's _onTapStart goes through.\n\t\t\t// This process is also done in _onDragOver\n\t\t\tif (IE11OrLess && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\t\t\tif (dragEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button and enabled\n\t\t\t}\n\n\t\t\t// cancel dnd if original target is content editable\n\t\t\tif (originalTarget.isContentEditable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el, false);\n\n\t\t\tif (!target) {\n\t\t\t\tif (IE11OrLess) {\n\t\t\t\t\t_artificalBubble(el, evt, '_onTapStart');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (lastDownEl === target) {\n\t\t\t\t// Ignoring duplicate `down`\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get the index of the dragged element within its parent\n\t\t\tstartIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, el, startIndex);\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el, false);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, el, startIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tpreventOnFilter && evt.cancelable && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el, false)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target, startIndex);\n\t\t},\n\n\n\t\t_handleAutoScroll: function(evt, fallback) {\n\t\t\tif (!dragEl || !this.options.scroll) return;\n\t\t\tvar x = evt.clientX,\n\t\t\t\ty = evt.clientY,\n\n\t\t\t\telem = document.elementFromPoint(x, y),\n\t\t\t\t_this = this;\n\n\t\t\t// IE does not seem to have native autoscroll,\n\t\t\t// Edge's autoscroll seems too conditional,\n\t\t\t// Firefox and Chrome are good\n\t\t\tif (fallback || Edge || IE11OrLess) {\n\t\t\t\t_autoScroll(evt, _this.options, elem, fallback);\n\n\t\t\t\t// Listener for pointer element change\n\t\t\t\tvar ogElemScroller = _getParentAutoScrollElement(elem, true);\n\t\t\t\tif (\n\t\t\t\t\tscrolling &&\n\t\t\t\t\t(\n\t\t\t\t\t\t!pointerElemChangedInterval ||\n\t\t\t\t\t\tx !== lastPointerElemX ||\n\t\t\t\t\t\ty !== lastPointerElemY\n\t\t\t\t\t)\n\t\t\t\t) {\n\n\t\t\t\t\tpointerElemChangedInterval && clearInterval(pointerElemChangedInterval);\n\t\t\t\t\t// Detect for pointer elem change, emulating native DnD behaviour\n\t\t\t\t\tpointerElemChangedInterval = setInterval(function() {\n\t\t\t\t\t\tif (!dragEl) return;\n\t\t\t\t\t\t// could also check if scroll direction on newElem changes due to parent autoscrolling\n\t\t\t\t\t\tvar newElem = _getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\t\t\t\t\t\tif (newElem !== ogElemScroller) {\n\t\t\t\t\t\t\togElemScroller = newElem;\n\t\t\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\t\t\t_autoScroll(evt, _this.options, ogElemScroller, fallback);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10);\n\t\t\t\t\tlastPointerElemX = x;\n\t\t\t\t\tlastPointerElemY = y;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n\t\t\t\tif (!_this.options.bubbleScroll || _getParentAutoScrollElement(elem, true) === window) {\n\t\t\t\t\t_clearAutoScrolls();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_autoScroll(evt, _this.options, _getParentAutoScrollElement(elem, false), false);\n\t\t\t}\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tlastDownEl = target;\n\t\t\t\tactiveGroup = options.group;\n\t\t\t\toldIndex = startIndex;\n\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: (touch || evt).clientX,\n\t\t\t\t\tclientY: (touch || evt).clientY\n\t\t\t\t};\n\n\t\t\t\tthis._lastX = (touch || evt).clientX;\n\t\t\t\tthis._lastY = (touch || evt).clientY;\n\n\t\t\t\tdragEl.style['will-change'] = 'all';\n\t\t\t\t// undo animation if needed\n\t\t\t\tdragEl.style.transition = '';\n\t\t\t\tdragEl.style.transform = '';\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDrag();\n\n\t\t\t\t\t// Make the element draggable\n\t\t\t\t\tdragEl.draggable = _this.nativeDraggable;\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(evt, touch);\n\n\t\t\t\t\t// Drag start event\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, rootEl, oldIndex);\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, options.chosenClass, true);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\tif (options.supportPointer) {\n\t\t\t\t\t_on(ownerDocument, 'pointerup', _this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\t\t\t\t}\n\n\t\t\t\tif (options.delay) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n\t\t\t\t\toptions.supportPointer && _on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_delayedDragTouchMoveHandler: function (/** TouchEvent|PointerEvent **/e) {\n\t\t\tvar touch = e.touches ? e.touches[0] : e;\n\t\t\tif (min(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY))\n\t\t\t\t\t>= this.options.touchStartThreshold\n\t\t\t) {\n\t\t\t\tthis._disableDelayedDrag();\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n\t\t\t_off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n\t\t\ttouch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n\t\t\tif (!this.nativeDraggable || touch) {\n\t\t\t\tif (this.options.supportPointer) {\n\t\t\t\t\t_on(document, 'pointermove', this._onTouchMove);\n\t\t\t\t} else if (touch) {\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t} else {\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// Timeout neccessary for IE9\n\t\t\t\t\t_nextTick(function () {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function (fallback) {\n\t\t\tawaitingDragStarted = false;\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t_on(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t\t_on(document, 'dragover', _checkAlignment);\n\t\t\t\t}\n\t\t\t\tvar options = this.options;\n\n\t\t\t\t// Apply effect\n\t\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, false);\n\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\n\t\t\t\t// In case dragging an animated element\n\t\t\t\t_css(dragEl, 'transform', '');\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\tfallback && this._appendGhost();\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, rootEl, oldIndex);\n\t\t\t} else {\n\t\t\t\tthis._nulling();\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function (bypassLastTouchCheck) {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY && !bypassLastTouchCheck) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\t_hideGhostForTarget();\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\tvar parent = target;\n\n\t\t\t\twhile (target && target.shadowRoot) {\n\t\t\t\t\ttarget = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\t\tparent = target;\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando]) {\n\t\t\t\t\t\t\tvar inserted;\n\n\t\t\t\t\t\t\tinserted = parent[expando]._onDragOver({\n\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (inserted && !this.options.dragoverBubble) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(touchEvt);\n\n\t\t\t\t_unhideGhostForTarget();\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt) {\n\t\t\tif (tapEvt) {\n\t\t\t\tvar\toptions = this.options,\n\t\t\t\t\tfallbackTolerance = options.fallbackTolerance,\n\t\t\t\t\tfallbackOffset = options.fallbackOffset,\n\t\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tmatrix = ghostEl && _matrix(ghostEl),\n\t\t\t\t\tscaleX = ghostEl && matrix && matrix.a,\n\t\t\t\t\tscaleY = ghostEl && matrix && matrix.d,\n\t\t\t\t\tdx = ((touch.clientX - tapEvt.clientX) + fallbackOffset.x) / (scaleX ? scaleX : 1),\n\t\t\t\t\tdy = ((touch.clientY - tapEvt.clientY) + fallbackOffset.y) / (scaleY ? scaleY : 1),\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active && !awaitingDragStarted) {\n\t\t\t\t\tif (fallbackTolerance &&\n\t\t\t\t\t\tmin(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDragStart(evt, true);\n\t\t\t\t}\n\n\t\t\t\tthis._handleAutoScroll(touch, true);\n\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar rect = _getRect(dragEl, this.options.fallbackOnBody ? document.body : rootEl, true),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options;\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\t\t\t\t_toggleClass(ghostEl, options.dragClass, true);\n\n\t\t\t\t_css(ghostEl, 'box-sizing', 'border-box');\n\t\t\t\t_css(ghostEl, 'margin', 0);\n\t\t\t\t_css(ghostEl, 'top', rect.top);\n\t\t\t\t_css(ghostEl, 'left', rect.left);\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', 'fixed');\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\toptions.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/fallback) {\n\t\t\tvar _this = this;\n\t\t\tvar dataTransfer = evt.dataTransfer;\n\t\t\tvar options = _this.options;\n\n\t\t\t// Setup clone\n\t\t\tcloneEl = _clone(dragEl);\n\n\t\t\tcloneEl.draggable = false;\n\t\t\tcloneEl.style['will-change'] = '';\n\n\t\t\tthis._hideClone();\n\n\t\t\t_toggleClass(cloneEl, _this.options.chosenClass, false);\n\n\n\t\t\t// #1143: IFrame support workaround\n\t\t\t_this._cloneId = _nextTick(function () {\n\t\t\t\tif (!_this.options.removeCloneOnHide) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t}\n\t\t\t\t_dispatchEvent(_this, rootEl, 'clone', dragEl);\n\t\t\t});\n\n\n\t\t\t!fallback && _toggleClass(dragEl, options.dragClass, true);\n\n\t\t\t// Set proper drop events\n\t\t\tif (fallback) {\n\t\t\t\tignoreNextClick = true;\n\t\t\t\t_this._loopId = setInterval(_this._emulateDragOver, 50);\n\t\t\t} else {\n\t\t\t\t// Undo what was set in _prepareDragStart before drag started\n\t\t\t\t_off(document, 'mouseup', _this._onDrop);\n\t\t\t\t_off(document, 'touchend', _this._onDrop);\n\t\t\t\t_off(document, 'touchcancel', _this._onDrop);\n\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(_this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', _this);\n\n\t\t\t\t// #1276 fix:\n\t\t\t\t_css(dragEl, 'transform', 'translateZ(0)');\n\t\t\t}\n\n\t\t\tawaitingDragStarted = true;\n\n\t\t\t_this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback));\n\t\t\t_on(document, 'selectstart', _this);\n\t\t},\n\n\t\t// Returns true - if no further action is needed (either inserted or another condition)\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget = evt.target,\n\t\t\t\tdragRect,\n\t\t\t\ttargetRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tactiveSortable = Sortable.active,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tcanSort = options.sort,\n\t\t\t\t_this = this;\n\n\t\t\tif (_silent) return;\n\n\t\t\t// IE event order fix\n\t\t\tif (IE11OrLess && !evt.rootEl && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Return invocation when no further action is needed in another sortable\n\t\t\tfunction completed() {\n\t\t\t\tif (activeSortable) {\n\t\t\t\t\t// Set ghost class to new sortable's ghost class\n\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\t\t\t\t}\n\n\t\t\t\tif (putSortable !== _this && _this !== Sortable.active) {\n\t\t\t\t\tputSortable = _this;\n\t\t\t\t} else if (_this === Sortable.active) {\n\t\t\t\t\tputSortable = null;\n\t\t\t\t}\n\n\n\t\t\t\t// Null lastTarget if it is not inside a previously swapped element\n\t\t\t\tif ((target === dragEl && !dragEl.animated) || (target === el && !target.animated)) {\n\t\t\t\t\tlastTarget = null;\n\t\t\t\t}\n\t\t\t\t// no bubbling and not fallback\n\t\t\t\tif (!options.dragoverBubble && !evt.rootEl && target !== document) {\n\t\t\t\t\t_this._handleAutoScroll(evt);\n\t\t\t\t\tdragEl.parentNode[expando]._computeIsAligned(evt);\n\t\t\t\t}\n\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Call when dragEl has been inserted\n\t\t\tfunction changed() {\n\t\t\t\t_dispatchEvent(_this, rootEl, 'change', target, el, rootEl, oldIndex, _index(dragEl, options.draggable), evt);\n\t\t\t}\n\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t}\n\n\n\t\t\tmoved = true;\n\n\t\t\ttarget = _closest(target, options.draggable, el, true);\n\n\t\t\t// target is dragEl or target is animated\n\t\t\tif (!!_closest(evt.target, null, dragEl, true) || target.animated) {\n\t\t\t\treturn completed();\n\t\t\t}\n\n\t\t\tif (target !== dragEl) {\n\t\t\t\tignoreNextClick = false;\n\t\t\t}\n\n\t\t\tif (activeSortable && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: (\n\t\t\t\t\t\tputSortable === this ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t(this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n\t\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tvar axis = this._getDirection(evt, target);\n\n\t\t\t\tdragRect = _getRect(dragEl);\n\n\t\t\t\tif (revert) {\n\t\t\t\t\tthis._hideClone();\n\t\t\t\t\tparentEl = rootEl; // actualization\n\n\t\t\t\t\tif (nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, nextEl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn completed();\n\t\t\t\t}\n\n\t\t\t\tif ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n\t\t\t\t\t_ghostIsLast(evt, axis, el) && !dragEl.animated\n\t\t\t\t) {\n\t\t\t\t\t//assign target only if condition is true\n\t\t\t\t\tif (el.children.length !== 0 && el.children[0] !== ghostEl && el === evt.target) {\n\t\t\t\t\t\ttarget = _lastChild(el);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\ttargetRect = _getRect(target);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\trealDragElRect = null;\n\n\t\t\t\t\t\tchanged();\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\ttarget && this._animate(targetRect, target);\n\t\t\t\t\t\treturn completed();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && target !== dragEl && target.parentNode === el) {\n\t\t\t\t\tvar direction = 0,\n\t\t\t\t\t\ttargetBeforeFirstSwap,\n\t\t\t\t\t\taligned = target.sortableMouseAligned,\n\t\t\t\t\t\tdifferentLevel = dragEl.parentNode !== el,\n\t\t\t\t\t\tscrolledPastTop = _isScrolledPast(target, axis === 'vertical' ? 'top' : 'left');\n\n\t\t\t\t\tif (lastTarget !== target) {\n\t\t\t\t\t\tlastMode = null;\n\t\t\t\t\t\ttargetBeforeFirstSwap = _getRect(target)[axis === 'vertical' ? 'top' : 'left'];\n\t\t\t\t\t\tpastFirstInvertThresh = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Reference: https://www.lucidchart.com/documents/view/10fa0e93-e362-4126-aca2-b709ee56bd8b/0\n\t\t\t\t\tif (\n\t\t\t\t\t\t_isElInRowColumn(dragEl, target, axis) && aligned ||\n\t\t\t\t\t\tdifferentLevel ||\n\t\t\t\t\t\tscrolledPastTop ||\n\t\t\t\t\t\toptions.invertSwap ||\n\t\t\t\t\t\tlastMode === 'insert' ||\n\t\t\t\t\t\t// Needed, in the case that we are inside target and inserted because not aligned... aligned will stay false while inside\n\t\t\t\t\t\t// and lastMode will change to 'insert', but we must swap\n\t\t\t\t\t\tlastMode === 'swap'\n\t\t\t\t\t) {\n\t\t\t\t\t\t// New target that we will be inside\n\t\t\t\t\t\tif (lastMode !== 'swap') {\n\t\t\t\t\t\t\tisCircumstantialInvert = options.invertSwap || differentLevel || scrolling || scrolledPastTop;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdirection = _getSwapDirection(evt, target, axis,\n\t\t\t\t\t\t\toptions.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold,\n\t\t\t\t\t\t\tisCircumstantialInvert,\n\t\t\t\t\t\t\tlastTarget === target);\n\t\t\t\t\t\tlastMode = 'swap';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Insert at position\n\t\t\t\t\t\tdirection = _getInsertDirection(target, options);\n\t\t\t\t\t\tlastMode = 'insert';\n\t\t\t\t\t}\n\t\t\t\t\tif (direction === 0) return completed();\n\n\t\t\t\t\trealDragElRect = null;\n\t\t\t\t\tlastTarget = target;\n\n\t\t\t\t\tlastDirection = direction;\n\n\t\t\t\t\ttargetRect = _getRect(target);\n\n\t\t\t\t\tvar nextSibling = target.nextElementSibling,\n\t\t\t\t\t\tafter = false;\n\n\t\t\t\t\tafter = direction === 1;\n\n\t\t\t\t\tvar moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\tif (isOwner) {\n\t\t\t\t\t\t\tactiveSortable._hideClone();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactiveSortable._showClone(this);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\t// must be done before animation\n\t\t\t\t\t\tif (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n\t\t\t\t\t\t\ttargetMoveDistance = abs(targetBeforeFirstSwap - _getRect(target)[axis === 'vertical' ? 'top' : 'left']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchanged();\n\t\t\t\t\t\t!differentLevel && this._animate(targetRect, target);\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\n\t\t\t\t\t\treturn completed();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (el.contains(dragEl)) {\n\t\t\t\t\treturn completed();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (IE11OrLess && !evt.rootEl) {\n\t\t\t\t_artificalBubble(el, evt, '_onDragOver');\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = _getRect(target);\n\n\t\t\t\tif (target === dragEl) {\n\t\t\t\t\trealDragElRect = currentRect;\n\t\t\t\t}\n\n\t\t\t\tif (prevRect.nodeType === 1) {\n\t\t\t\t\tprevRect = _getRect(prevRect);\n\t\t\t\t}\n\n\t\t\t\t// Check if actually moving position\n\t\t\t\tif ((prevRect.left + prevRect.width / 2) !== (currentRect.left + currentRect.width / 2)\n\t\t\t\t\t|| (prevRect.top + prevRect.height / 2) !== (currentRect.top + currentRect.height / 2)\n\t\t\t\t) {\n\t\t\t\t\tvar matrix = _matrix(this.el),\n\t\t\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t\t+ (prevRect.left - currentRect.left) / (scaleX ? scaleX : 1) + 'px,'\n\t\t\t\t\t\t+ (prevRect.top - currentRect.top) / (scaleY ? scaleY : 1) + 'px,0)'\n\t\t\t\t\t);\n\n\t\t\t\t\tforRepaintDummy = target.offsetWidth; // repaint\n\t\t\t\t\t_css(target, 'transition', 'transform ' + ms + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n\t\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\t\t\t\t}\n\n\t\t\t\t(typeof target.animated === 'number') && clearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(document, 'pointermove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointerup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t\t_off(document, 'selectstart', this);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\t\t\tawaitingDragStarted = false;\n\t\t\tscrolling = false;\n\t\t\tisCircumstantialInvert = false;\n\t\t\tpastFirstInvertThresh = false;\n\n\t\t\tclearInterval(this._loopId);\n\n\t\t\tclearInterval(pointerElemChangedInterval);\n\t\t\t_clearAutoScrolls();\n\t\t\t_cancelThrottle();\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t_cancelNextTick(this._cloneId);\n\t\t\t_cancelNextTick(this._dragStartId);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t\t_off(document, 'dragover', this._handleAutoScroll);\n\t\t\t\t_off(document, 'dragover', _checkAlignment);\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.cancelable && evt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (rootEl === parentEl || (putSortable && putSortable.lastPutMode !== 'clone')) {\n\t\t\t\t\t// Remove clone\n\t\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\t\t\t\t\tdragEl.style['will-change'] = '';\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\t// Drag stop event\n\t\t\t\t\t_dispatchEvent(this, rootEl, 'unchoose', dragEl, parentEl, rootEl, oldIndex, null, evt);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tputSortable && putSortable.save();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\t/* jshint eqnull:true */\n\t\t\t\t\t\tif (newIndex == null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, parentEl, rootEl, oldIndex, newIndex, evt);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\t\t\tlastDownEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\t\t\tautoScrolls.length =\n\n\t\t\tpointerElemChangedInterval =\n\t\t\tlastPointerElemX =\n\t\t\tlastPointerElemY =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\t\t\toldIndex =\n\n\t\t\tlastTarget =\n\t\t\tlastDirection =\n\n\t\t\tforRepaintDummy =\n\t\t\trealDragElRect =\n\n\t\t\tputSortable =\n\t\t\tactiveGroup =\n\t\t\tSortable.active = null;\n\n\t\t\tsavedInputChecked.forEach(function (el) {\n\t\t\t\tel.checked = true;\n\t\t\t});\n\n\t\t\tsavedInputChecked.length = 0;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tswitch (evt.type) {\n\t\t\t\tcase 'drop':\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dragenter':\n\t\t\t\tcase 'dragover':\n\t\t\t\t\tif (dragEl) {\n\t\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectstart':\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el, false)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl, false)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el, false);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\t\t\t_off(el, 'pointerdown', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\tthis._onDrop();\n\n\t\t\tsortables.splice(sortables.indexOf(this.el), 1);\n\n\t\t\tthis.el = el = null;\n\t\t},\n\n\t\t_hideClone: function() {\n\t\t\tif (!cloneEl.cloneHidden) {\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\tcloneEl.cloneHidden = true;\n\t\t\t\tif (cloneEl.parentNode && this.options.removeCloneOnHide) {\n\t\t\t\t\tcloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_showClone: function(putSortable) {\n\t\t\tif (putSortable.lastPutMode !== 'clone') {\n\t\t\t\tthis._hideClone();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cloneEl.cloneHidden) {\n\t\t\t\t// show clone at dragEl or original position\n\t\t\t\tif (rootEl.contains(dragEl) && !this.options.group.revertClone) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t} else if (nextEl) {\n\t\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\n\t\t\t\t} else {\n\t\t\t\t\trootEl.appendChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (this.options.group.revertClone) {\n\t\t\t\t\tthis._animate(dragEl, cloneEl);\n\t\t\t\t}\n\t\t\t\t_css(cloneEl, 'display', '');\n\t\t\t\tcloneEl.cloneHidden = false;\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\tselector != null &&\n\t\t\t\t\t(\n\t\t\t\t\t\tselector[0] === '>' && el.parentNode === ctx && _matches(el, selector.substring(1)) ||\n\t\t\t\t\t\t_matches(el, selector)\n\t\t\t\t\t) ||\n\t\t\t\t\tincludeCTX && el === ctx\n\t\t\t\t) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\n\t\t\t\tif (el === ctx) break;\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (el = _getParentOrHost(el));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _getParentOrHost(el) {\n\t\treturn (el.host && el !== document && el.host.nodeType)\n\t\t\t? el.host\n\t\t\t: el.parentNode;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.cancelable && evt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el && name) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style) && prop.indexOf('webkit') === -1) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _matrix(el) {\n\t\tvar appliedTransforms = '';\n\t\tdo {\n\t\t\tvar transform = _css(el, 'transform');\n\n\t\t\tif (transform && transform !== 'none') {\n\t\t\t\tappliedTransforms = transform + ' ' + appliedTransforms;\n\t\t\t}\n\t\t\t/* jshint boss:true */\n\t\t} while (el = el.parentNode);\n\n\t\tif (window.DOMMatrix) {\n\t\t\treturn new DOMMatrix(appliedTransforms);\n\t\t} else if (window.WebKitCSSMatrix) {\n\t\t\treturn new WebKitCSSMatrix(appliedTransforms);\n\t\t} else if (window.CSSMatrix) {\n\t\t\treturn new CSSMatrix(appliedTransforms);\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, toEl, fromEl, startIndex, newIndex, originalEvt) {\n\t\tsortable = (sortable || rootEl[expando]);\n\t\tvar evt,\n\t\t\toptions = sortable.options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent(name, {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, true);\n\t\t}\n\n\t\tevt.to = toEl || rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\tevt.originalEvent = originalEvt;\n\n\t\tif (rootEl) {\n\t\t\trootEl.dispatchEvent(evt);\n\t        }\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\t\t// Support for new CustomEvent feature\n\t\tif (window.CustomEvent && !IE11OrLess && !Edge) {\n\t\t\tevt = new CustomEvent('move', {\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true\n\t\t\t});\n\t\t} else {\n\t\t\tevt = document.createEvent('Event');\n\t\t\tevt.initEvent('move', true, true);\n\t\t}\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || _getRect(toEl);\n\t\tevt.willInsertAfter = willInsertAfter;\n\n\t\tevt.originalEvent = originalEvt;\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt, originalEvt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\t/**\n\t * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n\t * and non-draggable elements\n\t * @param  {HTMLElement} el       The parent element\n\t * @param  {Number} childNum      The index of the child\n\t * @param  {Object} options       Parent Sortable's options\n\t * @return {HTMLElement}          The child at index childNum, or null if not found\n\t */\n\tfunction _getChild(el, childNum, options) {\n\t\tvar currentChild = 0,\n\t\t\ti = 0,\n\t\t\tchildren = el.children;\n\n\t\twhile (i < children.length) {\n\t\t\tif (\n\t\t\t\tchildren[i].style.display !== 'none' &&\n\t\t\t\tchildren[i] !== ghostEl &&\n\t\t\t\tchildren[i] !== dragEl &&\n\t\t\t\t_closest(children[i], options.draggable, el, false)\n\t\t\t) {\n\t\t\t\tif (currentChild === childNum) {\n\t\t\t\t\treturn children[i];\n\t\t\t\t}\n\t\t\t\tcurrentChild++;\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n\t * @param  {HTMLElement} el       Parent element\n\t * @return {HTMLElement}          The last child, ignoring ghostEl\n\t */\n\tfunction _lastChild(el) {\n\t\tvar last = el.lastElementChild;\n\n\t\twhile (last === ghostEl || last.style.display === 'none') {\n\t\t\tlast = last.previousElementSibling;\n\n\t\t\tif (!last) break;\n\t\t}\n\n\t\treturn last || null;\n\t}\n\n\tfunction _ghostIsLast(evt, axis, el) {\n\t\tvar elRect = _getRect(_lastChild(el)),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\tmouseOnOppAxis = axis === 'vertical' ? evt.clientX : evt.clientY,\n\t\t\ttargetS2 = axis === 'vertical' ? elRect.bottom : elRect.right,\n\t\t\ttargetS1Opp = axis === 'vertical' ? elRect.left : elRect.top,\n\t\t\ttargetS2Opp = axis === 'vertical' ? elRect.right : elRect.bottom,\n\t\t\tspacer = 10;\n\n\t\treturn (\n\t\t\taxis === 'vertical' ?\n\t\t\t\t(mouseOnOppAxis > targetS2Opp + spacer || mouseOnOppAxis <= targetS2Opp && mouseOnAxis > targetS2 && mouseOnOppAxis >= targetS1Opp) :\n\t\t\t\t(mouseOnAxis > targetS2 && mouseOnOppAxis > targetS1Opp || mouseOnAxis <= targetS2 && mouseOnOppAxis > targetS2Opp + spacer)\n\t\t);\n\t}\n\n\tfunction _getSwapDirection(evt, target, axis, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n\t\tvar targetRect = _getRect(target),\n\t\t\tmouseOnAxis = axis === 'vertical' ? evt.clientY : evt.clientX,\n\t\t\ttargetLength = axis === 'vertical' ? targetRect.height : targetRect.width,\n\t\t\ttargetS1 = axis === 'vertical' ? targetRect.top : targetRect.left,\n\t\t\ttargetS2 = axis === 'vertical' ? targetRect.bottom : targetRect.right,\n\t\t\tdragRect = _getRect(dragEl),\n\t\t\tinvert = false;\n\n\n\t\tif (!invertSwap) {\n\t\t\t// Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n\t\t\tif (isLastTarget && targetMoveDistance < targetLength * swapThreshold) { // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n\t\t\t\t// check if past first invert threshold on side opposite of lastDirection\n\t\t\t\tif (!pastFirstInvertThresh &&\n\t\t\t\t\t(lastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\t// past first invert threshold, do not restrict inverted threshold to dragEl shadow\n\t\t\t\t\tpastFirstInvertThresh = true;\n\t\t\t\t}\n\n\t\t\t\tif (!pastFirstInvertThresh) {\n\t\t\t\t\tvar dragS1 = axis === 'vertical' ? dragRect.top : dragRect.left,\n\t\t\t\t\t\tdragS2 = axis === 'vertical' ? dragRect.bottom : dragRect.right;\n\t\t\t\t\t// dragEl shadow (target move distance shadow)\n\t\t\t\t\tif (\n\t\t\t\t\t\tlastDirection === 1 ?\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n\t\t\t\t\t\t) :\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmouseOnAxis > targetS2 - targetMoveDistance\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn lastDirection * -1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinvert = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Regular\n\t\t\t\tif (\n\t\t\t\t\tmouseOnAxis > targetS1 + (targetLength * (1 - swapThreshold) / 2) &&\n\t\t\t\t\tmouseOnAxis < targetS2 - (targetLength * (1 - swapThreshold) / 2)\n\t\t\t\t) {\n\t\t\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? -1 : 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinvert = invert || invertSwap;\n\n\t\tif (invert) {\n\t\t\t// Invert of regular\n\t\t\tif (\n\t\t\t\tmouseOnAxis < targetS1 + (targetLength * invertedSwapThreshold / 2) ||\n\t\t\t\tmouseOnAxis > targetS2 - (targetLength * invertedSwapThreshold / 2)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn ((mouseOnAxis > targetS1 + targetLength / 2) ? 1 : -1);\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Gets the direction dragEl must be swapped relative to target in order to make it\n\t * seem that dragEl has been \"inserted\" into that element's position\n\t * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n\t * @param  {Object} options           options of the parent sortable\n\t * @return {Number}                   Direction dragEl must be swapped\n\t */\n\tfunction _getInsertDirection(target, options) {\n\t\tvar dragElIndex = _index(dragEl, options.draggable),\n\t\t\ttargetIndex = _index(target, options.draggable);\n\n\t\tif (dragElIndex < targetIndex) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && el !== cloneEl) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (el) {\n\t\t\ttry {\n\t\t\t\tif (el.matches) {\n\t\t\t\t\treturn el.matches(selector);\n\t\t\t\t} else if (el.msMatchesSelector) {\n\t\t\t\t\treturn el.msMatchesSelector(selector);\n\t\t\t\t} else if (el.webkitMatchesSelector) {\n\t\t\t\t\treturn el.webkitMatchesSelector(selector);\n\t\t\t\t}\n\t\t\t} catch(_) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tvar _throttleTimeout;\n\tfunction _throttle(callback, ms) {\n\t\treturn function () {\n\t\t\tif (!_throttleTimeout) {\n\t\t\t\tvar args = arguments,\n\t\t\t\t\t_this = this;\n\n\t\t\t\t_throttleTimeout = setTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\t_throttleTimeout = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _cancelThrottle() {\n\t\tclearTimeout(_throttleTimeout);\n\t\t_throttleTimeout = void 0;\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\tfunction _clone(el) {\n\t\tif (Polymer && Polymer.dom) {\n\t\t\treturn Polymer.dom(el).cloneNode(true);\n\t\t}\n\t\telse if ($) {\n\t\t\treturn $(el).clone(true)[0];\n\t\t}\n\t\telse {\n\t\t\treturn el.cloneNode(true);\n\t\t}\n\t}\n\n\tfunction _saveInputCheckedState(root) {\n\t\tsavedInputChecked.length = 0;\n\n\t\tvar inputs = root.getElementsByTagName('input');\n\t\tvar idx = inputs.length;\n\n\t\twhile (idx--) {\n\t\t\tvar el = inputs[idx];\n\t\t\tel.checked && savedInputChecked.push(el);\n\t\t}\n\t}\n\n\tfunction _nextTick(fn) {\n\t\treturn setTimeout(fn, 0);\n\t}\n\n\tfunction _cancelNextTick(id) {\n\t\treturn clearTimeout(id);\n\t}\n\n\n\t/**\n\t * Returns the \"bounding client rect\" of given element\n\t * @param  {HTMLElement} el                The element whose boundingClientRect is wanted\n\t * @param  {[HTMLElement]} container       the parent the element will be placed in\n\t * @param  {[Boolean]} adjustForTransform  Whether the rect should compensate for parent's transform\n\t * (used for fixed positioning on el)\n\t * @return {Object}                        The boundingClientRect of el\n\t */\n\tfunction _getRect(el, container, adjustForTransform) {\n\t\tif (!el.getBoundingClientRect && el !== win) return;\n\n\t\tvar elRect,\n\t\t\ttop,\n\t\t\tleft,\n\t\t\tbottom,\n\t\t\tright,\n\t\t\theight,\n\t\t\twidth;\n\n\t\tif (el !== win) {\n\t\t\telRect = el.getBoundingClientRect();\n\t\t\ttop = elRect.top;\n\t\t\tleft = elRect.left;\n\t\t\tbottom = elRect.bottom;\n\t\t\tright = elRect.right;\n\t\t\theight = elRect.height;\n\t\t\twidth = elRect.width;\n\t\t} else {\n\t\t\ttop = 0;\n\t\t\tleft = 0;\n\t\t\tbottom = window.innerHeight;\n\t\t\tright = window.innerWidth;\n\t\t\theight = window.innerHeight;\n\t\t\twidth = window.innerWidth;\n\t\t}\n\n\t\tif (adjustForTransform && el !== win) {\n\t\t\t// Adjust for translate()\n\t\t\tcontainer = container || el.parentNode;\n\n\t\t\t// solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n\t\t\t// Not needed on <= IE11\n\t\t\tif (!IE11OrLess) {\n\t\t\t\tdo {\n\t\t\t\t\tif (container && container.getBoundingClientRect && _css(container, 'transform') !== 'none') {\n\t\t\t\t\t\tvar containerRect = container.getBoundingClientRect();\n\n\t\t\t\t\t\t// Set relative to edges of padding box of container\n\t\t\t\t\t\ttop -= containerRect.top + parseInt(_css(container, 'border-top-width'));\n\t\t\t\t\t\tleft -= containerRect.left + parseInt(_css(container, 'border-left-width'));\n\t\t\t\t\t\tbottom = top + elRect.height;\n\t\t\t\t\t\tright = left + elRect.width;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t} while (container = container.parentNode);\n\t\t\t}\n\n\t\t\t// Adjust for scale()\n\t\t\tvar matrix = _matrix(el),\n\t\t\t\tscaleX = matrix && matrix.a,\n\t\t\t\tscaleY = matrix && matrix.d;\n\n\t\t\tif (matrix) {\n\t\t\t\ttop /= scaleY;\n\t\t\t\tleft /= scaleX;\n\n\t\t\t\twidth /= scaleX;\n\t\t\t\theight /= scaleY;\n\n\t\t\t\tbottom = top + height;\n\t\t\t\tright = left + width;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left,\n\t\t\tbottom: bottom,\n\t\t\tright: right,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\t}\n\n\n\t/**\n\t * Checks if a side of an element is scrolled past a side of it's parents\n\t * @param  {HTMLElement}  el       The element who's side being scrolled out of view is in question\n\t * @param  {String}       side     Side of the element in question ('top', 'left', 'right', 'bottom')\n\t * @return {Boolean}               Whether the element is overflowing the viewport on the given side of it's parent\n\t */\n\tfunction _isScrolledPast(el, side) {\n\t\tvar parent = _getParentAutoScrollElement(parent, true),\n\t\t\telSide = _getRect(el)[side];\n\n\t\t/* jshint boss:true */\n\t\twhile (parent) {\n\t\t\tvar parentSide = _getRect(parent)[side],\n\t\t\t\tvisible;\n\n\t\t\tif (side === 'top' || side === 'left') {\n\t\t\t\tvisible = elSide >= parentSide;\n\t\t\t} else {\n\t\t\t\tvisible = elSide <= parentSide;\n\t\t\t}\n\n\t\t\tif (!visible) return true;\n\n\t\t\tif (parent === win) break;\n\n\t\t\tparent = _getParentAutoScrollElement(parent, false);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t// Fixed #973:\n\t_on(document, 'touchmove', function(evt) {\n\t\tif ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t});\n\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el, false);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tclone: _clone,\n\t\tindex: _index,\n\t\tnextTick: _nextTick,\n\t\tcancelNextTick: _cancelNextTick,\n\t\tdetectDirection: _detectDirection,\n\t\tgetChild: _getChild\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.8.3';\n\treturn Sortable;\n});\n", "'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar Sortable = _interopDefault(require('sortablejs'));\n\nfunction $(expr, con) {\n    return typeof expr === 'string' ?\n        (con || document).querySelector(expr) :\n        expr || null;\n}\n\n$.each = (expr, con) => {\n    return typeof expr === 'string' ?\n        Array.from((con || document).querySelectorAll(expr)) :\n        expr || null;\n};\n\n$.create = (tag, o) => {\n    let element = document.createElement(tag);\n\n    for (let i in o) {\n        let val = o[i];\n\n        if (i === 'inside') {\n            $(val).appendChild(element);\n        } else\n        if (i === 'around') {\n            let ref = $(val);\n            ref.parentNode.insertBefore(element, ref);\n            element.appendChild(ref);\n        } else\n        if (i === 'styles') {\n            if (typeof val === 'object') {\n                Object.keys(val).map(prop => {\n                    element.style[prop] = val[prop];\n                });\n            }\n        } else\n        if (i in element) {\n            element[i] = val;\n        } else {\n            element.setAttribute(i, val);\n        }\n    }\n\n    return element;\n};\n\n$.on = (element, event, selector, callback) => {\n    if (!callback) {\n        callback = selector;\n        $.bind(element, event, callback);\n    } else {\n        $.delegate(element, event, selector, callback);\n    }\n};\n\n$.off = (element, event, handler) => {\n    element.removeEventListener(event, handler);\n};\n\n$.bind = (element, event, callback) => {\n    event.split(/\\s+/).forEach(function (event) {\n        element.addEventListener(event, callback);\n    });\n};\n\n$.delegate = (element, event, selector, callback) => {\n    element.addEventListener(event, function (e) {\n        const delegatedTarget = e.target.closest(selector);\n        if (delegatedTarget) {\n            e.delegatedTarget = delegatedTarget;\n            callback.call(this, e, delegatedTarget);\n        }\n    });\n};\n\n$.unbind = (element, o) => {\n    if (element) {\n        for (let event in o) {\n            let callback = o[event];\n\n            event.split(/\\s+/).forEach(function (event) {\n                element.removeEventListener(event, callback);\n            });\n        }\n    }\n};\n\n$.fire = (target, type, properties) => {\n    let evt = document.createEvent('HTMLEvents');\n\n    evt.initEvent(type, true, true);\n\n    for (let j in properties) {\n        evt[j] = properties[j];\n    }\n\n    return target.dispatchEvent(evt);\n};\n\n$.data = (element, attrs) => { // eslint-disable-line\n    if (!attrs) {\n        return element.dataset;\n    }\n\n    for (const attr in attrs) {\n        element.dataset[attr] = attrs[attr];\n    }\n};\n\n$.style = (elements, styleMap) => { // eslint-disable-line\n\n    if (typeof styleMap === 'string') {\n        return $.getStyle(elements, styleMap);\n    }\n\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    elements.map(element => {\n        for (const prop in styleMap) {\n            element.style[prop] = styleMap[prop];\n        }\n    });\n};\n\n$.removeStyle = (elements, styleProps) => {\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    if (!Array.isArray(styleProps)) {\n        styleProps = [styleProps];\n    }\n\n    elements.map(element => {\n        for (const prop of styleProps) {\n            element.style[prop] = '';\n        }\n    });\n};\n\n$.getStyle = (element, prop) => {\n    if (!prop) {\n        return getComputedStyle(element);\n    }\n\n    let val = getComputedStyle(element)[prop];\n\n    if (['width', 'height'].includes(prop)) {\n        val = parseFloat(val);\n    }\n\n    return val;\n};\n\n$.closest = (selector, element) => {\n    if (!element) return null;\n\n    if (element.matches(selector)) {\n        return element;\n    }\n\n    return $.closest(selector, element.parentNode);\n};\n\n$.inViewport = (el, parentEl) => {\n    const {\n        top,\n        left,\n        bottom,\n        right\n    } = el.getBoundingClientRect();\n    const {\n        top: pTop,\n        left: pLeft,\n        bottom: pBottom,\n        right: pRight\n    } = parentEl.getBoundingClientRect();\n\n    return top >= pTop && left >= pLeft && bottom <= pBottom && right <= pRight;\n};\n\n$.scrollTop = function scrollTop(element, pixels) {\n    requestAnimationFrame(() => {\n        element.scrollTop = pixels;\n    });\n};\n\n$.scrollbarSize = function scrollbarSize() {\n    if (!$.scrollBarSizeValue) {\n        $.scrollBarSizeValue = getScrollBarSize();\n    }\n    return $.scrollBarSizeValue;\n};\n\nfunction getScrollBarSize() {\n    // assume scrollbar width and height would be the same\n\n    // Create the measurement node\n    const scrollDiv = document.createElement('div');\n    $.style(scrollDiv, {\n        width: '100px',\n        height: '100px',\n        overflow: 'scroll',\n        position: 'absolute',\n        top: '-9999px'\n    });\n    document.body.appendChild(scrollDiv);\n\n    // Get the scrollbar width\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n\n    // Delete the DIV\n    document.body.removeChild(scrollDiv);\n\n    return scrollbarWidth;\n}\n\n$.hasVerticalOverflow = function (element) {\n    return element.scrollHeight > element.offsetHeight + 10;\n};\n\n$.hasHorizontalOverflow = function (element) {\n    return element.scrollWidth > element.offsetWidth + 10;\n};\n\n$.measureTextWidth = function (text) {\n    const div = document.createElement('div');\n    div.style.position = 'absolute';\n    div.style.visibility = 'hidden';\n    div.style.height = 'auto';\n    div.style.width = 'auto';\n    div.style.whiteSpace = 'nowrap';\n    div.innerText = text;\n    document.body.appendChild(div);\n    return div.clientWidth + 1;\n};\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nvar isObject_1 = isObject;\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by rollup-plugin-commonjs');\n}\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\nvar _freeGlobal = freeGlobal;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = _freeGlobal || freeSelf || Function('return this')();\n\nvar _root = root;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return _root.Date.now();\n};\n\nvar now_1 = now;\n\n/** Built-in value references. */\nvar Symbol = _root.Symbol;\n\nvar _Symbol = Symbol;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nvar _getRawTag = getRawTag;\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$1.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\nvar _objectToString = objectToString;\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag$1 && symToStringTag$1 in Object(value))\n    ? _getRawTag(value)\n    : _objectToString(value);\n}\n\nvar _baseGetTag = baseGetTag;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nvar isObjectLike_1 = isObjectLike;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike_1(value) && _baseGetTag(value) == symbolTag);\n}\n\nvar isSymbol_1 = isSymbol;\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol_1(value)) {\n    return NAN;\n  }\n  if (isObject_1(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject_1(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nvar toNumber_1 = toNumber;\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber_1(wait) || 0;\n  if (isObject_1(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber_1(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now_1();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now_1());\n  }\n\n  function debounced() {\n    var time = now_1(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nvar debounce_1 = debounce;\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT$1 = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT$1);\n  }\n  if (isObject_1(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce_1(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nvar throttle_1 = throttle;\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject_1(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = _baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nvar isFunction_1 = isFunction;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = _root['__core-js_shared__'];\n\nvar _coreJsData = coreJsData;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nvar _isMasked = isMasked;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nvar _toSource = toSource;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto$1 = Function.prototype,\n    objectProto$2 = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString$1 = funcProto$1.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$1 = objectProto$2.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject_1(value) || _isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(_toSource(value));\n}\n\nvar _baseIsNative = baseIsNative;\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nvar _getValue = getValue;\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = _getValue(object, key);\n  return _baseIsNative(value) ? value : undefined;\n}\n\nvar _getNative = getNative;\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = _getNative(Object, 'create');\n\nvar _nativeCreate = nativeCreate;\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = _nativeCreate ? _nativeCreate(null) : {};\n  this.size = 0;\n}\n\nvar _hashClear = hashClear;\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _hashDelete = hashDelete;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto$3 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$2 = objectProto$3.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (_nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty$2.call(data, key) ? data[key] : undefined;\n}\n\nvar _hashGet = hashGet;\n\n/** Used for built-in method references. */\nvar objectProto$4 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$3 = objectProto$4.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return _nativeCreate ? (data[key] !== undefined) : hasOwnProperty$3.call(data, key);\n}\n\nvar _hashHas = hashHas;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$1 = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (_nativeCreate && value === undefined) ? HASH_UNDEFINED$1 : value;\n  return this;\n}\n\nvar _hashSet = hashSet;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = _hashClear;\nHash.prototype['delete'] = _hashDelete;\nHash.prototype.get = _hashGet;\nHash.prototype.has = _hashHas;\nHash.prototype.set = _hashSet;\n\nvar _Hash = Hash;\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nvar _listCacheClear = listCacheClear;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nvar eq_1 = eq;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq_1(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nvar _assocIndexOf = assocIndexOf;\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nvar _listCacheDelete = listCacheDelete;\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nvar _listCacheGet = listCacheGet;\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return _assocIndexOf(this.__data__, key) > -1;\n}\n\nvar _listCacheHas = listCacheHas;\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = _assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nvar _listCacheSet = listCacheSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = _listCacheClear;\nListCache.prototype['delete'] = _listCacheDelete;\nListCache.prototype.get = _listCacheGet;\nListCache.prototype.has = _listCacheHas;\nListCache.prototype.set = _listCacheSet;\n\nvar _ListCache = ListCache;\n\n/* Built-in method references that are verified to be native. */\nvar Map = _getNative(_root, 'Map');\n\nvar _Map = Map;\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new _Hash,\n    'map': new (_Map || _ListCache),\n    'string': new _Hash\n  };\n}\n\nvar _mapCacheClear = mapCacheClear;\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nvar _isKeyable = isKeyable;\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return _isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nvar _getMapData = getMapData;\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = _getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nvar _mapCacheDelete = mapCacheDelete;\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return _getMapData(this, key).get(key);\n}\n\nvar _mapCacheGet = mapCacheGet;\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return _getMapData(this, key).has(key);\n}\n\nvar _mapCacheHas = mapCacheHas;\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = _getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nvar _mapCacheSet = mapCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = _mapCacheClear;\nMapCache.prototype['delete'] = _mapCacheDelete;\nMapCache.prototype.get = _mapCacheGet;\nMapCache.prototype.has = _mapCacheHas;\nMapCache.prototype.set = _mapCacheSet;\n\nvar _MapCache = MapCache;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED$2 = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED$2);\n  return this;\n}\n\nvar _setCacheAdd = setCacheAdd;\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nvar _setCacheHas = setCacheHas;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new _MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = _setCacheAdd;\nSetCache.prototype.has = _setCacheHas;\n\nvar _SetCache = SetCache;\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nvar _baseFindIndex = baseFindIndex;\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nvar _baseIsNaN = baseIsNaN;\n\n/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nvar _strictIndexOf = strictIndexOf;\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? _strictIndexOf(array, value, fromIndex)\n    : _baseFindIndex(array, _baseIsNaN, fromIndex);\n}\n\nvar _baseIndexOf = baseIndexOf;\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && _baseIndexOf(array, value, 0) > -1;\n}\n\nvar _arrayIncludes = arrayIncludes;\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nvar _arrayIncludesWith = arrayIncludesWith;\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nvar _cacheHas = cacheHas;\n\n/* Built-in method references that are verified to be native. */\nvar Set = _getNative(_root, 'Set');\n\nvar _Set = Set;\n\n/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nvar noop_1 = noop;\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nvar _setToArray = setToArray;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(_Set && (1 / _setToArray(new _Set([,-0]))[1]) == INFINITY) ? noop_1 : function(values) {\n  return new _Set(values);\n};\n\nvar _createSet = createSet;\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = _arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = _arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : _createSet(array);\n    if (set) {\n      return _setToArray(set);\n    }\n    isCommon = false;\n    includes = _cacheHas;\n    seen = new _SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nvar _baseUniq = baseUniq;\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? _baseUniq(array) : [];\n}\n\nvar uniq_1 = uniq;\n\nfunction camelCaseToDash(str) {\n    return str.replace(/([A-Z])/g, (g) => `-${g[0].toLowerCase()}`);\n}\n\nfunction makeDataAttributeString(props) {\n    const keys = Object.keys(props);\n\n    return keys\n        .map((key) => {\n            const _key = camelCaseToDash(key);\n            const val = props[key];\n\n            if (val === undefined) return '';\n            return `data-${_key}=\"${val}\" `;\n        })\n        .join('')\n        .trim();\n}\n\nfunction copyTextToClipboard(text) {\n    // https://stackoverflow.com/a/30810322/5353542\n    var textArea = document.createElement('textarea');\n\n    //\n    // *** This styling is an extra step which is likely not required. ***\n    //\n    // Why is it here? To ensure:\n    // 1. the element is able to have focus and selection.\n    // 2. if element was to flash render it has minimal visual impact.\n    // 3. less flakyness with selection and copying which **might** occur if\n    //    the textarea element is not visible.\n    //\n    // The likelihood is the element won't even render, not even a flash,\n    // so some of these are just precautions. However in IE the element\n    // is visible whilst the popup box asking the user for permission for\n    // the web page to copy to the clipboard.\n    //\n\n    // Place in top-left corner of screen regardless of scroll position.\n    textArea.style.position = 'fixed';\n    textArea.style.top = 0;\n    textArea.style.left = 0;\n\n    // Ensure it has a small width and height. Setting to 1px / 1em\n    // doesn't work as this gives a negative w/h on some browsers.\n    textArea.style.width = '2em';\n    textArea.style.height = '2em';\n\n    // We don't need padding, reducing the size if it does flash render.\n    textArea.style.padding = 0;\n\n    // Clean up any borders.\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxShadow = 'none';\n\n    // Avoid flash of white box if rendered for any reason.\n    textArea.style.background = 'transparent';\n\n    textArea.value = text;\n\n    document.body.appendChild(textArea);\n\n    textArea.select();\n\n    try {\n        document.execCommand('copy');\n    } catch (err) {\n        console.log('Oops, unable to copy');\n    }\n\n    document.body.removeChild(textArea);\n}\n\nfunction isNumeric(val) {\n    return !isNaN(val);\n}\n\nlet throttle$1 = throttle_1;\n\nlet debounce$1 = debounce_1;\n\nfunction nextTick(fn, context = null) {\n    return (...args) => {\n        return new Promise(resolve => {\n            const execute = () => {\n                const out = fn.apply(context, args);\n                resolve(out);\n            };\n            setTimeout(execute);\n        });\n    };\n}\nfunction linkProperties(target, source, properties) {\n    const props = properties.reduce((acc, prop) => {\n        acc[prop] = {\n            get() {\n                return source[prop];\n            }\n        };\n        return acc;\n    }, {});\n    Object.defineProperties(target, props);\n}\nfunction isSet(val) {\n    return val !== undefined || val !== null;\n}\n\nfunction notSet(val) {\n    return !isSet(val);\n}\n\nfunction isNumber(val) {\n    return !isNaN(val);\n}\n\nfunction ensureArray(val) {\n    if (!Array.isArray(val)) {\n        return [val];\n    }\n    return val;\n}\n\nfunction uniq$1(arr) {\n    return uniq_1(arr);\n}\n\nfunction numberSortAsc(a, b) {\n    return a - b;\n}\nfunction stripHTML(html) {\n    return html.replace(/<[^>]*>/g, '');\n}\nfunction format(str, args) {\n    if (!str) return str;\n\n    Object.keys(args).forEach(arg => {\n        let regex = new RegExp(`{(${arg})}`, 'g');\n        str = str.replace(regex, args[arg]);\n    });\n\n    return str;\n}\n\nclass DataManager {\n    constructor(options) {\n        this.options = options;\n        this.sortRows = nextTick(this.sortRows, this);\n        this.switchColumn = nextTick(this.switchColumn, this);\n        this.removeColumn = nextTick(this.removeColumn, this);\n        this.options.filterRows = nextTick(this.options.filterRows, this);\n    }\n\n    init(data, columns) {\n        if (!data) {\n            data = this.options.data;\n        }\n        if (columns) {\n            this.options.columns = columns;\n        }\n\n        this.data = data;\n\n        this.rowCount = 0;\n        this.columns = [];\n        this.rows = [];\n\n        this.prepareColumns();\n        this.prepareRows();\n        this.prepareTreeRows();\n        this.prepareRowView();\n        this.prepareNumericColumns();\n    }\n\n    // computed property\n    get currentSort() {\n        const col = this.columns.find(col => col.sortOrder !== 'none');\n        return col || {\n            colIndex: -1,\n            sortOrder: 'none'\n        };\n    }\n\n    prepareColumns() {\n        this.columns = [];\n        this.validateColumns();\n        this.prepareDefaultColumns();\n        this.prepareHeader();\n    }\n\n    prepareDefaultColumns() {\n        if (this.options.checkboxColumn && !this.hasColumnById('_checkbox')) {\n            const cell = {\n                id: '_checkbox',\n                content: this.getCheckboxHTML(),\n                editable: false,\n                resizable: false,\n                sortable: false,\n                focusable: false,\n                dropdown: false,\n                width: 32\n            };\n            this.columns.push(cell);\n        }\n\n        if (this.options.serialNoColumn && !this.hasColumnById('_rowIndex')) {\n            let cell = {\n                id: '_rowIndex',\n                content: '',\n                align: 'center',\n                editable: false,\n                resizable: false,\n                focusable: false,\n                dropdown: false\n            };\n\n            this.columns.push(cell);\n        }\n    }\n\n    prepareHeader() {\n        let columns = this.columns.concat(this.options.columns);\n        const baseCell = {\n            isHeader: 1,\n            editable: true,\n            sortable: true,\n            resizable: true,\n            focusable: true,\n            dropdown: true,\n            width: null,\n            format: (value) => {\n                if (value === null || value === undefined) {\n                    return '';\n                }\n                return value + '';\n            }\n        };\n\n        this.columns = columns\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(col => Object.assign({}, baseCell, col))\n            .map(col => {\n                col.content = col.content || col.name || '';\n                col.id = col.id || col.content;\n                return col;\n            });\n    }\n\n    prepareCell(content, i) {\n        const cell = {\n            content: '',\n            sortOrder: 'none',\n            colIndex: i,\n            column: this.columns[i]\n        };\n\n        if (content !== null && typeof content === 'object') {\n            // passed as column/header\n            Object.assign(cell, content);\n        } else {\n            cell.content = content;\n        }\n\n        return cell;\n    }\n\n    prepareNumericColumns() {\n        const row0 = this.getRow(0);\n        if (!row0) return;\n        this.columns = this.columns.map((column, i) => {\n\n            const cellValue = row0[i].content;\n            if (!column.align && isNumeric(cellValue)) {\n                column.align = 'right';\n            }\n\n            return column;\n        });\n    }\n\n    prepareRows() {\n        this.validateData(this.data);\n\n        this.rows = this.data.map((d, i) => {\n            const index = this._getNextRowCount();\n\n            let row = [];\n            let meta = {\n                rowIndex: index\n            };\n\n            if (Array.isArray(d)) {\n                // row is an array\n                if (this.options.checkboxColumn) {\n                    row.push(this.getCheckboxHTML());\n                }\n                if (this.options.serialNoColumn) {\n                    row.push((index + 1) + '');\n                }\n                row = row.concat(d);\n\n                while (row.length < this.columns.length) {\n                    row.push('');\n                }\n\n            } else {\n                // row is an object\n                for (let col of this.columns) {\n                    if (col.id === '_checkbox') {\n                        row.push(this.getCheckboxHTML());\n                    } else if (col.id === '_rowIndex') {\n                        row.push((index + 1) + '');\n                    } else {\n                        row.push(d[col.id]);\n                    }\n                }\n\n                meta.indent = d.indent || 0;\n            }\n\n            return this.prepareRow(row, meta);\n        });\n    }\n\n    prepareTreeRows() {\n        this.rows.forEach((row, i) => {\n            if (isNumber(row.meta.indent)) {\n                // if (i === 36) debugger;\n                const nextRow = this.getRow(i + 1);\n                row.meta.isLeaf = !nextRow ||\n                    notSet(nextRow.meta.indent) ||\n                    nextRow.meta.indent <= row.meta.indent;\n                row.meta.isTreeNodeClose = false;\n            }\n        });\n    }\n\n    prepareRowView() {\n        // This is order in which rows will be rendered in the table.\n        // When sorting happens, only this.rowViewOrder will change\n        // and not the original this.rows\n        this.rowViewOrder = this.rows.map(row => row.meta.rowIndex);\n    }\n\n    prepareRow(row, meta) {\n        const baseRowCell = {\n            rowIndex: meta.rowIndex,\n            indent: meta.indent\n        };\n\n        row = row\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(cell => Object.assign({}, baseRowCell, cell));\n\n        // monkey patched in array object\n        row.meta = meta;\n        return row;\n    }\n\n    validateColumns() {\n        const columns = this.options.columns;\n        if (!Array.isArray(columns)) {\n            throw new DataError('`columns` must be an array');\n        }\n\n        columns.forEach((column, i) => {\n            if (typeof column !== 'string' && typeof column !== 'object') {\n                throw new DataError(`column \"${i}\" must be a string or an object`);\n            }\n        });\n    }\n\n    validateData(data) {\n        if (Array.isArray(data) &&\n            (data.length === 0 || Array.isArray(data[0]) || typeof data[0] === 'object')) {\n            return true;\n        }\n        throw new DataError('`data` must be an array of arrays or objects');\n    }\n\n    appendRows(rows) {\n        this.validateData(rows);\n\n        this.rows.push(...this.prepareRows(rows));\n    }\n\n    sortRows(colIndex, sortOrder = 'none') {\n        colIndex = +colIndex;\n\n        // reset sortOrder and update for colIndex\n        this.getColumns()\n            .map(col => {\n                if (col.colIndex === colIndex) {\n                    col.sortOrder = sortOrder;\n                } else {\n                    col.sortOrder = 'none';\n                }\n            });\n\n        this._sortRows(colIndex, sortOrder);\n    }\n\n    _sortRows(colIndex, sortOrder) {\n\n        if (this.currentSort.colIndex === colIndex) {\n            // reverse the array if only sortOrder changed\n            if (\n                (this.currentSort.sortOrder === 'asc' && sortOrder === 'desc') ||\n                (this.currentSort.sortOrder === 'desc' && sortOrder === 'asc')\n            ) {\n                this.reverseArray(this.rowViewOrder);\n                this.currentSort.sortOrder = sortOrder;\n                return;\n            }\n        }\n\n        this.rowViewOrder.sort((a, b) => {\n            const aIndex = a;\n            const bIndex = b;\n\n            let aContent = this.getCell(colIndex, a).content;\n            let bContent = this.getCell(colIndex, b).content;\n            aContent = aContent == null ? '' : aContent;\n            bContent = bContent == null ? '' : bContent;\n\n            if (sortOrder === 'none') {\n                return aIndex - bIndex;\n            } else if (sortOrder === 'asc') {\n                if (aContent < bContent) return -1;\n                if (aContent > bContent) return 1;\n                if (aContent === bContent) return 0;\n            } else if (sortOrder === 'desc') {\n                if (aContent < bContent) return 1;\n                if (aContent > bContent) return -1;\n                if (aContent === bContent) return 0;\n            }\n            return 0;\n        });\n\n        if (this.hasColumnById('_rowIndex')) {\n            // update row index\n            const srNoColIndex = this.getColumnIndexById('_rowIndex');\n            this.rows.forEach((row, index) => {\n                const viewIndex = this.rowViewOrder.indexOf(index);\n                const cell = row[srNoColIndex];\n                cell.content = (viewIndex + 1) + '';\n            });\n        }\n    }\n\n    reverseArray(array) {\n        let left = null;\n        let right = null;\n        let length = array.length;\n\n        for (left = 0, right = length - 1; left < right; left += 1, right -= 1) {\n            const temporary = array[left];\n\n            array[left] = array[right];\n            array[right] = temporary;\n        }\n    }\n\n    switchColumn(index1, index2) {\n        // update columns\n        const temp = this.columns[index1];\n        this.columns[index1] = this.columns[index2];\n        this.columns[index2] = temp;\n\n        this.columns[index1].colIndex = index1;\n        this.columns[index2].colIndex = index2;\n\n        // update rows\n        this.rows.forEach(row => {\n            const newCell1 = Object.assign({}, row[index1], {\n                colIndex: index2\n            });\n            const newCell2 = Object.assign({}, row[index2], {\n                colIndex: index1\n            });\n\n            row[index2] = newCell1;\n            row[index1] = newCell2;\n        });\n    }\n\n    removeColumn(index) {\n        index = +index;\n        const filter = cell => cell.colIndex !== index;\n        const map = (cell, i) => Object.assign({}, cell, {\n            colIndex: i\n        });\n        // update columns\n        this.columns = this.columns\n            .filter(filter)\n            .map(map);\n\n        // update rows\n        this.rows.forEach(row => {\n            // remove cell\n            row.splice(index, 1);\n            // update colIndex\n            row.forEach((cell, i) => {\n                cell.colIndex = i;\n            });\n        });\n    }\n\n    updateRow(row, rowIndex) {\n        if (row.length < this.columns.length) {\n            if (this.hasColumnById('_rowIndex')) {\n                const val = (rowIndex + 1) + '';\n\n                row = [val].concat(row);\n            }\n\n            if (this.hasColumnById('_checkbox')) {\n                const val = '<input type=\"checkbox\" />';\n\n                row = [val].concat(row);\n            }\n        }\n\n        const _row = this.prepareRow(row, {rowIndex});\n        const index = this.rows.findIndex(row => row[0].rowIndex === rowIndex);\n        this.rows[index] = _row;\n\n        return _row;\n    }\n\n    updateCell(colIndex, rowIndex, options) {\n        let cell;\n        if (typeof colIndex === 'object') {\n            // cell object was passed,\n            // must have colIndex, rowIndex\n            cell = colIndex;\n            colIndex = cell.colIndex;\n            rowIndex = cell.rowIndex;\n            // the object passed must be merged with original cell\n            options = cell;\n        }\n        cell = this.getCell(colIndex, rowIndex);\n\n        // mutate object directly\n        for (let key in options) {\n            const newVal = options[key];\n            if (newVal !== undefined) {\n                cell[key] = newVal;\n            }\n        }\n\n        return cell;\n    }\n\n    updateColumn(colIndex, keyValPairs) {\n        const column = this.getColumn(colIndex);\n        for (let key in keyValPairs) {\n            const newVal = keyValPairs[key];\n            if (newVal !== undefined) {\n                column[key] = newVal;\n            }\n        }\n        return column;\n    }\n\n    filterRows(filters) {\n        return this.options.filterRows(this.rows, filters)\n            .then(result => {\n                if (!result) {\n                    result = this.getAllRowIndices();\n                }\n\n                if (!result.then) {\n                    result = Promise.resolve(result);\n                }\n\n                return result.then(rowsToShow => {\n                    this._filteredRows = rowsToShow;\n\n                    const rowsToHide = this.getAllRowIndices()\n                        .filter(index => !rowsToShow.includes(index));\n\n                    return {\n                        rowsToHide,\n                        rowsToShow\n                    };\n                });\n            });\n    }\n\n    getFilteredRowIndices() {\n        return this._filteredRows || this.getAllRowIndices();\n    }\n\n    getAllRowIndices() {\n        return this.rows.map(row => row.meta.rowIndex);\n    }\n\n    getRowCount() {\n        return this.rowCount;\n    }\n\n    _getNextRowCount() {\n        const val = this.rowCount;\n\n        this.rowCount++;\n        return val;\n    }\n\n    getRows(start, end) {\n        return this.rows.slice(start, end);\n    }\n\n    getRowsForView(start, end) {\n        const rows = this.rowViewOrder.map(i => this.rows[i]);\n        return rows.slice(start, end);\n    }\n\n    getColumns(skipStandardColumns) {\n        let columns = this.columns;\n\n        if (skipStandardColumns) {\n            columns = columns.slice(this.getStandardColumnCount());\n        }\n\n        return columns;\n    }\n\n    getStandardColumnCount() {\n        if (this.options.checkboxColumn && this.options.serialNoColumn) {\n            return 2;\n        }\n\n        if (this.options.checkboxColumn || this.options.serialNoColumn) {\n            return 1;\n        }\n\n        return 0;\n    }\n\n    getColumnCount(skipStandardColumns) {\n        let val = this.columns.length;\n\n        if (skipStandardColumns) {\n            val = val - this.getStandardColumnCount();\n        }\n\n        return val;\n    }\n\n    getColumn(colIndex) {\n        colIndex = +colIndex;\n\n        if (colIndex < 0) {\n            // negative indexes\n            colIndex = this.columns.length + colIndex;\n        }\n\n        return this.columns.find(col => col.colIndex === colIndex);\n    }\n\n    getColumnById(id) {\n        return this.columns.find(col => col.id === id);\n    }\n\n    getRow(rowIndex) {\n        rowIndex = +rowIndex;\n        return this.rows[rowIndex];\n    }\n\n    getCell(colIndex, rowIndex) {\n        rowIndex = +rowIndex;\n        colIndex = +colIndex;\n        return this.getRow(rowIndex)[colIndex];\n    }\n\n    getChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent)) continue;\n\n            if (row.meta.indent > parentIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    getImmediateChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n        const childIndent = parentIndent + 1;\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent) || row.meta.indent > childIndent) continue;\n\n            if (row.meta.indent === childIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    get() {\n        return {\n            columns: this.columns,\n            rows: this.rows\n        };\n    }\n\n    /**\n     * Returns the original data which was passed\n     * based on rowIndex\n     * @param {Number} rowIndex\n     * @returns Array|Object\n     * @memberof DataManager\n     */\n    getData(rowIndex) {\n        return this.data[rowIndex];\n    }\n\n    hasColumn(name) {\n        return Boolean(this.columns.find(col => col.content === name));\n    }\n\n    hasColumnById(id) {\n        return Boolean(this.columns.find(col => col.id === id));\n    }\n\n    getColumnIndex(name) {\n        return this.columns.findIndex(col => col.content === name);\n    }\n\n    getColumnIndexById(id) {\n        return this.columns.findIndex(col => col.id === id);\n    }\n\n    getCheckboxHTML() {\n        return '<input type=\"checkbox\" />';\n    }\n}\n\n// Custom Errors\nclass DataError extends TypeError {}\n\n/* eslint-disable max-len */\n\n// Icons from https://feathericons.com/\n\nlet icons = {\n    chevronDown: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-down\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>',\n    chevronRight: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-right\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>'\n};\n\nclass CellManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'wrapper',\n            'options',\n            'style',\n            'header',\n            'bodyScrollable',\n            'columnmanager',\n            'rowmanager',\n            'datamanager',\n            'keyboard'\n        ]);\n\n        this.bindEvents();\n    }\n\n    bindEvents() {\n        this.bindFocusCell();\n        this.bindEditCell();\n        this.bindKeyboardSelection();\n        this.bindCopyCellContents();\n        this.bindMouseEvents();\n        this.bindTreeEvents();\n    }\n\n    bindFocusCell() {\n        this.bindKeyboardNav();\n    }\n\n    bindEditCell() {\n        this.$editingCell = null;\n\n        $.on(this.bodyScrollable, 'dblclick', '.dt-cell', (e, cell) => {\n            this.activateEditing(cell);\n        });\n\n        this.keyboard.on('enter', () => {\n            if (this.$focusedCell && !this.$editingCell) {\n                // enter keypress on focused cell\n                this.activateEditing(this.$focusedCell);\n            } else if (this.$editingCell) {\n                // enter keypress on editing cell\n                this.deactivateEditing();\n            }\n        });\n    }\n\n    bindKeyboardNav() {\n        const focusLastCell = (direction) => {\n            if (!this.$focusedCell || this.$editingCell) {\n                return false;\n            }\n\n            let $cell = this.$focusedCell;\n            const {\n                rowIndex,\n                colIndex\n            } = $.data($cell);\n\n            if (direction === 'left') {\n                $cell = this.getLeftMostCell$(rowIndex);\n            } else if (direction === 'right') {\n                $cell = this.getRightMostCell$(rowIndex);\n            } else if (direction === 'up') {\n                $cell = this.getTopMostCell$(colIndex);\n            } else if (direction === 'down') {\n                $cell = this.getBottomMostCell$(colIndex);\n            }\n\n            this.focusCell($cell);\n            return true;\n        };\n\n        ['left', 'right', 'up', 'down', 'tab', 'shift+tab']\n            .map(direction => this.keyboard.on(direction, () => this.focusCellInDirection(direction)));\n\n        ['left', 'right', 'up', 'down']\n            .map(direction => this.keyboard.on(`ctrl+${direction}`, () => focusLastCell(direction)));\n\n        this.keyboard.on('esc', () => {\n            this.deactivateEditing(false);\n            this.columnmanager.toggleFilter(false);\n        });\n\n        if (this.options.inlineFilters) {\n            this.keyboard.on('ctrl+f', (e) => {\n                const $cell = $.closest('.dt-cell', e.target);\n                const { colIndex } = $.data($cell);\n\n                this.activateFilter(colIndex);\n                return true;\n            });\n\n            $.on(this.header, 'focusin', '.dt-filter', () => {\n                this.unfocusCell(this.$focusedCell);\n            });\n        }\n    }\n\n    bindKeyboardSelection() {\n        const getNextSelectionCursor = (direction) => {\n            let $selectionCursor = this.getSelectionCursor();\n\n            if (direction === 'left') {\n                $selectionCursor = this.getLeftCell$($selectionCursor);\n            } else if (direction === 'right') {\n                $selectionCursor = this.getRightCell$($selectionCursor);\n            } else if (direction === 'up') {\n                $selectionCursor = this.getAboveCell$($selectionCursor);\n            } else if (direction === 'down') {\n                $selectionCursor = this.getBelowCell$($selectionCursor);\n            }\n\n            return $selectionCursor;\n        };\n\n        ['left', 'right', 'up', 'down']\n            .map(direction =>\n                this.keyboard.on(`shift+${direction}`, () => this.selectArea(getNextSelectionCursor(direction))));\n    }\n\n    bindCopyCellContents() {\n        this.keyboard.on('ctrl+c', () => {\n            const noOfCellsCopied = this.copyCellContents(this.$focusedCell, this.$selectionCursor);\n            const message = this.instance.translate('{count} cells copied', {\n                count: noOfCellsCopied\n            });\n\n            if (noOfCellsCopied) {\n                this.instance.showToastMessage(message, 2);\n            }\n        });\n\n        if (this.options.pasteFromClipboard) {\n            this.keyboard.on('ctrl+v', (e) => {\n                // hack\n                // https://stackoverflow.com/a/2177059/5353542\n                this.instance.pasteTarget.focus();\n\n                setTimeout(() => {\n                    const data = this.instance.pasteTarget.value;\n                    this.instance.pasteTarget.value = '';\n                    this.pasteContentInCell(data);\n                }, 10);\n\n                return false;\n            });\n        }\n    }\n\n    bindMouseEvents() {\n        let mouseDown = null;\n\n        $.on(this.bodyScrollable, 'mousedown', '.dt-cell', (e) => {\n            mouseDown = true;\n            this.focusCell($(e.delegatedTarget));\n        });\n\n        $.on(this.bodyScrollable, 'mouseup', () => {\n            mouseDown = false;\n        });\n\n        const selectArea = (e) => {\n            if (!mouseDown) return;\n            this.selectArea($(e.delegatedTarget));\n        };\n\n        $.on(this.bodyScrollable, 'mousemove', '.dt-cell', throttle$1(selectArea, 50));\n    }\n\n    bindTreeEvents() {\n        $.on(this.bodyScrollable, 'click', '.dt-tree-node__toggle', (e, $toggle) => {\n            const $cell = $.closest('.dt-cell', $toggle);\n            const { rowIndex } = $.data($cell);\n\n            if ($cell.classList.contains('dt-cell--tree-close')) {\n                this.rowmanager.openSingleNode(rowIndex);\n            } else {\n                this.rowmanager.closeSingleNode(rowIndex);\n            }\n        });\n    }\n\n    focusCell($cell, {\n        skipClearSelection = 0,\n        skipDOMFocus = 0,\n        skipScrollToCell = 0\n    } = {}) {\n        if (!$cell) return;\n\n        // don't focus if already editing cell\n        if ($cell === this.$editingCell) return;\n\n        const {\n            colIndex,\n            isHeader\n        } = $.data($cell);\n        if (isHeader) {\n            return;\n        }\n\n        const column = this.columnmanager.getColumn(colIndex);\n        if (column.focusable === false) {\n            return;\n        }\n\n        if (!skipScrollToCell) {\n            this.scrollToCell($cell);\n        }\n\n        this.deactivateEditing();\n        if (!skipClearSelection) {\n            this.clearSelection();\n        }\n\n        if (this.$focusedCell) {\n            this.$focusedCell.classList.remove('dt-cell--focus');\n        }\n\n        this.$focusedCell = $cell;\n        $cell.classList.add('dt-cell--focus');\n\n        if (!skipDOMFocus) {\n            // so that keyboard nav works\n            $cell.focus();\n        }\n\n        this.highlightRowColumnHeader($cell);\n    }\n\n    unfocusCell($cell) {\n        if (!$cell) return;\n\n        // remove cell border\n        $cell.classList.remove('dt-cell--focus');\n        this.$focusedCell = null;\n\n        // reset header background\n        if (this.lastHeaders) {\n            this.lastHeaders.forEach(header => header && header.classList.remove('dt-cell--highlight'));\n        }\n    }\n\n    highlightRowColumnHeader($cell) {\n        const {\n            colIndex,\n            rowIndex\n        } = $.data($cell);\n\n        const srNoColIndex = this.datamanager.getColumnIndexById('_rowIndex');\n        const colHeaderSelector = `.dt-cell--header-${colIndex}`;\n        const rowHeaderSelector = `.dt-cell--${srNoColIndex}-${rowIndex}`;\n\n        if (this.lastHeaders) {\n            this.lastHeaders.forEach(header => header && header.classList.remove('dt-cell--highlight'));\n        }\n\n        const colHeader = $(colHeaderSelector, this.wrapper);\n        const rowHeader = $(rowHeaderSelector, this.wrapper);\n\n        this.lastHeaders = [colHeader, rowHeader];\n        this.lastHeaders.forEach(header => header && header.classList.add('dt-cell--highlight'));\n    }\n\n    selectAreaOnClusterChanged() {\n        if (!(this.$focusedCell && this.$selectionCursor)) return;\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$selectionCursor);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell || $cell === this.$selectionCursor) return;\n\n        // selectArea needs $focusedCell\n        const fCell = $.data(this.$focusedCell);\n        this.$focusedCell = this.getCell$(fCell.colIndex, fCell.rowIndex);\n\n        this.selectArea($cell);\n    }\n\n    focusCellOnClusterChanged() {\n        if (!this.$focusedCell) return;\n\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$focusedCell);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell) return;\n        // this function is called after hyperlist renders the rows after scroll,\n        // focusCell calls clearSelection which resets the area selection\n        // so a flag to skip it\n        // we also skip DOM focus and scroll to cell\n        // because it fights with the user scroll\n        this.focusCell($cell, {\n            skipClearSelection: 1,\n            skipDOMFocus: 1,\n            skipScrollToCell: 1\n        });\n    }\n\n    selectArea($selectionCursor) {\n        if (!this.$focusedCell) return;\n\n        if (this._selectArea(this.$focusedCell, $selectionCursor)) {\n            // valid selection\n            this.$selectionCursor = $selectionCursor;\n        }\n    }\n\n    _selectArea($cell1, $cell2) {\n        if ($cell1 === $cell2) return false;\n\n        const cells = this.getCellsInRange($cell1, $cell2);\n        if (!cells) return false;\n\n        this.clearSelection();\n        this._selectedCells = cells.map(index => this.getCell$(...index));\n        requestAnimationFrame(() => {\n            this._selectedCells.map($cell => $cell.classList.add('dt-cell--highlight'));\n        });\n        return true;\n    }\n\n    getCellsInRange($cell1, $cell2) {\n        let colIndex1, rowIndex1, colIndex2, rowIndex2;\n\n        if (typeof $cell1 === 'number') {\n            [colIndex1, rowIndex1, colIndex2, rowIndex2] = arguments;\n        } else\n        if (typeof $cell1 === 'object') {\n            if (!($cell1 && $cell2)) {\n                return false;\n            }\n\n            const cell1 = $.data($cell1);\n            const cell2 = $.data($cell2);\n\n            colIndex1 = +cell1.colIndex;\n            rowIndex1 = +cell1.rowIndex;\n            colIndex2 = +cell2.colIndex;\n            rowIndex2 = +cell2.rowIndex;\n        }\n\n        if (rowIndex1 > rowIndex2) {\n            [rowIndex1, rowIndex2] = [rowIndex2, rowIndex1];\n        }\n\n        if (colIndex1 > colIndex2) {\n            [colIndex1, colIndex2] = [colIndex2, colIndex1];\n        }\n\n        if (this.isStandardCell(colIndex1) || this.isStandardCell(colIndex2)) {\n            return false;\n        }\n\n        const cells = [];\n        let colIndex = colIndex1;\n        let rowIndex = rowIndex1;\n        const rowIndices = [];\n\n        while (rowIndex <= rowIndex2) {\n            rowIndices.push(rowIndex);\n            rowIndex += 1;\n        }\n\n        rowIndices.map((rowIndex) => {\n            while (colIndex <= colIndex2) {\n                cells.push([colIndex, rowIndex]);\n                colIndex++;\n            }\n            colIndex = colIndex1;\n        });\n\n        return cells;\n    }\n\n    clearSelection() {\n        (this._selectedCells || [])\n            .forEach($cell => $cell.classList.remove('dt-cell--highlight'));\n\n        this._selectedCells = [];\n        this.$selectionCursor = null;\n    }\n\n    getSelectionCursor() {\n        return this.$selectionCursor || this.$focusedCell;\n    }\n\n    activateEditing($cell) {\n        this.focusCell($cell);\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n\n        const col = this.columnmanager.getColumn(colIndex);\n        if (col && (col.editable === false || col.focusable === false)) {\n            return;\n        }\n\n        const cell = this.getCell(colIndex, rowIndex);\n        if (cell && cell.editable === false) {\n            return;\n        }\n\n        if (this.$editingCell) {\n            const {\n                _rowIndex,\n                _colIndex\n            } = $.data(this.$editingCell);\n\n            if (rowIndex === _rowIndex && colIndex === _colIndex) {\n                // editing the same cell\n                return;\n            }\n        }\n\n        this.$editingCell = $cell;\n        $cell.classList.add('dt-cell--editing');\n\n        const $editCell = $('.dt-cell__edit', $cell);\n        $editCell.innerHTML = '';\n\n        const editor = this.getEditor(colIndex, rowIndex, cell.content, $editCell);\n\n        if (editor) {\n            this.currentCellEditor = editor;\n            // initialize editing input with cell value\n            editor.initValue(cell.content, rowIndex, col);\n        }\n    }\n\n    deactivateEditing(submitValue = true) {\n        if (submitValue) {\n            this.submitEditing();\n        }\n        // keep focus on the cell so that keyboard navigation works\n        if (this.$focusedCell) this.$focusedCell.focus();\n\n        if (!this.$editingCell) return;\n        this.$editingCell.classList.remove('dt-cell--editing');\n        this.$editingCell = null;\n    }\n\n    getEditor(colIndex, rowIndex, value, parent) {\n        const column = this.datamanager.getColumn(colIndex);\n        const row = this.datamanager.getRow(rowIndex);\n        const data = this.datamanager.getData(rowIndex);\n        let editor = this.options.getEditor ?\n            this.options.getEditor(colIndex, rowIndex, value, parent, column, row, data) :\n            this.getDefaultEditor(parent);\n\n        if (editor === false) {\n            // explicitly returned false\n            return false;\n        }\n        if (editor === undefined) {\n            // didn't return editor, fallback to default\n            editor = this.getDefaultEditor(parent);\n        }\n\n        return editor;\n    }\n\n    getDefaultEditor(parent) {\n        const $input = $.create('input', {\n            class: 'dt-input',\n            type: 'text',\n            inside: parent\n        });\n\n        return {\n            initValue(value) {\n                $input.focus();\n                $input.value = value;\n            },\n            getValue() {\n                return $input.value;\n            },\n            setValue(value) {\n                $input.value = value;\n            }\n        };\n    }\n\n    submitEditing() {\n        let promise = Promise.resolve();\n        if (!this.$editingCell) return promise;\n\n        const $cell = this.$editingCell;\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n        const col = this.datamanager.getColumn(colIndex);\n\n        if ($cell) {\n            const editor = this.currentCellEditor;\n\n            if (editor) {\n                let valuePromise = editor.getValue();\n\n                // convert to stubbed Promise\n                if (!valuePromise.then) {\n                    valuePromise = Promise.resolve(valuePromise);\n                }\n\n                promise = valuePromise.then((value) => {\n                    const oldValue = this.getCell(colIndex, rowIndex).content;\n\n                    if (oldValue === value) return false;\n\n                    const done = editor.setValue(value, rowIndex, col);\n\n                    // update cell immediately\n                    this.updateCell(colIndex, rowIndex, value);\n                    $cell.focus();\n\n                    if (done && done.then) {\n                        // revert to oldValue if promise fails\n                        done.catch((e) => {\n                            console.log(e);\n                            this.updateCell(colIndex, rowIndex, oldValue);\n                        });\n                    }\n                    return done;\n                });\n            }\n        }\n\n        this.currentCellEditor = null;\n        return promise;\n    }\n\n    copyCellContents($cell1, $cell2) {\n        if (!$cell2 && $cell1) {\n            // copy only focusedCell\n            const {\n                colIndex,\n                rowIndex\n            } = $.data($cell1);\n            const cell = this.getCell(colIndex, rowIndex);\n            copyTextToClipboard(cell.content);\n            return 1;\n        }\n        const cells = this.getCellsInRange($cell1, $cell2);\n\n        if (!cells) return 0;\n\n        const rows = cells\n            // get cell objects\n            .map(index => this.getCell(...index))\n            // convert to array of rows\n            .reduce((acc, curr) => {\n                const rowIndex = curr.rowIndex;\n\n                acc[rowIndex] = acc[rowIndex] || [];\n                acc[rowIndex].push(curr.content);\n\n                return acc;\n            }, []);\n\n        const values = rows\n            // join values by tab\n            .map(row => row.join('\\t'))\n            // join rows by newline\n            .join('\\n');\n\n        copyTextToClipboard(values);\n\n        // return no of cells copied\n        return rows.reduce((total, row) => total + row.length, 0);\n    }\n\n    pasteContentInCell(data) {\n        if (!this.$focusedCell) return;\n\n        const matrix = data\n            .split('\\n')\n            .map(row => row.split('\\t'))\n            .filter(row => row.length && row.every(it => it));\n\n        let { colIndex, rowIndex } = $.data(this.$focusedCell);\n\n        let focusedCell = {\n            colIndex: +colIndex,\n            rowIndex: +rowIndex\n        };\n\n        matrix.forEach((row, i) => {\n            let rowIndex = i + focusedCell.rowIndex;\n            row.forEach((cell, j) => {\n                let colIndex = j + focusedCell.colIndex;\n                this.updateCell(colIndex, rowIndex, cell);\n            });\n        });\n    }\n\n    activateFilter(colIndex) {\n        this.columnmanager.toggleFilter();\n        this.columnmanager.focusFilter(colIndex);\n\n        if (!this.columnmanager.isFilterShown) {\n            // put focus back on cell\n            this.$focusedCell && this.$focusedCell.focus();\n        }\n    }\n\n    updateCell(colIndex, rowIndex, value) {\n        const cell = this.datamanager.updateCell(colIndex, rowIndex, {\n            content: value\n        });\n        this.refreshCell(cell);\n    }\n\n    refreshCell(cell) {\n        const $cell = $(this.selector(cell.colIndex, cell.rowIndex), this.bodyScrollable);\n        $cell.innerHTML = this.getCellContent(cell);\n    }\n\n    toggleTreeButton(rowIndex, flag) {\n        const colIndex = this.columnmanager.getFirstColumnIndex();\n        const $cell = this.getCell$(colIndex, rowIndex);\n        if ($cell) {\n            $cell.classList[flag ? 'remove' : 'add']('dt-cell--tree-close');\n        }\n    }\n\n    isStandardCell(colIndex) {\n        // Standard cells are in Sr. No and Checkbox column\n        return colIndex < this.columnmanager.getFirstColumnIndex();\n    }\n\n    focusCellInDirection(direction) {\n        if (!this.$focusedCell || (this.$editingCell && ['left', 'right', 'up', 'down'].includes(direction))) {\n            return false;\n        } else if (this.$editingCell && ['tab', 'shift+tab'].includes(direction)) {\n            this.deactivateEditing();\n        }\n\n        let $cell = this.$focusedCell;\n\n        if (direction === 'left' || direction === 'shift+tab') {\n            $cell = this.getLeftCell$($cell);\n        } else if (direction === 'right' || direction === 'tab') {\n            $cell = this.getRightCell$($cell);\n        } else if (direction === 'up') {\n            $cell = this.getAboveCell$($cell);\n        } else if (direction === 'down') {\n            $cell = this.getBelowCell$($cell);\n        }\n\n        if (!$cell) {\n            return false;\n        }\n\n        const {\n            colIndex\n        } = $.data($cell);\n        const column = this.columnmanager.getColumn(colIndex);\n\n        if (!column.focusable) {\n            let $prevFocusedCell = this.$focusedCell;\n            this.unfocusCell($prevFocusedCell);\n            this.$focusedCell = $cell;\n            let ret = this.focusCellInDirection(direction);\n            if (!ret) {\n                this.focusCell($prevFocusedCell);\n            }\n            return ret;\n        }\n\n        this.focusCell($cell);\n        return true;\n    }\n\n    getCell$(colIndex, rowIndex) {\n        return $(this.selector(colIndex, rowIndex), this.bodyScrollable);\n    }\n\n    getAboveCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $aboveRow = $cell.parentElement.previousElementSibling;\n        while ($aboveRow && $aboveRow.classList.contains('dt-row--hide')) {\n            $aboveRow = $aboveRow.previousElementSibling;\n        }\n\n        if (!$aboveRow) return $cell;\n        return $(`.dt-cell--col-${colIndex}`, $aboveRow);\n    }\n\n    getBelowCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $belowRow = $cell.parentElement.nextElementSibling;\n        while ($belowRow && $belowRow.classList.contains('dt-row--hide')) {\n            $belowRow = $belowRow.nextElementSibling;\n        }\n\n        if (!$belowRow) return $cell;\n        return $(`.dt-cell--col-${colIndex}`, $belowRow);\n    }\n\n    getLeftCell$($cell) {\n        return $cell.previousElementSibling;\n    }\n\n    getRightCell$($cell) {\n        return $cell.nextElementSibling;\n    }\n\n    getLeftMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getFirstColumnIndex(), rowIndex);\n    }\n\n    getRightMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getLastColumnIndex(), rowIndex);\n    }\n\n    getTopMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getFirstRowIndex());\n    }\n\n    getBottomMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getLastRowIndex());\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.instance.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getRowHeight() {\n        return $.style($('.dt-row', this.bodyScrollable), 'height');\n    }\n\n    scrollToCell($cell) {\n        if ($.inViewport($cell, this.bodyScrollable)) return false;\n\n        const {\n            rowIndex\n        } = $.data($cell);\n        this.rowmanager.scrollToRow(rowIndex);\n        return false;\n    }\n\n    getRowCountPerPage() {\n        return Math.ceil(this.instance.getViewportHeight() / this.getRowHeight());\n    }\n\n    getCellHTML(cell) {\n        const {\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter,\n            isTotalRow\n        } = cell;\n        const dataAttr = makeDataAttributeString({\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter,\n            isTotalRow\n        });\n\n        const row = this.datamanager.getRow(rowIndex);\n\n        const isBodyCell = !(isHeader || isFilter || isTotalRow);\n\n        const className = [\n            'dt-cell',\n            'dt-cell--col-' + colIndex,\n            isBodyCell ? `dt-cell--${colIndex}-${rowIndex}` : '',\n            isBodyCell ? 'dt-cell--row-' + rowIndex : '',\n            isHeader ? 'dt-cell--header' : '',\n            isHeader ? `dt-cell--header-${colIndex}` : '',\n            isFilter ? 'dt-cell--filter' : '',\n            isBodyCell && (row && row.meta.isTreeNodeClose) ? 'dt-cell--tree-close' : ''\n        ].join(' ');\n\n        return `\n            <div class=\"${className}\" ${dataAttr} tabindex=\"0\">\n                ${this.getCellContent(cell)}\n            </div>\n        `;\n    }\n\n    getCellContent(cell) {\n        const {\n            isHeader,\n            isFilter,\n            colIndex\n        } = cell;\n\n        const editable = !isHeader && cell.editable !== false;\n        const editCellHTML = editable ? this.getEditCellHTML(colIndex) : '';\n\n        const sortable = isHeader && cell.sortable !== false;\n        const sortIndicator = sortable ?\n            `<span class=\"sort-indicator\">\n                ${this.options.sortIndicator[cell.sortOrder]}\n            </span>` :\n            '';\n\n        const resizable = isHeader && cell.resizable !== false;\n        const resizeColumn = resizable ? '<span class=\"dt-cell__resize-handle\"></span>' : '';\n\n        const hasDropdown = isHeader && cell.dropdown !== false;\n        const dropdown = hasDropdown ? this.columnmanager.getDropdownHTML() : '';\n\n        const customFormatter = cell.format || (cell.column && cell.column.format) || null;\n\n        let contentHTML;\n        if (isHeader || isFilter || !customFormatter) {\n            contentHTML = cell.content;\n        } else {\n            const row = this.datamanager.getRow(cell.rowIndex);\n            const data = this.datamanager.getData(cell.rowIndex);\n            contentHTML = customFormatter(cell.content, row, cell.column, data);\n        }\n\n        cell.html = contentHTML;\n\n        if (this.options.treeView && !(isHeader || isFilter) && cell.indent !== undefined) {\n            const nextRow = this.datamanager.getRow(cell.rowIndex + 1);\n            const addToggle = nextRow && nextRow.meta.indent > cell.indent;\n            const leftPadding = 20;\n            const unit = 'px';\n\n            // Add toggle and indent in the first column\n            const firstColumnIndex = this.datamanager.getColumnIndexById('_rowIndex') + 1;\n            if (firstColumnIndex === cell.colIndex) {\n                const padding = ((cell.indent || 0)) * leftPadding;\n                const toggleHTML = addToggle ?\n                    `<span class=\"dt-tree-node__toggle\" style=\"left: ${padding - leftPadding}${unit}\">\n                        <span class=\"icon-open\">${icons.chevronDown}</span>\n                        <span class=\"icon-close\">${icons.chevronRight}</span>\n                    </span>` : '';\n                contentHTML = `<span class=\"dt-tree-node\" style=\"padding-left: ${padding}${unit}\">\n                    ${toggleHTML}\n                    <span>${contentHTML}</span>\n                </span>`;\n            }\n        }\n\n        const className = [\n            'dt-cell__content',\n            isHeader ? `dt-cell__content--header-${colIndex}` : `dt-cell__content--col-${colIndex}`\n        ].join(' ');\n\n        return `\n            <div class=\"${className}\">\n                ${contentHTML}\n                ${sortIndicator}\n                ${resizeColumn}\n                ${dropdown}\n            </div>\n            ${editCellHTML}\n        `;\n    }\n\n    getEditCellHTML(colIndex) {\n        return `<div class=\"dt-cell__edit dt-cell__edit--col-${colIndex}\"></div>`;\n    }\n\n    selector(colIndex, rowIndex) {\n        return `.dt-cell--${colIndex}-${rowIndex}`;\n    }\n}\n\nclass ColumnManager {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'header',\n            'datamanager',\n            'cellmanager',\n            'style',\n            'wrapper',\n            'rowmanager',\n            'bodyScrollable',\n            'bodyRenderer'\n        ]);\n\n        this.bindEvents();\n    }\n\n    renderHeader() {\n        this.header.innerHTML = '<div></div>';\n        this.refreshHeader();\n    }\n\n    refreshHeader() {\n        const columns = this.datamanager.getColumns();\n\n        // refresh html\n        $('div', this.header).innerHTML = this.getHeaderHTML(columns);\n\n        this.$filterRow = $('.dt-row-filter', this.header);\n        if (this.$filterRow) {\n            $.style(this.$filterRow, { display: 'none' });\n        }\n        // reset columnMap\n        this.$columnMap = [];\n        this.bindMoveColumn();\n    }\n\n    getHeaderHTML(columns) {\n        let html = this.rowmanager.getRowHTML(columns, {\n            isHeader: 1\n        });\n        if (this.options.inlineFilters) {\n            html += this.rowmanager.getRowHTML(columns, {\n                isFilter: 1\n            });\n        }\n        return html;\n    }\n\n    bindEvents() {\n        this.bindDropdown();\n        this.bindResizeColumn();\n        this.bindPerfectColumnWidth();\n        this.bindFilter();\n    }\n\n    bindDropdown() {\n        let toggleClass = '.dt-dropdown__toggle';\n        let dropdownClass = '.dt-dropdown__list';\n\n        // attach the dropdown list to container\n        this.instance.dropdownContainer.innerHTML = this.getDropdownListHTML();\n        this.$dropdownList = this.instance.dropdownContainer.firstElementChild;\n\n        $.on(this.header, 'click', toggleClass, e => {\n            this.openDropdown(e);\n        });\n\n        const deactivateDropdownOnBodyClick = (e) => {\n            const selector = [\n                toggleClass, toggleClass + ' *',\n                dropdownClass, dropdownClass + ' *'\n            ].join(',');\n            if (e.target.matches(selector)) return;\n            deactivateDropdown();\n        };\n        $.on(document.body, 'click', deactivateDropdownOnBodyClick);\n        document.addEventListener('scroll', deactivateDropdown, true);\n\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'click', deactivateDropdownOnBodyClick);\n            $.off(document, 'scroll', deactivateDropdown);\n        });\n\n        $.on(this.$dropdownList, 'click', '.dt-dropdown__list-item', (e, $item) => {\n            if (!this._dropdownActiveColIndex) return;\n            const dropdownItems = this.options.headerDropdown;\n            const { index } = $.data($item);\n            const colIndex = this._dropdownActiveColIndex;\n            let callback = dropdownItems[index].action;\n\n            callback && callback.call(this.instance, this.getColumn(colIndex));\n            this.hideDropdown();\n        });\n\n        const _this = this;\n        function deactivateDropdown(e) {\n            _this.hideDropdown();\n        }\n\n        this.hideDropdown();\n    }\n\n    openDropdown(e) {\n        if (!this._dropdownWidth) {\n            $.style(this.$dropdownList, { display: '' });\n            this._dropdownWidth = $.style(this.$dropdownList, 'width');\n        }\n        $.style(this.$dropdownList, {\n            display: '',\n            left: (e.clientX - this._dropdownWidth + 4) + 'px',\n            top: (e.clientY + 4) + 'px'\n        });\n        const $cell = $.closest('.dt-cell', e.target);\n        const { colIndex } = $.data($cell);\n        this._dropdownActiveColIndex = colIndex;\n    }\n\n    hideDropdown() {\n        $.style(this.$dropdownList, {\n            display: 'none'\n        });\n        this._dropdownActiveColIndex = null;\n    }\n\n    bindResizeColumn() {\n        let isDragging = false;\n        let $resizingCell, startWidth, startX;\n\n        $.on(this.header, 'mousedown', '.dt-cell .dt-cell__resize-handle', (e, $handle) => {\n            document.body.classList.add('dt-resize');\n            const $cell = $handle.parentNode.parentNode;\n            $resizingCell = $cell;\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            const col = this.getColumn(colIndex);\n\n            if (col && col.resizable === false) {\n                return;\n            }\n\n            isDragging = true;\n            startWidth = $.style($('.dt-cell__content', $resizingCell), 'width');\n            startX = e.pageX;\n        });\n\n        const onMouseup = (e) => {\n            document.body.classList.remove('dt-resize');\n            if (!$resizingCell) return;\n            isDragging = false;\n\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            this.setColumnWidth(colIndex);\n            this.style.setBodyStyle();\n            $resizingCell = null;\n        };\n        $.on(document.body, 'mouseup', onMouseup);\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'mouseup', onMouseup);\n        });\n\n        const onMouseMove = (e) => {\n            if (!isDragging) return;\n            let delta = e.pageX - startX;\n            if (this.options.direction === 'rtl') {\n                delta = -1 * delta;\n            }\n            const finalWidth = startWidth + delta;\n            const {\n                colIndex\n            } = $.data($resizingCell);\n\n            let columnMinWidth = this.options.minimumColumnWidth;\n            if (columnMinWidth > finalWidth) {\n                // don't resize past 30 pixels\n                return;\n            }\n            this.datamanager.updateColumn(colIndex, {\n                width: finalWidth\n            });\n            this.setColumnHeaderWidth(colIndex);\n        };\n        $.on(document.body, 'mousemove', onMouseMove);\n        this.instance.on('onDestroy', () => {\n            $.off(document.body, 'mousemove', onMouseMove);\n        });\n    }\n\n    bindPerfectColumnWidth() {\n        $.on(this.header, 'dblclick', '.dt-cell .dt-cell__resize-handle', (e, $handle) => {\n            const $cell = $handle.parentNode.parentNode;\n            const { colIndex } = $.data($cell);\n\n            let longestCell = this.bodyRenderer.visibleRows\n                .map(d => d[colIndex])\n                .reduce((acc, curr) => acc.content.length > curr.content.length ? acc : curr);\n\n            let $longestCellHTML = this.cellmanager.getCellHTML(longestCell);\n            let $div = document.createElement('div');\n            $div.innerHTML = $longestCellHTML;\n            let cellText = $div.querySelector('.dt-cell__content').textContent;\n\n            let {\n                borderLeftWidth,\n                borderRightWidth,\n                paddingLeft,\n                paddingRight\n            } = $.getStyle(this.bodyScrollable.querySelector('.dt-cell__content'));\n\n            let padding = [borderLeftWidth, borderRightWidth, paddingLeft, paddingRight]\n                .map(parseFloat)\n                .reduce((sum, val) => sum + val);\n\n            let width = $.measureTextWidth(cellText) + padding;\n            this.datamanager.updateColumn(colIndex, { width });\n            this.setColumnHeaderWidth(colIndex);\n            this.setColumnWidth(colIndex);\n        });\n    }\n\n    bindMoveColumn() {\n        if (this.options.disableReorderColumn) return;\n\n        const $parent = $('.dt-row', this.header);\n\n        this.sortable = Sortable.create($parent, {\n            onEnd: (e) => {\n                const {\n                    oldIndex,\n                    newIndex\n                } = e;\n                const $draggedCell = e.item;\n                const {\n                    colIndex\n                } = $.data($draggedCell);\n                if (+colIndex === newIndex) return;\n\n                this.switchColumn(oldIndex, newIndex);\n            },\n            preventOnFilter: false,\n            filter: '.dt-cell__resize-handle, .dt-dropdown',\n            chosenClass: 'dt-cell--dragging',\n            animation: 150\n        });\n    }\n\n    sortColumn(colIndex, nextSortOrder) {\n        this.instance.freeze();\n        this.sortRows(colIndex, nextSortOrder)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onSortColumn', this.getColumn(colIndex));\n            });\n    }\n\n    removeColumn(colIndex) {\n        const removedCol = this.getColumn(colIndex);\n        this.instance.freeze();\n        this.datamanager.removeColumn(colIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onRemoveColumn', removedCol);\n            });\n    }\n\n    switchColumn(oldIndex, newIndex) {\n        this.instance.freeze();\n        this.datamanager.switchColumn(oldIndex, newIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => {\n                this.setColumnWidth(oldIndex);\n                this.setColumnWidth(newIndex);\n                this.instance.unfreeze();\n            })\n            .then(() => {\n                this.fireEvent('onSwitchColumn',\n                    this.getColumn(oldIndex), this.getColumn(newIndex)\n                );\n            });\n    }\n\n    toggleFilter(flag) {\n        if (!this.options.inlineFilters) return;\n\n        let showFilter;\n        if (flag === undefined) {\n            showFilter = !this.isFilterShown;\n        } else {\n            showFilter = flag;\n        }\n\n        if (showFilter) {\n            $.style(this.$filterRow, { display: '' });\n        } else {\n            $.style(this.$filterRow, { display: 'none' });\n        }\n\n        this.isFilterShown = showFilter;\n        this.style.setBodyStyle();\n    }\n\n    focusFilter(colIndex) {\n        if (!this.isFilterShown) return;\n\n        const $filterInput = $(`.dt-cell--col-${colIndex} .dt-filter`, this.$filterRow);\n        $filterInput.focus();\n    }\n\n    bindFilter() {\n        if (!this.options.inlineFilters) return;\n        const handler = e => {\n            this.applyFilter(this.getAppliedFilters());\n        };\n        $.on(this.header, 'keydown', '.dt-filter', debounce$1(handler, 300));\n    }\n\n    applyFilter(filters) {\n        this.datamanager.filterRows(filters)\n            .then(({\n                rowsToShow\n            }) => {\n                this.rowmanager.showRows(rowsToShow);\n            });\n    }\n\n    getAppliedFilters() {\n        const filters = {};\n        $.each('.dt-filter', this.header).map((input) => {\n            const value = input.value;\n            if (value) {\n                filters[input.dataset.colIndex] = value;\n            }\n        });\n        return filters;\n    }\n\n    applyDefaultSortOrder() {\n        // sort rows if any 1 column has a default sortOrder set\n        const columnsToSort = this.getColumns().filter(col => col.sortOrder !== 'none');\n\n        if (columnsToSort.length === 1) {\n            const column = columnsToSort[0];\n            this.sortColumn(column.colIndex, column.sortOrder);\n        }\n    }\n\n    sortRows(colIndex, sortOrder) {\n        return this.datamanager.sortRows(colIndex, sortOrder);\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    setColumnWidth(colIndex, width) {\n        colIndex = +colIndex;\n\n        let columnWidth = width || this.getColumn(colIndex).width;\n\n        const selector = [\n            `.dt-cell__content--col-${colIndex}`,\n            `.dt-cell__edit--col-${colIndex}`\n        ].join(', ');\n\n        const styles = {\n            width: columnWidth + 'px'\n        };\n\n        this.style.setStyle(selector, styles);\n    }\n\n    setColumnHeaderWidth(colIndex) {\n        colIndex = +colIndex;\n        this.$columnMap = this.$columnMap || [];\n        const selector = `.dt-cell__content--header-${colIndex}`;\n        const {\n            width\n        } = this.getColumn(colIndex);\n\n        let $column = this.$columnMap[colIndex];\n        if (!$column) {\n            $column = this.header.querySelector(selector);\n            this.$columnMap[colIndex] = $column;\n        }\n\n        $column.style.width = width + 'px';\n    }\n\n    getColumnMinWidth(colIndex) {\n        colIndex = +colIndex;\n        return this.getColumn(colIndex).minWidth || 24;\n    }\n\n    getFirstColumnIndex() {\n        return this.datamanager.getColumnIndexById('_rowIndex') + 1;\n    }\n\n    getHeaderCell$(colIndex) {\n        return $(`.dt-cell--header-${colIndex}`, this.header);\n    }\n\n    getLastColumnIndex() {\n        return this.datamanager.getColumnCount() - 1;\n    }\n\n    getDropdownHTML() {\n        const { dropdownButton } = this.options;\n\n        return `\n            <div class=\"dt-dropdown\">\n                <div class=\"dt-dropdown__toggle\">${dropdownButton}</div>\n            </div>\n      `;\n    }\n\n    getDropdownListHTML() {\n        const { headerDropdown: dropdownItems } = this.options;\n\n        return `\n            <div class=\"dt-dropdown__list\">\n            ${dropdownItems.map((d, i) => `\n                <div class=\"dt-dropdown__list-item\" data-index=\"${i}\">${d.label}</div>\n            `).join('')}\n            </div>\n        `;\n    }\n}\n\nclass RowManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'wrapper',\n            'bodyScrollable',\n            'bodyRenderer',\n            'style'\n        ]);\n\n        this.bindEvents();\n        this.refreshRows = nextTick(this.refreshRows, this);\n    }\n\n    get datamanager() {\n        return this.instance.datamanager;\n    }\n\n    get cellmanager() {\n        return this.instance.cellmanager;\n    }\n\n    bindEvents() {\n        this.bindCheckbox();\n    }\n\n    bindCheckbox() {\n        if (!this.options.checkboxColumn) return;\n\n        // map of checked rows\n        this.checkMap = [];\n\n        $.on(this.wrapper, 'click', '.dt-cell--col-0 [type=\"checkbox\"]', (e, $checkbox) => {\n            const $cell = $checkbox.closest('.dt-cell');\n            const {\n                rowIndex,\n                isHeader\n            } = $.data($cell);\n            const checked = $checkbox.checked;\n\n            if (isHeader) {\n                this.checkAll(checked);\n            } else {\n                this.checkRow(rowIndex, checked);\n            }\n        });\n    }\n\n    refreshRows() {\n        this.instance.renderBody();\n        this.instance.setDimensions();\n    }\n\n    refreshRow(row, rowIndex) {\n        const _row = this.datamanager.updateRow(row, rowIndex);\n\n        _row.forEach(cell => {\n            this.cellmanager.refreshCell(cell);\n        });\n    }\n\n    getCheckedRows() {\n        if (!this.checkMap) {\n            return [];\n        }\n\n        let out = [];\n        for (let rowIndex in this.checkMap) {\n            const checked = this.checkMap[rowIndex];\n            if (checked === 1) {\n                out.push(rowIndex);\n            }\n        }\n\n        return out;\n    }\n\n    highlightCheckedRows() {\n        this.getCheckedRows()\n            .map(rowIndex => this.checkRow(rowIndex, true));\n    }\n\n    checkRow(rowIndex, toggle) {\n        const value = toggle ? 1 : 0;\n        const selector = rowIndex => `.dt-cell--0-${rowIndex} [type=\"checkbox\"]`;\n        // update internal map\n        this.checkMap[rowIndex] = value;\n        // set checkbox value explicitly\n        $.each(selector(rowIndex), this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight row\n        this.highlightRow(rowIndex, toggle);\n        this.showCheckStatus();\n        this.fireEvent('onCheckRow', this.datamanager.getRow(rowIndex));\n    }\n\n    checkAll(toggle) {\n        const value = toggle ? 1 : 0;\n\n        // update internal map\n        if (toggle) {\n            this.checkMap = Array.from(Array(this.getTotalRows())).map(c => value);\n        } else {\n            this.checkMap = [];\n        }\n        // set checkbox value\n        $.each('.dt-cell--col-0 [type=\"checkbox\"]', this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight all\n        this.highlightAll(toggle);\n        this.showCheckStatus();\n        this.fireEvent('onCheckRow');\n    }\n\n    showCheckStatus() {\n        if (!this.options.checkedRowStatus) return;\n        const checkedRows = this.getCheckedRows();\n        const count = checkedRows.length;\n        if (count > 0) {\n            let message = this.instance.translate('{count} rows selected', {\n                count: count\n            });\n            this.bodyRenderer.showToastMessage(message);\n        } else {\n            this.bodyRenderer.clearToastMessage();\n        }\n    }\n\n    highlightRow(rowIndex, toggle = true) {\n        const $row = this.getRow$(rowIndex);\n        if (!$row) return;\n\n        if (!toggle && this.bodyScrollable.classList.contains('dt-scrollable--highlight-all')) {\n            $row.classList.add('dt-row--unhighlight');\n            return;\n        }\n\n        if (toggle && $row.classList.contains('dt-row--unhighlight')) {\n            $row.classList.remove('dt-row--unhighlight');\n        }\n\n        this._highlightedRows = this._highlightedRows || {};\n\n        if (toggle) {\n            $row.classList.add('dt-row--highlight');\n            this._highlightedRows[rowIndex] = $row;\n        } else {\n            $row.classList.remove('dt-row--highlight');\n            delete this._highlightedRows[rowIndex];\n        }\n    }\n\n    highlightAll(toggle = true) {\n        if (toggle) {\n            this.bodyScrollable.classList.add('dt-scrollable--highlight-all');\n        } else {\n            this.bodyScrollable.classList.remove('dt-scrollable--highlight-all');\n            for (const rowIndex in this._highlightedRows) {\n                const $row = this._highlightedRows[rowIndex];\n                $row.classList.remove('dt-row--highlight');\n            }\n            this._highlightedRows = {};\n        }\n    }\n\n    showRows(rowIndices) {\n        rowIndices = ensureArray(rowIndices);\n        const rows = rowIndices.map(rowIndex => this.datamanager.getRow(rowIndex));\n        this.bodyRenderer.renderRows(rows);\n    }\n\n    showAllRows() {\n        const rowIndices = this.datamanager.getAllRowIndices();\n        this.showRows(rowIndices);\n    }\n\n    getChildrenToShowForNode(rowIndex) {\n        const row = this.datamanager.getRow(rowIndex);\n        row.meta.isTreeNodeClose = false;\n\n        return this.datamanager.getImmediateChildren(rowIndex);\n    }\n\n    openSingleNode(rowIndex) {\n        const childrenToShow = this.getChildrenToShowForNode(rowIndex);\n        const visibleRowIndices = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    getChildrenToHideForNode(rowIndex) {\n        const row = this.datamanager.getRow(rowIndex);\n        row.meta.isTreeNodeClose = true;\n\n        const rowsToHide = this.datamanager.getChildren(rowIndex);\n        rowsToHide.forEach(rowIndex => {\n            const row = this.datamanager.getRow(rowIndex);\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = true;\n            }\n        });\n\n        return rowsToHide;\n    }\n\n    closeSingleNode(rowIndex) {\n        const rowsToHide = this.getChildrenToHideForNode(rowIndex);\n        const visibleRows = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = visibleRows\n            .filter(rowIndex => !rowsToHide.includes(rowIndex))\n            .sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    expandAllNodes() {\n        let rows = this.datamanager.getRows();\n        let rootNodes = rows.filter(row => !row.meta.isLeaf);\n\n        const childrenToShow = rootNodes.map(row => this.getChildrenToShowForNode(row.meta.rowIndex)).flat();\n        const visibleRowIndices = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    collapseAllNodes() {\n        let rows = this.datamanager.getRows();\n        let rootNodes = rows.filter(row => row.meta.indent === 0);\n\n        const rowsToHide = rootNodes.map(row => this.getChildrenToHideForNode(row.meta.rowIndex)).flat();\n        const visibleRows = this.bodyRenderer.visibleRowIndices;\n        const rowsToShow = visibleRows\n            .filter(rowIndex => !rowsToHide.includes(rowIndex))\n            .sort(numberSortAsc);\n\n        this.showRows(rowsToShow);\n    }\n\n    setTreeDepth(depth) {\n        let rows = this.datamanager.getRows();\n\n        const rowsToOpen = rows.filter(row => row.meta.indent < depth);\n        const rowsToClose = rows.filter(row => row.meta.indent >= depth);\n        const rowsToHide = rowsToClose.filter(row => row.meta.indent > depth);\n\n        rowsToClose.forEach(row => {\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = true;\n            }\n        });\n        rowsToOpen.forEach(row => {\n            if (!row.meta.isLeaf) {\n                row.meta.isTreeNodeClose = false;\n            }\n        });\n\n        const rowsToShow = rows\n            .filter(row => !rowsToHide.includes(row))\n            .map(row => row.meta.rowIndex)\n            .sort(numberSortAsc);\n        this.showRows(rowsToShow);\n    }\n\n    getRow$(rowIndex) {\n        return $(this.selector(rowIndex), this.bodyScrollable);\n    }\n\n    getTotalRows() {\n        return this.datamanager.getRowCount();\n    }\n\n    getFirstRowIndex() {\n        return 0;\n    }\n\n    getLastRowIndex() {\n        return this.datamanager.getRowCount() - 1;\n    }\n\n    scrollToRow(rowIndex) {\n        rowIndex = +rowIndex;\n        this._lastScrollTo = this._lastScrollTo || 0;\n        const $row = this.getRow$(rowIndex);\n        if ($.inViewport($row, this.bodyScrollable)) return;\n\n        const {\n            height\n        } = $row.getBoundingClientRect();\n        const {\n            top,\n            bottom\n        } = this.bodyScrollable.getBoundingClientRect();\n        const rowsInView = Math.floor((bottom - top) / height);\n\n        let offset = 0;\n        if (rowIndex > this._lastScrollTo) {\n            offset = height * ((rowIndex + 1) - rowsInView);\n        } else {\n            offset = height * ((rowIndex + 1) - 1);\n        }\n\n        this._lastScrollTo = rowIndex;\n        $.scrollTop(this.bodyScrollable, offset);\n    }\n\n    getRowHTML(row, props) {\n        const dataAttr = makeDataAttributeString(props);\n        let rowIdentifier = props.rowIndex;\n\n        if (props.isFilter) {\n            row = row.map(cell => (Object.assign({}, cell, {\n                content: this.getFilterInput({\n                    colIndex: cell.colIndex,\n                    name: cell.name\n                }),\n                isFilter: 1,\n                isHeader: undefined,\n                editable: false\n            })));\n\n            rowIdentifier = 'filter';\n        }\n\n        if (props.isHeader) {\n            rowIdentifier = 'header';\n        }\n\n        return `\n            <div class=\"dt-row dt-row-${rowIdentifier}\" ${dataAttr}>\n                ${row.map(cell => this.cellmanager.getCellHTML(cell)).join('')}\n            </div>\n        `;\n    }\n\n    getFilterInput(props) {\n        let title = `title=\"Filter based on ${props.name || 'Index'}\"`;\n        const dataAttr = makeDataAttributeString(props);\n        return `<input class=\"dt-filter dt-input\" type=\"text\" ${dataAttr} tabindex=\"1\" \n            ${props.colIndex === 0 ? 'disabled' : title} />`;\n    }\n\n    selector(rowIndex) {\n        return `.dt-row-${rowIndex}`;\n    }\n}\n\nvar hyperlist = createCommonjsModule(function (module, exports) {\n(function(f){{module.exports=f();}})(function(){return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof commonjsRequire==\"function\"&&commonjsRequire;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r);}return n[o].exports}var i=typeof commonjsRequire==\"function\"&&commonjsRequire;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\n// Default configuration.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  width: '100%',\n  height: '100%'\n};\n\n// Check for valid number.\nvar isNumber = function isNumber(input) {\n  return Number(input) === Number(input);\n};\n\n/**\n * Creates a HyperList instance that virtually scrolls very large amounts of\n * data effortlessly.\n */\n\nvar HyperList = function () {\n  _createClass(HyperList, null, [{\n    key: 'create',\n    value: function create(element, userProvidedConfig) {\n      return new HyperList(element, userProvidedConfig);\n    }\n\n    /**\n     * Merge given css style on an element\n     * @param {DOMElement} element\n     * @param {Object} style\n     */\n\n  }, {\n    key: 'mergeStyle',\n    value: function mergeStyle(element, style) {\n      for (var i in style) {\n        if (element.style[i] !== style[i]) {\n          element.style[i] = style[i];\n        }\n      }\n    }\n  }, {\n    key: 'getMaxBrowserHeight',\n    value: function getMaxBrowserHeight() {\n      // Create two elements, the wrapper is `1px` tall and is transparent and\n      // positioned at the top of the page. Inside that is an element that gets\n      // set to 1 billion pixels. Then reads the max height the browser can\n      // calculate.\n      var wrapper = document.createElement('div');\n      var fixture = document.createElement('div');\n\n      // As said above, these values get set to put the fixture elements into the\n      // right visual state.\n      HyperList.mergeStyle(wrapper, { position: 'absolute', height: '1px', opacity: 0 });\n      HyperList.mergeStyle(fixture, { height: '1e7px' });\n\n      // Add the fixture into the wrapper element.\n      wrapper.appendChild(fixture);\n\n      // Apply to the page, the values won't kick in unless this is attached.\n      document.body.appendChild(wrapper);\n\n      // Get the maximum element height in pixels.\n      var maxElementHeight = fixture.offsetHeight;\n\n      // Remove the element immediately after reading the value.\n      document.body.removeChild(wrapper);\n\n      return maxElementHeight;\n    }\n  }]);\n\n  function HyperList(element, userProvidedConfig) {\n    var _this = this;\n\n    _classCallCheck(this, HyperList);\n\n    this._config = {};\n    this._lastRepaint = null;\n    this._maxElementHeight = HyperList.getMaxBrowserHeight();\n\n    this.refresh(element, userProvidedConfig);\n\n    var config = this._config;\n\n    // Create internal render loop.\n    var render = function render() {\n      var scrollTop = _this._getScrollPosition();\n      var lastRepaint = _this._lastRepaint;\n\n      _this._renderAnimationFrame = window.requestAnimationFrame(render);\n\n      if (scrollTop === lastRepaint) {\n        return;\n      }\n\n      if (!lastRepaint || Math.abs(scrollTop - lastRepaint) > _this._averageHeight) {\n        var rendered = _this._renderChunk();\n\n        _this._lastRepaint = scrollTop;\n\n        if (rendered !== false && typeof config.afterRender === 'function') {\n          config.afterRender();\n        }\n      }\n    };\n\n    render();\n  }\n\n  _createClass(HyperList, [{\n    key: 'destroy',\n    value: function destroy() {\n      window.cancelAnimationFrame(this._renderAnimationFrame);\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh(element, userProvidedConfig) {\n      var _this2 = this;\n\n      Object.assign(this._config, defaultConfig, userProvidedConfig);\n\n      if (!element || element.nodeType !== 1) {\n        throw new Error('HyperList requires a valid DOM Node container');\n      }\n\n      this._element = element;\n\n      var config = this._config;\n\n      var scroller = this._scroller || config.scroller || document.createElement(config.scrollerTagName || 'tr');\n\n      // Default configuration option `useFragment` to `true`.\n      if (typeof config.useFragment !== 'boolean') {\n        this._config.useFragment = true;\n      }\n\n      if (!config.generate) {\n        throw new Error('Missing required `generate` function');\n      }\n\n      if (!isNumber(config.total)) {\n        throw new Error('Invalid required `total` value, expected number');\n      }\n\n      if (!Array.isArray(config.itemHeight) && !isNumber(config.itemHeight)) {\n        throw new Error('\\n        Invalid required `itemHeight` value, expected number or array\\n      '.trim());\n      } else if (isNumber(config.itemHeight)) {\n        this._itemHeights = Array(config.total).fill(config.itemHeight);\n      } else {\n        this._itemHeights = config.itemHeight;\n      }\n\n      // Width and height should be coerced to string representations. Either in\n      // `%` or `px`.\n      Object.keys(defaultConfig).filter(function (prop) {\n        return prop in config;\n      }).forEach(function (prop) {\n        var value = config[prop];\n        var isValueNumber = isNumber(value);\n        var isValuePercent = isValueNumber ? false : value.slice(-1) === '%';\n\n        if (value && typeof value !== 'string' && typeof value !== 'number') {\n          var msg = 'Invalid optional `' + prop + '`, expected string or number';\n          throw new Error(msg);\n        } else if (isValueNumber) {\n          config[prop] = value + 'px';\n        }\n\n        if (prop !== 'height') {\n          return;\n        }\n\n        // Compute the containerHeight as number\n        var numberValue = isValueNumber ? value : parseInt(value.replace(/px|%/, ''), 10);\n\n        if (isValuePercent) {\n          _this2._containerHeight = window.innerHeight * numberValue / 100;\n        } else {\n          _this2._containerHeight = isNumber(value) ? value : numberValue;\n        }\n      });\n\n      // Decorate the container element with styles that will match\n      // the user supplied configuration.\n      var elementStyle = {\n        width: '' + config.width,\n        height: '' + config.height,\n        overflow: 'auto',\n        position: 'relative'\n      };\n\n      HyperList.mergeStyle(element, elementStyle);\n\n      var scrollerHeight = config.itemHeight * config.total;\n      var maxElementHeight = this._maxElementHeight;\n\n      if (scrollerHeight > maxElementHeight) {\n        console.warn(['HyperList: The maximum element height', maxElementHeight + 'px has', 'been exceeded; please reduce your item height.'].join(' '));\n      }\n\n      var scrollerStyle = {\n        opacity: '0',\n        position: 'absolute',\n        width: '1px',\n        height: scrollerHeight + 'px'\n      };\n\n      HyperList.mergeStyle(scroller, scrollerStyle);\n\n      // Only append the scroller element once.\n      if (!this._scroller) {\n        element.appendChild(scroller);\n      }\n\n      // Set the scroller instance.\n      this._scroller = scroller;\n      this._scrollHeight = this._computeScrollHeight();\n\n      // Reuse the item positions if refreshed, otherwise set to empty array.\n      this._itemPositions = this._itemPositions || Array(config.total).fill(0);\n\n      // Each index in the array should represent the position in the DOM.\n      this._computePositions(0);\n\n      // Render after refreshing. Force render if we're calling refresh manually.\n      this._renderChunk(this._lastRepaint !== null);\n\n      if (typeof config.afterRender === 'function') {\n        config.afterRender();\n      }\n    }\n  }, {\n    key: '_getRow',\n    value: function _getRow(i) {\n      var config = this._config;\n      var item = config.generate(i);\n      var height = item.height;\n\n      if (height !== undefined && isNumber(height)) {\n        item = item.element;\n\n        // The height isn't the same as predicted, compute positions again\n        if (height !== this._itemHeights) {\n          this._itemHeights[i] = height;\n          this._computePositions(i);\n          this._scrollHeight = this._computeScrollHeight(i);\n        }\n      } else {\n        height = this._itemHeights[i];\n      }\n\n      if (!item || item.nodeType !== 1) {\n        throw new Error('Generator did not return a DOM Node for index: ' + i);\n      }\n\n      var oldClass = item.getAttribute('class') || '';\n      item.setAttribute('class', oldClass + ' ' + (config.rowClassName || 'vrow'));\n\n      var top = this._itemPositions[i];\n\n      HyperList.mergeStyle(item, {\n        position: 'absolute',\n        top: top + 'px'\n      });\n\n      return item;\n    }\n  }, {\n    key: '_getScrollPosition',\n    value: function _getScrollPosition() {\n      var config = this._config;\n\n      if (typeof config.overrideScrollPosition === 'function') {\n        return config.overrideScrollPosition();\n      }\n\n      return this._element.scrollTop;\n    }\n  }, {\n    key: '_renderChunk',\n    value: function _renderChunk(force) {\n      var config = this._config;\n      var element = this._element;\n      var scrollTop = this._getScrollPosition();\n      var total = config.total;\n\n      var from = config.reverse ? this._getReverseFrom(scrollTop) : this._getFrom(scrollTop) - 1;\n\n      if (from < 0 || from - this._screenItemsLen < 0) {\n        from = 0;\n      }\n\n      if (!force && this._lastFrom === from) {\n        return false;\n      }\n\n      this._lastFrom = from;\n\n      var to = from + this._cachedItemsLen;\n\n      if (to > total || to + this._cachedItemsLen > total) {\n        to = total;\n      }\n\n      // Append all the new rows in a document fragment that we will later append\n      // to the parent node\n      var fragment = config.useFragment ? document.createDocumentFragment() : []\n      // Sometimes you'll pass fake elements to this tool and Fragments require\n      // real elements.\n\n\n      // The element that forces the container to scroll.\n      ;var scroller = this._scroller;\n\n      // Keep the scroller in the list of children.\n      fragment[config.useFragment ? 'appendChild' : 'push'](scroller);\n\n      for (var i = from; i < to; i++) {\n        var row = this._getRow(i);\n\n        fragment[config.useFragment ? 'appendChild' : 'push'](row);\n      }\n\n      if (config.applyPatch) {\n        return config.applyPatch(element, fragment);\n      }\n\n      element.innerHTML = '';\n      element.appendChild(fragment);\n    }\n  }, {\n    key: '_computePositions',\n    value: function _computePositions() {\n      var from = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];\n\n      var config = this._config;\n      var total = config.total;\n      var reverse = config.reverse;\n\n      if (from < 1 && !reverse) {\n        from = 1;\n      }\n\n      for (var i = from; i < total; i++) {\n        if (reverse) {\n          if (i === 0) {\n            this._itemPositions[0] = this._scrollHeight - this._itemHeights[0];\n          } else {\n            this._itemPositions[i] = this._itemPositions[i - 1] - this._itemHeights[i];\n          }\n        } else {\n          this._itemPositions[i] = this._itemHeights[i - 1] + this._itemPositions[i - 1];\n        }\n      }\n    }\n  }, {\n    key: '_computeScrollHeight',\n    value: function _computeScrollHeight() {\n      var _this3 = this;\n\n      var config = this._config;\n      var total = config.total;\n      var scrollHeight = this._itemHeights.reduce(function (a, b) {\n        return a + b;\n      }, 0);\n\n      HyperList.mergeStyle(this._scroller, {\n        opacity: 0,\n        position: 'absolute',\n        width: '1px',\n        height: scrollHeight + 'px'\n      });\n\n      // Calculate the height median\n      var sortedItemHeights = this._itemHeights.slice(0).sort(function (a, b) {\n        return a - b;\n      });\n      var middle = Math.floor(total / 2);\n      var averageHeight = total % 2 === 0 ? (sortedItemHeights[middle] + sortedItemHeights[middle - 1]) / 2 : sortedItemHeights[middle];\n\n      var containerHeight = this._element.clientHeight ? this._element.clientHeight : this._containerHeight;\n      this._screenItemsLen = Math.ceil(containerHeight / averageHeight);\n      this._containerHeight = containerHeight;\n\n      // Cache 3 times the number of items that fit in the container viewport.\n      this._cachedItemsLen = Math.max(this._cachedItemsLen || 0, this._screenItemsLen * 3);\n      this._averageHeight = averageHeight;\n\n      if (config.reverse) {\n        window.requestAnimationFrame(function () {\n          _this3._element.scrollTop = scrollHeight;\n        });\n      }\n\n      return scrollHeight;\n    }\n  }, {\n    key: '_getFrom',\n    value: function _getFrom(scrollTop) {\n      var i = 0;\n\n      while (this._itemPositions[i] < scrollTop) {\n        i++;\n      }\n\n      return i;\n    }\n  }, {\n    key: '_getReverseFrom',\n    value: function _getReverseFrom(scrollTop) {\n      var i = this._config.total - 1;\n\n      while (i > 0 && this._itemPositions[i] < scrollTop + this._containerHeight) {\n        i--;\n      }\n\n      return i;\n    }\n  }]);\n\n  return HyperList;\n}();\n\nexports.default = HyperList;\nmodule.exports = exports['default'];\n\n},{}]},{},[1])(1)\n});\n});\n\nvar HyperList = unwrapExports(hyperlist);\n\nclass BodyRenderer {\n    constructor(instance) {\n        this.instance = instance;\n        this.options = instance.options;\n        this.datamanager = instance.datamanager;\n        this.rowmanager = instance.rowmanager;\n        this.cellmanager = instance.cellmanager;\n        this.bodyScrollable = instance.bodyScrollable;\n        this.footer = this.instance.footer;\n        this.log = instance.log;\n    }\n\n    renderRows(rows) {\n        this.visibleRows = rows;\n        this.visibleRowIndices = rows.map(row => row.meta.rowIndex);\n\n        if (rows.length === 0) {\n            this.bodyScrollable.innerHTML = this.getNoDataHTML();\n            return;\n        }\n\n        const rowViewOrder = this.datamanager.rowViewOrder.map(index => {\n            if (this.visibleRowIndices.includes(index)) {\n                return index;\n            }\n            return null;\n        }).filter(index => index !== null);\n\n        const computedStyle = getComputedStyle(this.bodyScrollable);\n\n        let config = {\n            width: computedStyle.width,\n            height: computedStyle.height,\n            itemHeight: this.options.cellHeight,\n            total: rows.length,\n            generate: (index) => {\n                const el = document.createElement('div');\n                const rowIndex = rowViewOrder[index];\n                const row = this.datamanager.getRow(rowIndex);\n                const rowHTML = this.rowmanager.getRowHTML(row, row.meta);\n                el.innerHTML = rowHTML;\n                return el.children[0];\n            },\n            afterRender: () => {\n                this.restoreState();\n            }\n        };\n\n        if (!this.hyperlist) {\n            this.hyperlist = new HyperList(this.bodyScrollable, config);\n        } else {\n            this.hyperlist.refresh(this.bodyScrollable, config);\n        }\n\n        this.renderFooter();\n    }\n\n    render() {\n        const rows = this.datamanager.getRowsForView();\n        this.renderRows(rows);\n        // setDimensions requires atleast 1 row to exist in dom\n        this.instance.setDimensions();\n    }\n\n    renderFooter() {\n        if (!this.options.showTotalRow) return;\n\n        const totalRow = this.getTotalRow();\n        let html = this.rowmanager.getRowHTML(totalRow, { isTotalRow: 1, rowIndex: 'totalRow' });\n\n        this.footer.innerHTML = html;\n    }\n\n    getTotalRow() {\n        const columns = this.datamanager.getColumns();\n        const totalRowTemplate = columns.map(col => {\n            let content = null;\n            if (['_rowIndex', '_checkbox'].includes(col.id)) {\n                content = '';\n            }\n            return {\n                content,\n                isTotalRow: 1,\n                colIndex: col.colIndex,\n                column: col\n            };\n        });\n\n        const totalRow = totalRowTemplate.map((cell, i) => {\n            if (cell.content === '') return cell;\n\n            if (this.options.hooks.columnTotal) {\n                const columnValues = this.visibleRows.map(row => row[i].content);\n                const result = this.options.hooks.columnTotal.call(this.instance, columnValues, cell);\n                if (result != null) {\n                    cell.content = result;\n                    return cell;\n                }\n            }\n\n            cell.content = this.visibleRows.reduce((acc, prevRow) => {\n                const prevCell = prevRow[i];\n                if (typeof prevCell.content === 'number') {\n                    if (acc == null) acc = 0;\n                    return acc + prevCell.content;\n                }\n                return acc;\n            }, cell.content);\n\n            return cell;\n        });\n\n        return totalRow;\n    }\n\n    restoreState() {\n        this.rowmanager.highlightCheckedRows();\n        this.cellmanager.selectAreaOnClusterChanged();\n        this.cellmanager.focusCellOnClusterChanged();\n    }\n\n    showToastMessage(message, hideAfter) {\n        this.instance.toastMessage.innerHTML = this.getToastMessageHTML(message);\n\n        if (hideAfter) {\n            setTimeout(() => {\n                this.clearToastMessage();\n            }, hideAfter * 1000);\n        }\n    }\n\n    clearToastMessage() {\n        this.instance.toastMessage.innerHTML = '';\n    }\n\n    getNoDataHTML() {\n        return `<div class=\"dt-scrollable__no-data\">${this.options.noDataMessage}</div>`;\n    }\n\n    getToastMessageHTML(message) {\n        return `<span class=\"dt-toast__message\">${message}</span>`;\n    }\n}\n\nclass Style {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options', 'datamanager', 'columnmanager',\n            'header', 'footer', 'bodyScrollable', 'datatableWrapper',\n            'getColumn', 'bodyRenderer'\n        ]);\n\n        this.scopeClass = 'dt-instance-' + instance.constructor.instances;\n        instance.datatableWrapper.classList.add(this.scopeClass);\n\n        const styleEl = document.createElement('style');\n        instance.wrapper.insertBefore(styleEl, instance.datatableWrapper);\n        this.styleEl = styleEl;\n\n        this.bindResizeWindow();\n        this.bindScrollHeader();\n    }\n\n    get stylesheet() {\n        return this.styleEl.sheet;\n    }\n\n    bindResizeWindow() {\n        this.onWindowResize = this.onWindowResize.bind(this);\n        this.onWindowResize = throttle$1(this.onWindowResize, 300);\n\n        if (this.options.layout === 'fluid') {\n            $.on(window, 'resize', this.onWindowResize);\n        }\n    }\n\n    bindScrollHeader() {\n        this._settingHeaderPosition = false;\n\n        $.on(this.bodyScrollable, 'scroll', (e) => {\n            if (this._settingHeaderPosition) return;\n\n            this._settingHeaderPosition = true;\n\n            requestAnimationFrame(() => {\n                const left = -e.target.scrollLeft;\n\n                $.style(this.header, {\n                    transform: `translateX(${left}px)`\n                });\n                $.style(this.footer, {\n                    transform: `translateX(${left}px)`\n                });\n                this._settingHeaderPosition = false;\n            });\n        });\n    }\n\n    onWindowResize() {\n        this.distributeRemainingWidth();\n        this.refreshColumnWidth();\n        this.setBodyStyle();\n    }\n\n    destroy() {\n        this.styleEl.remove();\n        $.off(window, 'resize', this.onWindowResize);\n    }\n\n    setStyle(selector, styleObject) {\n        if (selector.includes(',')) {\n            selector.split(',')\n                .map(s => s.trim())\n                .forEach(selector => {\n                    this.setStyle(selector, styleObject);\n                });\n            return;\n        }\n\n        selector = selector.trim();\n        if (!selector) return;\n\n        this._styleRulesMap = this._styleRulesMap || {};\n        const prefixedSelector = this._getPrefixedSelector(selector);\n\n        if (this._styleRulesMap[prefixedSelector]) {\n            this.removeStyle(selector);\n\n            // merge with old styleobject\n            styleObject = Object.assign({}, this._styleRulesMap[prefixedSelector], styleObject);\n        }\n\n        const styleString = this._getRuleString(styleObject);\n        const ruleString = `${prefixedSelector} { ${styleString} }`;\n\n        this._styleRulesMap[prefixedSelector] = styleObject;\n        this.stylesheet.insertRule(ruleString);\n    }\n\n    removeStyle(selector) {\n        if (selector.includes(',')) {\n            selector.split(',')\n                .map(s => s.trim())\n                .forEach(selector => {\n                    this.removeStyle(selector);\n                });\n            return;\n        }\n\n        selector = selector.trim();\n        if (!selector) return;\n\n        // find and remove\n        const prefixedSelector = this._getPrefixedSelector(selector);\n        const index = Array.from(this.stylesheet.cssRules)\n            .findIndex(rule => rule.selectorText === prefixedSelector);\n\n        if (index === -1) return;\n        this.stylesheet.deleteRule(index);\n    }\n\n    _getPrefixedSelector(selector) {\n        return `.${this.scopeClass} ${selector}`;\n    }\n\n    _getRuleString(styleObject) {\n        return Object.keys(styleObject)\n            .map(prop => {\n                let dashed = prop;\n                if (!prop.includes('-')) {\n                    dashed = camelCaseToDash(prop);\n                }\n                return `${dashed}:${styleObject[prop]};`;\n            })\n            .join('');\n    }\n\n    setDimensions() {\n        this.setCellHeight();\n        this.setupMinWidth();\n        this.setupNaturalColumnWidth();\n        this.setupColumnWidth();\n        this.distributeRemainingWidth();\n        this.setColumnStyle();\n        this.setBodyStyle();\n    }\n\n    setCellHeight() {\n        this.setStyle('.dt-cell', {\n            height: this.options.cellHeight + 'px'\n        });\n    }\n\n    setupMinWidth() {\n        $.each('.dt-cell--header', this.header).map(col => {\n            const { colIndex } = $.data(col);\n            const column = this.getColumn(colIndex);\n\n            if (!column.minWidth) {\n                const width = $.style($('.dt-cell__content', col), 'width');\n                // only set this once\n                column.minWidth = width;\n            }\n        });\n    }\n\n    setupNaturalColumnWidth() {\n        if (!$('.dt-row')) return;\n\n        $.each('.dt-row-header .dt-cell', this.header).map($headerCell => {\n            const { colIndex } = $.data($headerCell);\n            const column = this.datamanager.getColumn(colIndex);\n            let width = $.style($('.dt-cell__content', $headerCell), 'width');\n            if (typeof width === 'number' && width >= this.options.minimumColumnWidth) {\n                column.naturalWidth = width;\n            } else {\n                column.naturalWidth = this.options.minimumColumnWidth;\n            }\n        });\n\n        // set initial width as naturally calculated by table's first row\n        $.each('.dt-row-0 .dt-cell', this.bodyScrollable).map($cell => {\n            const {\n                colIndex\n            } = $.data($cell);\n            const column = this.datamanager.getColumn(colIndex);\n\n            let naturalWidth = $.style($('.dt-cell__content', $cell), 'width');\n\n            if (typeof naturalWidth === 'number' && naturalWidth >= column.naturalWidth) {\n                column.naturalWidth = naturalWidth;\n            } else {\n                column.naturalWidth = column.naturalWidth;\n            }\n        });\n    }\n\n    setupColumnWidth() {\n        if (this.options.layout === 'ratio') {\n            let totalWidth = $.style(this.datatableWrapper, 'width');\n\n            if (this.options.serialNoColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_rowIndex');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            if (this.options.checkboxColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_checkbox');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            const totalParts = this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') {\n                        return 0;\n                    }\n                    if (!column.width) {\n                        column.width = 1;\n                    }\n                    column.ratioWidth = parseInt(column.width, 10);\n                    return column.ratioWidth;\n                })\n                .reduce((a, c) => a + c);\n\n            const onePart = totalWidth / totalParts;\n\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') return;\n                    column.width = Math.floor(onePart * column.ratioWidth) - 1;\n                });\n        } else {\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (!column.width) {\n                        column.width = column.naturalWidth;\n                    }\n                    if (column.id === '_rowIndex') {\n                        column.width = this.getRowIndexColumnWidth();\n                    }\n                    if (column.width < this.options.minimumColumnWidth) {\n                        column.width = this.options.minimumColumnWidth;\n                    }\n                });\n        }\n    }\n\n    distributeRemainingWidth() {\n        if (this.options.layout !== 'fluid') return;\n\n        const wrapperWidth = $.style(this.instance.datatableWrapper, 'width');\n        let firstRow = $('.dt-row', this.bodyScrollable);\n        let firstRowWidth = wrapperWidth;\n        if (!firstRow) {\n            let headerRow = $('.dt-row', this.instance.header);\n            let cellWidths = Array.from(headerRow.children)\n                .map(cell => cell.offsetWidth);\n            firstRowWidth = cellWidths.reduce((sum, a) => sum + a, 0);\n        } else {\n            firstRowWidth = $.style(firstRow, 'width');\n        }\n        const resizableColumns = this.datamanager.getColumns().filter(col => col.resizable);\n        const deltaWidth = (wrapperWidth - firstRowWidth) / resizableColumns.length;\n\n        resizableColumns.map(col => {\n            const width = $.style(this.getColumnHeaderElement(col.colIndex), 'width');\n            let finalWidth = Math.floor(width + deltaWidth) - 2;\n\n            this.datamanager.updateColumn(col.colIndex, {\n                width: finalWidth\n            });\n        });\n    }\n\n    setColumnStyle() {\n        // align columns\n        this.datamanager.getColumns()\n            .map(column => {\n                // alignment\n                if (!column.align) {\n                    column.align = 'left';\n                }\n                if (!['left', 'center', 'right'].includes(column.align)) {\n                    column.align = 'left';\n                }\n                this.setStyle(`.dt-cell--col-${column.colIndex}`, {\n                    'text-align': column.align\n                });\n\n                // width\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n    }\n\n    refreshColumnWidth() {\n        this.datamanager.getColumns()\n            .map(column => {\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n    }\n\n    setBodyStyle() {\n        const bodyWidth = $.style(this.datatableWrapper, 'width');\n        const firstRow = $('.dt-row', this.bodyScrollable);\n        if (!firstRow) return;\n        const rowWidth = $.style(firstRow, 'width');\n\n        let width = bodyWidth > rowWidth ? rowWidth : bodyWidth;\n        $.style(this.bodyScrollable, {\n            width: width + 'px'\n        });\n\n        // remove the body height, so that it resets to it's original\n        $.removeStyle(this.bodyScrollable, 'height');\n\n        // when there are less rows than the container\n        // adapt the container height\n        let bodyHeight = $.getStyle(this.bodyScrollable, 'height');\n        const scrollHeight = (this.bodyRenderer.hyperlist || {})._scrollHeight || Infinity;\n        const hasHorizontalOverflow = $.hasHorizontalOverflow(this.bodyScrollable);\n\n        let height;\n\n        if (scrollHeight < bodyHeight) {\n            height = scrollHeight;\n\n            // account for scrollbar size when\n            // there is horizontal overflow\n            if (hasHorizontalOverflow) {\n                height += $.scrollbarSize();\n            }\n\n            $.style(this.bodyScrollable, {\n                height: height + 'px'\n            });\n        }\n\n        const verticalOverflow = this.bodyScrollable.scrollHeight - this.bodyScrollable.offsetHeight;\n        if (verticalOverflow < $.scrollbarSize()) {\n            // if verticalOverflow is less than scrollbar size\n            // then most likely scrollbar is causing the scroll\n            // which is not needed\n            $.style(this.bodyScrollable, {\n                overflowY: 'hidden'\n            });\n        }\n\n        if (this.options.layout === 'fluid') {\n            $.style(this.bodyScrollable, {\n                overflowX: 'hidden'\n            });\n        }\n    }\n\n    getColumnHeaderElement(colIndex) {\n        colIndex = +colIndex;\n        if (colIndex < 0) return null;\n        return $(`.dt-cell--col-${colIndex}`, this.header);\n    }\n\n    getRowIndexColumnWidth() {\n        const rowCount = this.datamanager.getRowCount();\n        const padding = 22;\n        return $.measureTextWidth(rowCount + '') + padding;\n    }\n}\n\nconst KEYCODES = {\n    13: 'enter',\n    91: 'meta',\n    16: 'shift',\n    17: 'ctrl',\n    18: 'alt',\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n    9: 'tab',\n    27: 'esc',\n    67: 'c',\n    70: 'f',\n    86: 'v'\n};\n\nclass Keyboard {\n    constructor(element) {\n        this.listeners = {};\n        $.on(element, 'keydown', this.handler.bind(this));\n    }\n\n    handler(e) {\n        let key = KEYCODES[e.keyCode];\n\n        if (e.shiftKey && key !== 'shift') {\n            key = 'shift+' + key;\n        }\n\n        if ((e.ctrlKey && key !== 'ctrl') || (e.metaKey && key !== 'meta')) {\n            key = 'ctrl+' + key;\n        }\n\n        const listeners = this.listeners[key];\n\n        if (listeners && listeners.length > 0) {\n            for (let listener of listeners) {\n                const preventBubbling = listener(e);\n                if (preventBubbling === undefined || preventBubbling === true) {\n                    e.preventDefault();\n                }\n            }\n        }\n    }\n\n    on(key, listener) {\n        const keys = key.split(',').map(k => k.trim());\n\n        keys.map(key => {\n            this.listeners[key] = this.listeners[key] || [];\n            this.listeners[key].push(listener);\n        });\n    }\n}\n\nvar en = {\n\t\"Sort Ascending\": \"Sort Ascending\",\n\t\"Sort Descending\": \"Sort Descending\",\n\t\"Reset sorting\": \"Reset sorting\",\n\t\"Remove column\": \"Remove column\",\n\t\"No Data\": \"No Data\",\n\t\"{count} cells copied\": {\"1\":\"{count} cell copied\",\"default\":\"{count} cells copied\"},\n\t\"{count} rows selected\": {\"1\":\"{count} row selected\",\"default\":\"{count} rows selected\"}\n};\n\nvar de = {\n\t\"Sort Ascending\": \"Aufsteigend sortieren\",\n\t\"Sort Descending\": \"Absteigend sortieren\",\n\t\"Reset sorting\": \"Sortierung zur\u00FCcksetzen\",\n\t\"Remove column\": \"Spalte entfernen\",\n\t\"No Data\": \"Keine Daten\",\n\t\"{count} cells copied\": {\"1\":\"{count} Zelle kopiert\",\"default\":\"{count} Zellen kopiert\"},\n\t\"{count} rows selected\": {\"1\":\"{count} Zeile ausgew\u00E4hlt\",\"default\":\"{count} Zeilen ausgew\u00E4hlt\"}\n};\n\nvar fr = {\n\t\"Sort Ascending\": \"Trier par ordre croissant\",\n\t\"Sort Descending\": \"Trier par ordre d\u00E9croissant\",\n\t\"Reset sorting\": \"R\u00E9initialiser le tri\",\n\t\"Remove column\": \"Supprimer colonne\",\n\t\"No Data\": \"Pas de donn\u00E9es\",\n\t\"{count} cells copied\": {\"1\":\"{count} cellule copi\u00E9e\",\"default\":\"{count} cellules copi\u00E9es\"},\n\t\"{count} rows selected\": {\"1\":\"{count} ligne s\u00E9lectionn\u00E9e\",\"default\":\"{count} lignes s\u00E9lectionn\u00E9es\"}\n};\n\nvar it = {\n\t\"Sort Ascending\": \"Ordinamento ascendente\",\n\t\"Sort Descending\": \"Ordinamento decrescente\",\n\t\"Reset sorting\": \"Azzeramento ordinamento\",\n\t\"Remove column\": \"Rimuovi colonna\",\n\t\"No Data\": \"Nessun dato\",\n\t\"{count} cells copied\": {\"1\":\"Copiato {count} cella\",\"default\":\"{count} celle copiate\"},\n\t\"{count} rows selected\": {\"1\":\"{count} linea selezionata\",\"default\":\"{count} linee selezionate\"}\n};\n\nfunction getTranslations() {\n    return {\n        en,\n        de,\n        fr,\n        it,\n    };\n}\n\nclass TranslationManager {\n    constructor(language) {\n        this.language = language;\n        this.translations = getTranslations();\n    }\n\n    addTranslations(translations) {\n        this.translations = Object.assign(this.translations, translations);\n    }\n\n    translate(sourceText, args) {\n        let translation = (this.translations[this.language] &&\n            this.translations[this.language][sourceText]) || sourceText;\n\n        if (typeof translation === 'object') {\n            translation = args && args.count ?\n                this.getPluralizedTranslation(translation, args.count) :\n                sourceText;\n        }\n\n        return format(translation, args || {});\n    }\n\n    getPluralizedTranslation(translations, count) {\n        return translations[count] || translations['default'];\n    }\n}\n\nfunction filterRows(rows, filters) {\n    let filteredRowIndices = [];\n\n    if (Object.keys(filters).length === 0) {\n        return rows.map(row => row.meta.rowIndex);\n    }\n\n    for (let colIndex in filters) {\n        const keyword = filters[colIndex];\n\n        const filteredRows = filteredRowIndices.length ?\n            filteredRowIndices.map(i => rows[i]) :\n            rows;\n\n        const cells = filteredRows.map(row => row[colIndex]);\n\n        let filter = guessFilter(keyword);\n        let filterMethod = getFilterMethod(filter);\n\n        if (filterMethod) {\n            filteredRowIndices = filterMethod(filter.text, cells);\n        } else {\n            filteredRowIndices = cells.map(cell => cell.rowIndex);\n        }\n    }\n\n    return filteredRowIndices;\n}\nfunction getFilterMethod(filter) {\n    const stringCompareValue = cell =>\n        String(stripHTML(cell.html || '') || cell.content || '').toLowerCase();\n\n    const numberCompareValue = cell => parseFloat(cell.content);\n\n    const getCompareValues = (cell, keyword) => {\n        if (cell.column.compareValue) {\n            const compareValues = cell.column.compareValue(cell, keyword);\n            if (compareValues && Array.isArray(compareValues)) return compareValues;\n        }\n\n        // check if it can be converted to number\n        const float = numberCompareValue(cell);\n        if (!isNaN(float)) {\n            return [float, keyword];\n        }\n\n        return [stringCompareValue(cell), keyword];\n    };\n\n    let filterMethodMap = {\n        contains(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const hay = stringCompareValue(cell);\n                    const needle = (keyword || '').toLowerCase();\n                    return !needle || hay.includes(needle);\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        greaterThan(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const [compareValue, keywordValue] = getCompareValues(cell, keyword);\n                    return compareValue > keywordValue;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        lessThan(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const [compareValue, keywordValue] = getCompareValues(cell, keyword);\n                    return compareValue < keywordValue;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        equals(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const value = parseFloat(cell.content);\n                    return value === keyword;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        notEquals(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    const value = parseFloat(cell.content);\n                    return value !== keyword;\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        range(rangeValues, cells) {\n            return cells\n                .filter(cell => {\n                    const values1 = getCompareValues(cell, rangeValues[0]);\n                    const values2 = getCompareValues(cell, rangeValues[1]);\n                    const value = values1[0];\n                    return value >= values1[1] && value <= values2[1];\n                })\n                .map(cell => cell.rowIndex);\n        },\n\n        containsNumber(keyword, cells) {\n            return cells\n                .filter(cell => {\n                    let number = parseFloat(keyword, 10);\n                    let string = keyword;\n                    let hayNumber = numberCompareValue(cell);\n                    let hayString = stringCompareValue(cell);\n\n                    return number === hayNumber || hayString.includes(string);\n                })\n                .map(cell => cell.rowIndex);\n        }\n    };\n\n    return filterMethodMap[filter.type];\n}\n\nfunction guessFilter(keyword = '') {\n    if (keyword.length === 0) return {};\n\n    let compareString = keyword;\n\n    if (['>', '<', '='].includes(compareString[0])) {\n        compareString = keyword.slice(1);\n    } else if (compareString.startsWith('!=')) {\n        compareString = keyword.slice(2);\n    }\n\n    if (keyword.startsWith('>')) {\n        if (compareString) {\n            return {\n                type: 'greaterThan',\n                text: compareString.trim()\n            };\n        }\n    }\n\n    if (keyword.startsWith('<')) {\n        if (compareString) {\n            return {\n                type: 'lessThan',\n                text: compareString.trim()\n            };\n        }\n    }\n\n    if (keyword.startsWith('=')) {\n        if (isNumber(compareString)) {\n            return {\n                type: 'equals',\n                text: Number(keyword.slice(1).trim())\n            };\n        }\n    }\n\n    if (isNumber(compareString)) {\n        return {\n            type: 'containsNumber',\n            text: compareString\n        };\n    }\n\n    if (keyword.startsWith('!=')) {\n        if (isNumber(compareString)) {\n            return {\n                type: 'notEquals',\n                text: Number(keyword.slice(2).trim())\n            };\n        }\n    }\n\n    if (keyword.split(':').length === 2) {\n        compareString = keyword.split(':');\n        return {\n            type: 'range',\n            text: compareString.map(v => v.trim())\n        };\n    }\n\n    return {\n        type: 'contains',\n        text: compareString.toLowerCase()\n    };\n}\n\nfunction getDefaultOptions(instance) {\n    return {\n        columns: [],\n        data: [],\n        dropdownButton: icons.chevronDown,\n        headerDropdown: [\n            {\n                label: instance.translate('Sort Ascending'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'asc');\n                }\n            },\n            {\n                label: instance.translate('Sort Descending'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'desc');\n                }\n            },\n            {\n                label: instance.translate('Reset sorting'),\n                action: function (column) {\n                    this.sortColumn(column.colIndex, 'none');\n                }\n            },\n            {\n                label: instance.translate('Remove column'),\n                action: function (column) {\n                    this.removeColumn(column.colIndex);\n                }\n            }\n        ],\n        events: {\n            onRemoveColumn(column) {},\n            onSwitchColumn(column1, column2) {},\n            onSortColumn(column) {},\n            onCheckRow(row) {},\n            onDestroy() {}\n        },\n        hooks: {\n            columnTotal: null\n        },\n        sortIndicator: {\n            asc: '\u2191',\n            desc: '\u2193',\n            none: ''\n        },\n        overrideComponents: {\n            // ColumnManager: CustomColumnManager\n        },\n        filterRows: filterRows,\n        freezeMessage: '',\n        getEditor: null,\n        serialNoColumn: true,\n        checkboxColumn: false,\n        clusterize: true,\n        logs: false,\n        layout: 'fixed', // fixed, fluid, ratio\n        noDataMessage: instance.translate('No Data'),\n        cellHeight: 40,\n        minimumColumnWidth: 30,\n        inlineFilters: false,\n        treeView: false,\n        checkedRowStatus: true,\n        dynamicRowHeight: false,\n        pasteFromClipboard: false,\n        showTotalRow: false,\n        direction: 'ltr',\n        disableReorderColumn: false\n    };\n}\n\nlet defaultComponents = {\n    DataManager,\n    CellManager,\n    ColumnManager,\n    RowManager,\n    BodyRenderer,\n    Style,\n    Keyboard\n};\n\nclass DataTable {\n    constructor(wrapper, options) {\n        DataTable.instances++;\n\n        if (typeof wrapper === 'string') {\n            // css selector\n            wrapper = document.querySelector(wrapper);\n        }\n        this.wrapper = wrapper;\n        if (!(this.wrapper instanceof HTMLElement)) {\n            throw new Error('Invalid argument given for `wrapper`');\n        }\n\n        this.initializeTranslations(options);\n        this.setDefaultOptions();\n        this.buildOptions(options);\n        this.prepare();\n        this.initializeComponents();\n\n        if (this.options.data) {\n            this.refresh();\n            this.columnmanager.applyDefaultSortOrder();\n        }\n    }\n\n    initializeTranslations(options) {\n        this.language = options.language || 'en';\n        this.translationManager = new TranslationManager(this.language);\n\n        if (options.translations) {\n            this.translationManager.addTranslations(options.translations);\n        }\n    }\n\n    setDefaultOptions() {\n        this.DEFAULT_OPTIONS = getDefaultOptions(this);\n    }\n\n    buildOptions(options) {\n        this.options = this.options || {};\n\n        this.options = Object.assign(\n            {}, this.DEFAULT_OPTIONS,\n            this.options || {}, options\n        );\n\n        options.headerDropdown = options.headerDropdown || [];\n        this.options.headerDropdown = [\n            ...this.DEFAULT_OPTIONS.headerDropdown,\n            ...options.headerDropdown\n        ];\n\n        // custom user events\n        this.events = Object.assign(\n            {}, this.DEFAULT_OPTIONS.events,\n            this.options.events || {},\n            options.events || {}\n        );\n        this.fireEvent = this.fireEvent.bind(this);\n    }\n\n    prepare() {\n        this.prepareDom();\n        this.unfreeze();\n    }\n\n    initializeComponents() {\n        let components = Object.assign({}, defaultComponents, this.options.overrideComponents);\n        let {\n            Style: Style$$1,\n            Keyboard: Keyboard$$1,\n            DataManager: DataManager$$1,\n            RowManager: RowManager$$1,\n            ColumnManager: ColumnManager$$1,\n            CellManager: CellManager$$1,\n            BodyRenderer: BodyRenderer$$1\n        } = components;\n\n        this.style = new Style$$1(this);\n        this.keyboard = new Keyboard$$1(this.wrapper);\n        this.datamanager = new DataManager$$1(this.options);\n        this.rowmanager = new RowManager$$1(this);\n        this.columnmanager = new ColumnManager$$1(this);\n        this.cellmanager = new CellManager$$1(this);\n        this.bodyRenderer = new BodyRenderer$$1(this);\n    }\n\n    prepareDom() {\n        this.wrapper.innerHTML = `\n            <div class=\"datatable\" dir=\"${this.options.direction}\">\n                <div class=\"dt-header\"></div>\n                <div class=\"dt-scrollable\"></div>\n                <div class=\"dt-footer\"></div>\n                <div class=\"dt-freeze\">\n                    <span class=\"dt-freeze__message\">\n                        ${this.options.freezeMessage}\n                    </span>\n                </div>\n                <div class=\"dt-toast\"></div>\n                <div class=\"dt-dropdown-container\"></div>\n                <textarea class=\"dt-paste-target\"></textarea>\n            </div>\n        `;\n\n        this.datatableWrapper = $('.datatable', this.wrapper);\n        this.header = $('.dt-header', this.wrapper);\n        this.footer = $('.dt-footer', this.wrapper);\n        this.bodyScrollable = $('.dt-scrollable', this.wrapper);\n        this.freezeContainer = $('.dt-freeze', this.wrapper);\n        this.toastMessage = $('.dt-toast', this.wrapper);\n        this.pasteTarget = $('.dt-paste-target', this.wrapper);\n        this.dropdownContainer = $('.dt-dropdown-container', this.wrapper);\n    }\n\n    refresh(data, columns) {\n        this.datamanager.init(data, columns);\n        this.render();\n        this.setDimensions();\n    }\n\n    destroy() {\n        this.wrapper.innerHTML = '';\n        this.style.destroy();\n        this.fireEvent('onDestroy');\n    }\n\n    appendRows(rows) {\n        this.datamanager.appendRows(rows);\n        this.rowmanager.refreshRows();\n    }\n\n    refreshRow(row, rowIndex) {\n        this.rowmanager.refreshRow(row, rowIndex);\n    }\n\n    render() {\n        this.renderHeader();\n        this.renderBody();\n    }\n\n    renderHeader() {\n        this.columnmanager.renderHeader();\n    }\n\n    renderBody() {\n        this.bodyRenderer.render();\n    }\n\n    setDimensions() {\n        this.style.setDimensions();\n    }\n\n    showToastMessage(message, hideAfter) {\n        this.bodyRenderer.showToastMessage(message, hideAfter);\n    }\n\n    clearToastMessage() {\n        this.bodyRenderer.clearToastMessage();\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    getRows() {\n        return this.datamanager.getRows();\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getColumnHeaderElement(colIndex) {\n        return this.columnmanager.getColumnHeaderElement(colIndex);\n    }\n\n    getViewportHeight() {\n        if (!this.viewportHeight) {\n            this.viewportHeight = $.style(this.bodyScrollable, 'height');\n        }\n\n        return this.viewportHeight;\n    }\n\n    sortColumn(colIndex, sortOrder) {\n        this.columnmanager.sortColumn(colIndex, sortOrder);\n    }\n\n    removeColumn(colIndex) {\n        this.columnmanager.removeColumn(colIndex);\n    }\n\n    scrollToLastColumn() {\n        this.datatableWrapper.scrollLeft = 9999;\n    }\n\n    freeze() {\n        $.style(this.freezeContainer, {\n            display: ''\n        });\n    }\n\n    unfreeze() {\n        $.style(this.freezeContainer, {\n            display: 'none'\n        });\n    }\n\n    updateOptions(options) {\n        this.buildOptions(options);\n    }\n\n    fireEvent(eventName, ...args) {\n        // fire internalEventHandlers if any\n        // and then user events\n        const handlers = [\n            ...(this._internalEventHandlers[eventName] || []),\n            this.events[eventName]\n        ].filter(Boolean);\n\n        for (let handler of handlers) {\n            handler.apply(this, args);\n        }\n    }\n\n    on(event, handler) {\n        this._internalEventHandlers = this._internalEventHandlers || {};\n        this._internalEventHandlers[event] = this._internalEventHandlers[event] || [];\n        this._internalEventHandlers[event].push(handler);\n    }\n\n    log() {\n        if (this.options.logs) {\n            console.log.apply(console, arguments);\n        }\n    }\n\n    translate(str, args) {\n        return this.translationManager.translate(str, args);\n    }\n}\n\nDataTable.instances = 0;\n\nvar name = \"frappe-datatable\";\nvar version = \"0.0.0-development\";\nvar description = \"A modern datatable library for the web\";\nvar main = \"dist/frappe-datatable.cjs.js\";\nvar unpkg = \"dist/frappe-datatable.min.js\";\nvar jsdelivr = \"dist/frappe-datatable.min.js\";\nvar scripts = {\"start\":\"yarn run dev\",\"build\":\"rollup -c && NODE_ENV=production rollup -c\",\"dev\":\"rollup -c -w\",\"cy:server\":\"http-server -p 8989\",\"cy:open\":\"cypress open\",\"cy:run\":\"cypress run\",\"test\":\"start-server-and-test cy:server http://localhost:8989 cy:run\",\"test-local\":\"start-server-and-test cy:server http://localhost:8989 cy:open\",\"travis-deploy-once\":\"travis-deploy-once\",\"semantic-release\":\"semantic-release\",\"lint\":\"eslint src\",\"lint-and-build\":\"yarn lint && yarn build\",\"commit\":\"npx git-cz\"};\nvar files = [\"dist\",\"src\"];\nvar devDependencies = {\"autoprefixer\":\"^9.0.0\",\"chai\":\"3.5.0\",\"cypress\":\"^9.2.0\",\"cz-conventional-changelog\":\"^2.1.0\",\"deepmerge\":\"^2.0.1\",\"eslint\":\"^5.0.1\",\"eslint-config-airbnb\":\"^16.1.0\",\"eslint-config-airbnb-base\":\"^12.1.0\",\"eslint-plugin-import\":\"^2.11.0\",\"http-server\":\"^0.11.1\",\"mocha\":\"3.3.0\",\"postcss-custom-properties\":\"^7.0.0\",\"postcss-nested\":\"^3.0.0\",\"rollup\":\"^0.59.4\",\"rollup-plugin-commonjs\":\"^8.3.0\",\"rollup-plugin-eslint\":\"^4.0.0\",\"rollup-plugin-json\":\"^2.3.0\",\"rollup-plugin-node-resolve\":\"^3.0.3\",\"rollup-plugin-postcss\":\"^1.2.8\",\"rollup-plugin-uglify-es\":\"^0.0.1\",\"semantic-release\":\"^17.1.1\",\"start-server-and-test\":\"^1.4.1\",\"travis-deploy-once\":\"^5.0.1\"};\nvar repository = {\"type\":\"git\",\"url\":\"https://github.com/frappe/datatable.git\"};\nvar keywords = [\"datatable\",\"data\",\"grid\",\"table\"];\nvar author = \"Faris Ansari\";\nvar license = \"MIT\";\nvar bugs = {\"url\":\"https://github.com/frappe/datatable/issues\"};\nvar homepage = \"https://frappe.io/datatable\";\nvar dependencies = {\"hyperlist\":\"^1.0.0-beta\",\"lodash\":\"^4.17.5\",\"sortablejs\":\"^1.7.0\"};\nvar config = {\"commitizen\":{\"path\":\"cz-conventional-changelog\"}};\nvar packageJson = {\n\tname: name,\n\tversion: version,\n\tdescription: description,\n\tmain: main,\n\tunpkg: unpkg,\n\tjsdelivr: jsdelivr,\n\tscripts: scripts,\n\tfiles: files,\n\tdevDependencies: devDependencies,\n\trepository: repository,\n\tkeywords: keywords,\n\tauthor: author,\n\tlicense: license,\n\tbugs: bugs,\n\thomepage: homepage,\n\tdependencies: dependencies,\n\tconfig: config\n};\n\nDataTable.__version__ = packageJson.version;\n\nmodule.exports = DataTable;\n", "$(document).on('app_ready', function() {\n\tif (document.referrer.endsWith(\"/login\")) {\n\t\t// app ready after login, let's rumble\n\t\t//console.log(\"let's rumble\");\n\t\t// get persistent session settings\n\t\tfrappe.call({\n\t\t\t'method': \"erpnext_oob.utils.get_user_default\",\n\t\t\t'callback': function(response) {\n\t\t\t\tif (response.message) {\n\t\t\t\t\tresponse.message.forEach(function (setting) {\n\t\t\t\t\t\tvar key = setting.setting_key.toLowerCase().replaceAll(\" \", \"_\");\n\t\t\t\t\t\tfrappe.defaults.set_user_default_local(key, setting.setting_value);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n});\n$(document).bind('toolbar_setup', function() {\n\t// \u65E5\u671F\u9009\u62E9\u4E2D\u6587\n    //frappe.boot.user.language = frappe.boot.lang\n    // \u9690\u85CF/\u5220\u9664\u6240\u6709\u5E2E\u52A9\u6587\u6863\n    // $('.dropdown-help ul li:lt(6)').attr(\"style\",\"display:none;\")\n    // $('.dropdown-help ul li:lt(6)').remove()\n});\n\n\n\nfrappe.views.Calendar = class Calendar extends frappe.views.Calendar {\n    setup_options(defaults) {\n        super.setup_options(defaults);\n        if (this.cal_options.locale == 'zh') {\n            this.cal_options.locale = 'zh-cn'\n        }\n    }\n}\n\n\n// \u5217\u8868\u9F20\u6807\u60AC\u505C\u4E2D\u6587\u88AB\u8F6C\u7801 \u5176\u5B9E\u5C31\u6539\u4E86\u4E00\u884C\n// \u5B57\u6BB5\u503C\u90FD\u7FFB\u8BD1\u4E00\u4E0B\uFF0C\u4E0D\u6B62select\u7C7B\u578B\nvar MyListView = class MyListView extends frappe.views.ListView {\n    get_column_html(col, doc) {\n\t\tif (col.type === 'Status') {\n\t\t\treturn `\n\t\t\t\t<div class=\"list-row-col hidden-xs ellipsis\">\n\t\t\t\t\t${this.get_indicator_html(doc)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tconst df = col.df || {};\n\t\tconst label = df.label;\n\t\tconst fieldname = df.fieldname;\n\t\tconst value = doc[fieldname] || '';\n\n\t\tconst format = () => {\n\t\t\tif (df.fieldtype === 'Code') {\n\t\t\t\treturn value;\n\t\t\t} else if (df.fieldtype === 'Percent') {\n\t\t\t\treturn `<div class=\"progress level\" style=\"margin: 0px;\">\n\t\t\t\t\t\t<div class=\"progress-bar progress-bar-success\" role=\"progressbar\"\n\t\t\t\t\t\t\taria-valuenow=\"${value}\"\n\t\t\t\t\t\t\taria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: ${Math.round(value)}%;\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`;\n\t\t\t} else {\n\t\t\t\treturn frappe.format(value, df, null, doc);\n\t\t\t}\n\t\t};\n\n\t\tconst field_html = () => {\n\t\t\tlet html;\n\t\t\tlet _value;\n\t\t\t// listview_setting formatter\n\t\t\tif (this.settings.formatters && this.settings.formatters[fieldname]) {\n\t\t\t\t_value = this.settings.formatters[fieldname](value, df, doc);\n\t\t\t} else {\n\t\t\t\tlet strip_html_required = df.fieldtype == 'Text Editor'\n\t\t\t\t\t|| (df.fetch_from && ['Text', 'Small Text'].includes(df.fieldtype));\n\t\t\t\tif (strip_html_required) {\n\t\t\t\t\t_value = strip_html(value);\n\t\t\t\t} else {\n\t\t\t\t\t_value = typeof value === 'string' ? frappe.utils.escape_html(value) : value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (df.fieldtype === 'Image') {\n\t\t\t\thtml = df.options ?\n\t\t\t\t\t`<img src=\"${doc[df.options]}\" style=\"max-height: 30px; max-width: 100%;\">` :\n\t\t\t\t\t`<div class=\"missing-image small\">\n\t\t\t\t\t\t<span class=\"octicon octicon-circle-slash\"></span>\n\t\t\t\t\t</div>`;\n\t\t\t} else if (df.fieldtype === 'Select') {\n\t\t\t\thtml = `<span class=\"filterable indicator ${frappe.utils.guess_colour(_value)} ellipsis\"\n\t\t\t\t\tdata-filter=\"${fieldname},=,${value}\">\n\t\t\t\t\t${__(_value)}\n\t\t\t\t</span>`;\n\t\t\t} else if (df.fieldtype === 'Link') {\n\t\t\t\thtml = `<a class=\"filterable text-muted ellipsis\"\n\t\t\t\t\tdata-filter=\"${fieldname},=,${value}\">\n\t\t\t\t\t${__(_value)}\n\t\t\t\t</a>`;\n\t\t\t} else if (['Text Editor', 'Text', 'Small Text', 'HTML Editor'].includes(df.fieldtype)) {\n\t\t\t\thtml = `<span class=\"text-muted ellipsis\">\n\t\t\t\t\t${__(_value)}\n\t\t\t\t</span>`;\n\t\t\t} else {\n\t\t\t\thtml = `<a class=\"filterable text-muted ellipsis\"\n\t\t\t\t\tdata-filter=\"${fieldname},=,${value}\">\n\t\t\t\t\t${format()}\n\t\t\t\t</a>`;\n\t\t\t}\n\t\t\t// \u8FD9\u91CC\u7684escape(_value)\u6539\u6210__(_value)\n\t\t\treturn `<span class=\"ellipsis\"\n\t\t\t\ttitle=\"${__(label)}: ${__(_value)}\">\n\t\t\t\t${html}\n\t\t\t</span>`;\n\t\t};\n\n\t\tconst class_map = {\n\t\t\tSubject: 'list-subject level',\n\t\t\tField: 'hidden-xs'\n\t\t};\n\t\tconst css_class = [\n\t\t\t'list-row-col ellipsis',\n\t\t\tclass_map[col.type],\n\t\t\tfrappe.model.is_numeric_field(df) ? 'text-right' : ''\n\t\t].join(' ');\n\n\t\tconst html_map = {\n\t\t\tSubject: this.get_subject_html(doc),\n\t\t\tField: field_html()\n\t\t};\n\t\tconst column_html = html_map[col.type];\n\n\t\treturn `\n\t\t\t<div class=\"${css_class}\">\n\t\t\t\t${column_html}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_subject_html(doc) {\n\t\tlet user = frappe.session.user;\n\t\tlet subject_field = this.columns[0].df;\n\t\tlet value = doc[subject_field.fieldname] || doc.name;\n\t\tlet subject = strip_html(value.toString());\n\t\tlet escaped_subject = frappe.utils.escape_html(subject);\n\n\t\tconst liked_by = JSON.parse(doc._liked_by || '[]');\n\t\tlet heart_class = liked_by.includes(user) ?\n\t\t\t'liked-by' : 'text-extra-muted not-liked';\n\n\t\tconst seen = JSON.parse(doc._seen || '[]')\n\t\t\t.includes(user) ? '' : 'bold';\n\n\t\t// \u8FD9\u91CC\u7684\u6539\u6210title=\"xxxx\" \u548C${subject} \u90FD\u52A0\u4E0A\u4E86\u7FFB\u8BD1 __()\n\t\tlet subject_html = `\n\t\t\t<input class=\"level-item list-row-checkbox hidden-xs\" type=\"checkbox\" data-name=\"${escape(doc.name)}\">\n\t\t\t<span class=\"level-item\" style=\"margin-bottom: 1px;\">\n\t\t\t\t<i class=\"octicon octicon-heart like-action ${heart_class}\"\n\t\t\t\t\tdata-name=\"${doc.name}\" data-doctype=\"${this.doctype}\"\n\t\t\t\t\tdata-liked-by=\"${encodeURI(doc._liked_by) || '[]'}\"\n\t\t\t\t>\n\t\t\t\t</i>\n\t\t\t\t<span class=\"likes-count\">\n\t\t\t\t\t${ liked_by.length > 99 ? __(\"99\") + '+' : __(liked_by.length || '')}\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t\t<span class=\"level-item ${seen} ellipsis\" title=\"${__(escaped_subject)}\">\n\t\t\t\t<a class=\"ellipsis\" href=\"${this.get_form_link(doc)}\" title=\"${__(escaped_subject)}\" data-doctype=\"${this.doctype}\" data-name=\"${doc.name}\">\n\t\t\t\t${__(subject)}\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t`;\n\n\t\treturn subject_html;\n\t}\n}\n\n//frappe.views.ListView = MyListView\n\n//\u56E0\u7F51\u7EDC\u95EE\u9898\u5BFC\u81F4emoji\u65E0\u6CD5\u8FDC\u7A0B\u52A0\u8F7D\uFF0C\u6539\u6210\u52A0\u8F7D\u672C\u5730json\u6587\u4EF6\uFF0C\n// frappe.chat.emoji  = function (fn) {\n// \treturn new Promise(resolve => {\n// \t\tif ( !frappe._.is_empty(frappe.chat.emojis) ) {\n// \t\t\tif ( fn )\n// \t\t\t\tfn(frappe.chat.emojis);\n\n// \t\t\tresolve(frappe.chat.emojis)\n// \t\t}\n// \t\telse\n// \t\t\t$.get('/assets/erpnext_oob/js/lib/emoji.json', (data) => {\n// \t\t\t\tfrappe.chat.emojis = data;\n\n// \t\t\t\tif ( fn )\n// \t\t\t\t\tfn(frappe.chat.emojis);\n\n// \t\t\t\tresolve(frappe.chat.emojis)\n// \t\t\t})\n// \t})\n// }\n\n// frappe.untranslated = new Set()\n// let mytranslation = function(txt, replace, context = null) {\n// \tlet translated_text = frappe._(txt, replace, context = null);\n// \tif (txt === translated_text && ! frappe.untranslated.has(txt)) frappe.untranslated.add(txt)\n// \treturn translated_text\n// }\n\n// window.__ = mytranslation\n\n//fisher \u89E3\u51B3\u7CFB\u7EDF\u7BA1\u7406\u8D26\u53F7\u4E5F\u663E\u793A\u65E0\u6743\u9650\u67E5\u770B\u6253\u5370\u683C\u5F0F\u7684\u95EE\u9898\uFF0C\u56E0\u4E3A\u6743\u9650\u903B\u8F91\u4E2D\u5224\u65ADprint format\u5143\u6570\u636E\u662F\u5426\u5B58\u5728\nfrappe.model.with_doctype('Print Format')", "class WidgetDialog {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t\tthis.editing = Boolean(this.values && Object.keys(this.values).length);\n\t}\n\n\tmake() {\n\t\tthis.make_dialog();\n\t\tthis.setup_dialog_events();\n\t\tthis.dialog.show();\n\n\t\twindow.cur_dialog = this.dialog;\n\t\tthis.editing && this.set_default_values();\n\t}\n\n\tmake_dialog() {\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: this.get_title(),\n\t\t\tfields: this.get_fields(),\n\t\t\tprimary_action: (data) => {\n\t\t\t\tdata = this.process_data(data);\n\n\t\t\t\tif (!this.editing && !data.name) {\n\t\t\t\t\tdata.name = `${this.type}-${this.label}-${frappe.utils.get_random(20)}`;\n\t\t\t\t}\n\n\t\t\t\tthis.dialog.hide();\n\t\t\t\tthis.primary_action(data);\n\t\t\t},\n\t\t\tprimary_action_label: this.primary_action_label || __(\"Add\"),\n\t\t});\n\t}\n\n\tget_title() {\n\t\t// DO NOT REMOVE: Comment to load translation\n\t\t// __(\"New Chart\") __(\"New Shortcut\") __(\"Edit Chart\") __(\"Edit Shortcut\")\n\n\t\tlet action = this.editing ? \"Edit\" : \"Add\";\n\t\tlet label = (action = action + \" \" + frappe.model.unscrub(this.type));\n\t\treturn __(label);\n\t}\n\n\tget_fields() {\n\t\t//\n\t}\n\n\tset_default_values() {\n\t\treturn this.dialog.set_values(this.values);\n\t}\n\n\tprocess_data(data) {\n\t\treturn data;\n\t}\n\n\tsetup_dialog_events() {\n\t\t//\n\t}\n\n\thide_field(fieldname) {\n\t\tthis.dialog.set_df_property(fieldname, \"hidden\", true);\n\t}\n\n\tshow_field(fieldname) {\n\t\tthis.dialog.set_df_property(fieldname, \"hidden\", false);\n\t}\n\n\tsetup_filter(doctype) {\n\t\tif (this.filter_group) {\n\t\t\tthis.filter_group.wrapper.empty();\n\t\t\tdelete this.filter_group;\n\t\t}\n\n\t\tlet $loading = this.dialog.get_field(\"filter_area_loading\").$wrapper;\n\t\t$(`<span class=\"text-muted\">${__(\"Loading Filters...\")}</span>`).appendTo($loading);\n\n\t\tthis.filters = [];\n\n\t\tthis.generate_filter_from_json && this.generate_filter_from_json();\n\n\t\tthis.filter_group = new frappe.ui.FilterGroup({\n\t\t\tparent: this.dialog.get_field(\"filter_area\").$wrapper,\n\t\t\tdoctype: doctype,\n\t\t\ton_change: () => {},\n\t\t});\n\n\t\tfrappe.model.with_doctype(doctype, () => {\n\t\t\tthis.filter_group.add_filters_to_filter_group(this.filters);\n\t\t\tthis.hide_field(\"filter_area_loading\");\n\t\t\tthis.show_field(\"filter_area\");\n\t\t});\n\t}\n}\n\nclass ChartDialog extends WidgetDialog {\n\tconstructor(opts) {\n\t\tsuper(opts);\n\t}\n\n\tget_fields() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tfieldname: \"chart_name\",\n\t\t\t\tlabel: \"Chart Name\",\n\t\t\t\toptions: \"Dashboard Chart\",\n\t\t\t\treqd: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tfieldname: \"label\",\n\t\t\t\tlabel: \"Label\",\n\t\t\t},\n\t\t];\n\t}\n\n\tprocess_data(data) {\n\t\tdata.label = data.label ? data.label : data.chart_name;\n\t\treturn data;\n\t}\n}\nclass QuickListDialog extends WidgetDialog {\n\tconstructor(opts) {\n\t\tsuper(opts);\n\t}\n\n\tget_fields() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tfieldname: \"document_type\",\n\t\t\t\tlabel: \"DocType\",\n\t\t\t\toptions: \"DocType\",\n\t\t\t\treqd: 1,\n\t\t\t\tonchange: () => {\n\t\t\t\t\tthis.document_type = this.dialog.get_value(\"document_type\");\n\t\t\t\t\tthis.document_type && this.setup_filter(this.document_type);\n\t\t\t\t},\n\t\t\t\tget_query: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\tissingle: 0,\n\t\t\t\t\t\t\tistable: 0,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\tfieldname: \"column_break_4\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tfieldname: \"label\",\n\t\t\t\tlabel: \"Label\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"filter_section\",\n\t\t\t\tlabel: __(\"Add Filters\"),\n\t\t\t\tdepends_on: \"eval: doc.document_type\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"filter_area_loading\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"filter_area\",\n\t\t\t},\n\t\t];\n\t}\n\n\tgenerate_filter_from_json() {\n\t\tif (this.values && this.values.quick_list_filter) {\n\t\t\tthis.filters = frappe.utils.get_filter_from_json(\n\t\t\t\tthis.values.quick_list_filter,\n\t\t\t\tthis.values.document_type\n\t\t\t);\n\t\t}\n\t}\n\n\tprocess_data(data) {\n\t\tif (this.filter_group) {\n\t\t\tlet filters = this.filter_group.get_filters();\n\t\t\tdata.quick_list_filter = frappe.utils.get_filter_as_json(filters);\n\t\t}\n\n\t\tdata.label = data.label ? data.label : data.document_type;\n\t\treturn data;\n\t}\n}\n\nclass OnboardingDialog extends WidgetDialog {\n\tconstructor(opts) {\n\t\tsuper(opts);\n\t}\n\n\tget_fields() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tfieldname: \"onboarding_name\",\n\t\t\t\tlabel: \"Onboarding Name\",\n\t\t\t\toptions: \"Module Onboarding\",\n\t\t\t\treqd: 1,\n\t\t\t},\n\t\t];\n\t}\n}\n\nclass CardDialog extends WidgetDialog {\n\tconstructor(opts) {\n\t\tsuper(opts);\n\t}\n\n\tget_fields() {\n\t\tlet me = this;\n\t\treturn [\n\t\t\t{\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tfieldname: \"label\",\n\t\t\t\tlabel: \"Label\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldname: \"links\",\n\t\t\t\tfieldtype: \"Table\",\n\t\t\t\tlabel: __(\"Card Links\"),\n\t\t\t\teditable_grid: 1,\n\t\t\t\tdata: me.values ? JSON.parse(me.values.links) : [],\n\t\t\t\tget_data: () => {\n\t\t\t\t\treturn me.values ? JSON.parse(me.values.links) : [];\n\t\t\t\t},\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"label\",\n\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\tlabel: \"Label\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"icon\",\n\t\t\t\t\t\tfieldtype: \"Icon\",\n\t\t\t\t\t\tlabel: \"Icon\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"link_type\",\n\t\t\t\t\t\tfieldtype: \"Select\",\n\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\tlabel: \"Link Type\",\n\t\t\t\t\t\treqd: 1,\n\t\t\t\t\t\toptions: [\"DocType\", \"Page\", \"Report\"],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"link_to\",\n\t\t\t\t\t\tfieldtype: \"Dynamic Link\",\n\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\tlabel: \"Link To\",\n\t\t\t\t\t\treqd: 1,\n\t\t\t\t\t\tget_options: (df) => {\n\t\t\t\t\t\t\treturn df.doc.link_type;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"column_break_7\",\n\t\t\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"dependencies\",\n\t\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\t\tlabel: \"Dependencies\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldname: \"only_for\",\n\t\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\t\tlabel: \"Only for\",\n\t\t\t\t\t\toptions: \"Country\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdefault: \"0\",\n\t\t\t\t\t\tfieldname: \"onboard\",\n\t\t\t\t\t\tfieldtype: \"Check\",\n\t\t\t\t\t\tlabel: \"Onboard\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdefault: \"0\",\n\t\t\t\t\t\tfieldname: \"is_query_report\",\n\t\t\t\t\t\tfieldtype: \"Check\",\n\t\t\t\t\t\tlabel: \"Is Query Report\",\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\t}\n\n\tprocess_data(data) {\n\t\tlet message = \"\";\n\n\t\tif (!data.links) {\n\t\t\tmessage = __(\"You must add atleast one link.\");\n\t\t} else {\n\t\t\tdata.links.map((item, idx) => {\n\t\t\t\tlet row = idx + 1;\n\n\t\t\t\tif (!item.link_type) {\n\t\t\t\t\tmessage = __(\"Following fields have missing values\") + \": <br><br><ul>\";\n\t\t\t\t\tmessage += `<li>${__(\"Link Type in Row\")} ${row}</li>`;\n\t\t\t\t}\n\n\t\t\t\tif (!item.link_to) {\n\t\t\t\t\tmessage += `<li>${__(\"Link To in Row\")} ${row}</li>`;\n\t\t\t\t}\n\n\t\t\t\titem.label = item.label ? item.label : item.link_to;\n\t\t\t});\n\t\t}\n\n\t\tif (message) {\n\t\t\tmessage += \"</ul>\";\n\t\t\tfrappe.throw({\n\t\t\t\tmessage: __(message),\n\t\t\t\ttitle: __(\"Missing Values Required\"),\n\t\t\t\tindicator: \"orange\",\n\t\t\t});\n\t\t}\n\n\t\tdata.label = data.label ? data.label : data.chart_name;\n\t\treturn data;\n\t}\n}\n\nclass ShortcutDialog extends WidgetDialog {\n\tconstructor(opts) {\n\t\tsuper(opts);\n\t}\n\n\thide_filters() {\n\t\tthis.hide_field(\"count_section_break\");\n\t\tthis.hide_field(\"filters_section_break\");\n\t}\n\n\tshow_filters() {\n\t\tthis.show_field(\"count_section_break\");\n\t\tthis.show_field(\"filters_section_break\");\n\t}\n\n\tget_fields() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\tfieldname: \"type\",\n\t\t\t\tlabel: \"Type\",\n\t\t\t\treqd: 1,\n\t\t\t\toptions: \"DocType\\nReport\\nPage\\nDashboard\\nURL\",\n\t\t\t\tonchange: () => {\n\t\t\t\t\tif (this.dialog.get_value(\"type\") == \"DocType\") {\n\t\t\t\t\t\tthis.dialog.fields_dict.link_to.get_query = () => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tquery: \"frappe.core.report.permitted_documents_for_user.permitted_documents_for_user.query_doctypes\",\n\t\t\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\t\t\tuser: frappe.session.user,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.dialog.fields_dict.link_to.get_query = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tfieldname: \"label\",\n\t\t\t\tlabel: \"Label\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\tfieldname: \"column_break_4\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Dynamic Link\",\n\t\t\t\tfieldname: \"link_to\",\n\t\t\t\tlabel: \"Link To\",\n\t\t\t\toptions: \"type\",\n\t\t\t\tonchange: () => {\n\t\t\t\t\tconst doctype = this.dialog.get_value(\"link_to\");\n\t\t\t\t\tif (doctype && this.dialog.get_value(\"type\") == \"DocType\") {\n\t\t\t\t\t\tfrappe.model.with_doctype(doctype, () => {\n\t\t\t\t\t\t\tlet meta = frappe.get_meta(doctype);\n\n\t\t\t\t\t\t\tif (doctype && frappe.boot.single_types.includes(doctype)) {\n\t\t\t\t\t\t\t\tthis.hide_filters();\n\t\t\t\t\t\t\t} else if (doctype) {\n\t\t\t\t\t\t\t\tthis.setup_filter(doctype);\n\t\t\t\t\t\t\t\tthis.show_filters();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst views = [\"List\", \"Report Builder\", \"Dashboard\", \"New\"];\n\t\t\t\t\t\t\tif (meta.is_tree === \"Tree\") views.push(\"Tree\");\n\t\t\t\t\t\t\tif (frappe.boot.calendars.includes(doctype)) views.push(\"Calendar\");\n\n\t\t\t\t\t\t\tthis.dialog.set_df_property(\"doc_view\", \"options\", views.join(\"\\n\"));\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.hide_filters();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdepends_on: (s) => s.type != \"URL\",\n\t\t\t\tmandatory_depends_on: (s) => s.type != \"URL\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tfieldname: \"url\",\n\t\t\t\tlabel: \"URL\",\n\t\t\t\toptions: \"URL\",\n\t\t\t\tdefault: \"\",\n\t\t\t\tdepends_on: (s) => s.type == \"URL\",\n\t\t\t\tmandatory_depends_on: (s) => s.type == \"URL\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\tfieldname: \"doc_view\",\n\t\t\t\tlabel: \"DocType View\",\n\t\t\t\toptions: \"List\\nReport Builder\\nDashboard\\nTree\\nNew\\nCalendar\\nKanban\",\n\t\t\t\tdescription: __(\n\t\t\t\t\t\"Which view of the associated DocType should this shortcut take you to?\"\n\t\t\t\t),\n\t\t\t\tdefault: \"List\",\n\t\t\t\tdepends_on: (state) => {\n\t\t\t\t\tif (this.dialog) {\n\t\t\t\t\t\tlet doctype = this.dialog.get_value(\"link_to\");\n\t\t\t\t\t\tlet is_single = frappe.boot.single_types.includes(doctype);\n\t\t\t\t\t\treturn state.type == \"DocType\" && !is_single;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"filters_section_break\",\n\t\t\t\tlabel: __(\"Count Filter\"),\n\t\t\t\thidden: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"filter_area_loading\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"filter_area\",\n\t\t\t\thidden: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"count_section_break\",\n\t\t\t\tlabel: __(\"Count Customizations\"),\n\t\t\t\thidden: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\tfieldname: \"color\",\n\t\t\t\tlabel: __(\"Color\"),\n\t\t\t\toptions: [\"Grey\", \"Green\", \"Red\", \"Orange\", \"Pink\", \"Yellow\", \"Blue\", \"Cyan\"],\n\t\t\t\tdefault: \"Grey\",\n\t\t\t\tinput_class: \"color-select\",\n\t\t\t\tonchange: () => {\n\t\t\t\t\tlet color = this.dialog.fields_dict.color.value.toLowerCase();\n\t\t\t\t\tlet $select = this.dialog.fields_dict.color.$input;\n\t\t\t\t\tif (!$select.parent().find(\".color-box\").get(0)) {\n\t\t\t\t\t\t$(`<div class=\"color-box\"></div>`).insertBefore($select.get(0));\n\t\t\t\t\t}\n\t\t\t\t\t$select\n\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t.find(\".color-box\")\n\t\t\t\t\t\t.get(0).style.backgroundColor = `var(--text-on-${color})`;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\tfieldname: \"column_break_3\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tfieldname: \"format\",\n\t\t\t\tlabel: __(\"Format\"),\n\t\t\t\tdescription: __(\"For Example: {} Open\"),\n\t\t\t},\n\t\t];\n\t}\n\n\tset_default_values() {\n\t\tsuper.set_default_values().then(() => {\n\t\t\tthis.dialog.fields_dict.link_to.df.onchange();\n\t\t});\n\t}\n\n\tgenerate_filter_from_json() {\n\t\tif (this.values && this.values.stats_filter) {\n\t\t\tthis.filters = frappe.utils.get_filter_from_json(\n\t\t\t\tthis.values.stats_filter,\n\t\t\t\tthis.values.link_to\n\t\t\t);\n\t\t}\n\t}\n\n\tprocess_data(data) {\n\t\tif (this.dialog.get_value(\"type\") == \"DocType\" && this.filter_group) {\n\t\t\tlet filters = this.filter_group.get_filters();\n\t\t\tdata.stats_filter = frappe.utils.get_filter_as_json(filters);\n\t\t}\n\n\t\tdata.label = data.label ? data.label : frappe.model.unscrub(data.link_to);\n\n\t\tif (data.url) {\n\t\t\t!validate_url(data.url) &&\n\t\t\t\tfrappe.throw({\n\t\t\t\t\tmessage: __(\"<b>{0}</b> is not a valid URL\", [data.url]),\n\t\t\t\t\ttitle: __(\"Invalid URL\"),\n\t\t\t\t\tindicator: \"red\",\n\t\t\t\t});\n\n\t\t\tif (!data.label) {\n\t\t\t\tdata.label = \"No Label (URL)\";\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n}\n\nclass NumberCardDialog extends WidgetDialog {\n\tconstructor(opts) {\n\t\tsuper(opts);\n\t}\n\n\tget_fields() {\n\t\tlet fields;\n\n\t\tif (this.for_workspace) {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Link\",\n\t\t\t\t\tfieldname: \"number_card_name\",\n\t\t\t\t\tlabel: __(\"Number Cards\"),\n\t\t\t\t\toptions: \"Number Card\",\n\t\t\t\t\treqd: 1,\n\t\t\t\t\tget_query: () => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tquery: \"frappe.desk.doctype.number_card.number_card.get_cards_for_user\",\n\t\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\t\tdocument_type: this.document_type,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldtype: \"Data\",\n\t\t\t\t\tfieldname: \"label\",\n\t\t\t\t\tlabel: __(\"Label\"),\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\n\t\tfields = [\n\t\t\t{\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\tlabel: __(\"Choose Existing Card or create New Card\"),\n\t\t\t\tfieldname: \"new_or_existing\",\n\t\t\t\toptions: [\"New Card\", \"Existing Card\"],\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tfieldname: \"card\",\n\t\t\t\tlabel: __(\"Number Cards\"),\n\t\t\t\toptions: \"Number Card\",\n\t\t\t\tget_query: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tquery: \"frappe.desk.doctype.number_card.number_card.get_cards_for_user\",\n\t\t\t\t\t\tfilters: {\n\t\t\t\t\t\t\tdocument_type: this.document_type,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tdepends_on: 'eval: doc.new_or_existing == \"Existing Card\"',\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"sb_1\",\n\t\t\t\tdepends_on: 'eval: doc.new_or_existing == \"New Card\"',\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Label\"),\n\t\t\t\tfieldname: \"label\",\n\t\t\t\tfieldtype: \"Data\",\n\t\t\t\tmandatory_depends_on: 'eval: doc.new_or_existing == \"New Card\"',\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Doctype\"),\n\t\t\t\tfieldname: \"document_type\",\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\toptions: \"DocType\",\n\t\t\t\tonchange: () => {\n\t\t\t\t\tthis.document_type = this.dialog.get_value(\"document_type\");\n\t\t\t\t\tthis.set_aggregate_function_fields(this.dialog.get_values());\n\t\t\t\t\tthis.setup_filter(this.document_type);\n\t\t\t\t},\n\t\t\t\thidden: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Color\"),\n\t\t\t\tfieldname: \"color\",\n\t\t\t\tfieldtype: \"Color\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Column Break\",\n\t\t\t\tfieldname: \"cb_1\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Function\"),\n\t\t\t\tfieldname: \"function\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\toptions: [\"Count\", \"Sum\", \"Average\", \"Minimum\", \"Maximum\"],\n\t\t\t\tmandatory_depends_on: 'eval: doc.new_or_existing == \"New Card\"',\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Function Based On\"),\n\t\t\t\tfieldname: \"aggregate_function_based_on\",\n\t\t\t\tfieldtype: \"Select\",\n\t\t\t\tdepends_on: \"eval: doc.function !== 'Count'\",\n\t\t\t\tmandatory_depends_on:\n\t\t\t\t\t'eval: doc.function !== \"Count\" && doc.new_or_existing == \"New Card\"',\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"sb_1\",\n\t\t\t\tlabel: __(\"Add Filters\"),\n\t\t\t\tdepends_on: 'eval: doc.new_or_existing == \"New Card\"',\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"filter_area_loading\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\tfieldname: \"filter_area\",\n\t\t\t\thidden: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfieldtype: \"Section Break\",\n\t\t\t\tfieldname: \"sb_1\",\n\t\t\t},\n\t\t];\n\n\t\treturn fields;\n\t}\n\n\tsetup_dialog_events() {\n\t\tif (!this.document_type && !this.for_workspace) {\n\t\t\tif (this.default_values && this.default_values[\"doctype\"]) {\n\t\t\t\tthis.document_type = this.default_values[\"doctype\"];\n\t\t\t\tthis.setup_filter(this.default_values[\"doctype\"]);\n\t\t\t\tthis.set_aggregate_function_fields();\n\t\t\t} else {\n\t\t\t\tthis.show_field(\"document_type\");\n\t\t\t}\n\t\t}\n\t}\n\n\tset_aggregate_function_fields() {\n\t\tlet aggregate_function_fields = [];\n\t\tif (this.document_type && frappe.get_meta(this.document_type)) {\n\t\t\tfrappe.get_meta(this.document_type).fields.map((df) => {\n\t\t\t\tif (frappe.model.numeric_fieldtypes.includes(df.fieldtype)) {\n\t\t\t\t\tif (df.fieldtype == \"Currency\") {\n\t\t\t\t\t\tif (!df.options || df.options !== \"Company:company:default_currency\") {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taggregate_function_fields.push({ label: df.label, value: df.fieldname });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.dialog.set_df_property(\n\t\t\t\"aggregate_function_based_on\",\n\t\t\t\"options\",\n\t\t\taggregate_function_fields\n\t\t);\n\t}\n\n\tprocess_data(data) {\n\t\tif (this.for_workspace) {\n\t\t\tdata.label = data.label ? data.label : data.number_card_name;\n\t\t\treturn data;\n\t\t}\n\n\t\tif (data.new_or_existing == \"Existing Card\") {\n\t\t\tdata.name = data.card;\n\t\t}\n\t\tdata.stats_filter = this.filter_group && JSON.stringify(this.filter_group.get_filters());\n\t\tdata.document_type = this.document_type;\n\t\treturn data;\n\t}\n}\n\nexport default function get_dialog_constructor(type) {\n\tconst widget_map = {\n\t\tchart: ChartDialog,\n\t\tshortcut: ShortcutDialog,\n\t\tlinks: CardDialog,\n\t\tonboarding: OnboardingDialog,\n\t\tquick_list: QuickListDialog,\n\t\tnumber_card: NumberCardDialog,\n\t};\n\n\treturn widget_map[type] || WidgetDialog;\n}\n", "import get_dialog_constructor from \"./widget_dialog.js\";\n\nexport default class Widget {\n\tconstructor(opts) {\n\t\tObject.assign(this, opts);\n\t\tthis.make();\n\t}\n\n\trefresh() {\n\t\tthis.set_title();\n\t\tthis.set_actions();\n\t\tthis.set_body();\n\t\tthis.setup_events();\n\t\tthis.set_footer();\n\t}\n\n\tget_config() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tlabel: this.label,\n\t\t};\n\t}\n\n\tcustomize(options) {\n\t\tthis.in_customize_mode = true;\n\t\tthis.action_area.empty();\n\n\t\toptions.allow_sorting &&\n\t\t\tfrappe.utils.add_custom_button(\n\t\t\t\tfrappe.utils.icon(\"drag\", \"xs\"),\n\t\t\t\tnull,\n\t\t\t\t\"drag-handle\",\n\t\t\t\t__(\"Drag\"),\n\t\t\t\tnull,\n\t\t\t\tthis.action_area\n\t\t\t);\n\n\t\tif (options.allow_hiding) {\n\t\t\tif (this.hidden) {\n\t\t\t\tthis.widget.removeClass(\"hidden\");\n\t\t\t\tthis.body.css(\"opacity\", 0.5);\n\t\t\t\tthis.title_field.css(\"opacity\", 0.5);\n\t\t\t\tthis.footer.css(\"opacity\", 0.5);\n\t\t\t}\n\t\t\tconst classname = this.hidden ? \"fa fa-eye\" : \"fa fa-eye-slash\";\n\t\t\tconst title = this.hidden ? __(\"Show\") : __(\"Hide\");\n\t\t\tfrappe.utils.add_custom_button(\n\t\t\t\t`<i class=\"${classname}\" aria-hidden=\"true\"></i>`,\n\t\t\t\t() => this.hide_or_show(),\n\t\t\t\t\"show-or-hide-button\",\n\t\t\t\ttitle,\n\t\t\t\tnull,\n\t\t\t\tthis.action_area\n\t\t\t);\n\n\t\t\tthis.show_or_hide_button = this.action_area.find(\".show-or-hide-button\");\n\t\t}\n\n\t\toptions.allow_edit &&\n\t\t\tfrappe.utils.add_custom_button(\n\t\t\t\tfrappe.utils.icon(\"edit\", \"xs\"),\n\t\t\t\t() => this.edit(),\n\t\t\t\t\"edit-button\",\n\t\t\t\t__(\"Edit\"),\n\t\t\t\tnull,\n\t\t\t\tthis.action_area\n\t\t\t);\n\t}\n\n\tmake() {\n\t\tthis.make_widget();\n\t\tthis.widget.appendTo(this.container);\n\t}\n\n\tmake_widget() {\n\t\tthis.widget = $(`<div class=\"widget\" data-widget-name=\"${this.name ? this.name : \"\"}\">\n\t\t\t<div class=\"widget-head\">\n\t\t\t\t<div class=\"widget-label\">\n\t\t\t\t\t<div class=\"widget-title\"></div>\n\t\t\t\t\t<div class=\"widget-subtitle\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"widget-control\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"widget-body\"></div>\n\t\t\t<div class=\"widget-footer\"></div>\n\t\t</div>`);\n\n\t\tthis.title_field = this.widget.find(\".widget-title\");\n\t\tthis.subtitle_field = this.widget.find(\".widget-subtitle\");\n\t\tthis.body = this.widget.find(\".widget-body\");\n\t\tthis.action_area = this.widget.find(\".widget-control\");\n\t\tthis.head = this.widget.find(\".widget-head\");\n\t\tthis.footer = this.widget.find(\".widget-footer\");\n\t\tthis.refresh();\n\t}\n\n\tset_title(max_chars) {\n\t\tlet base = this.title || this.label || this.name;\n\t\tlet title = max_chars ? frappe.ellipsis(base, max_chars) : base;\n\n\t\tif (this.icon) {\n\t\t\tlet icon = frappe.utils.icon(this.icon, \"lg\");\n\t\t\tthis.title_field[0].innerHTML = `${icon} <span class=\"ellipsis\" title=\"${title}\">${title}</span>`;\n\t\t} else {\n\t\t\tthis.title_field[0].innerHTML = `<span class=\"ellipsis\" title=\"${title}\">${title}</span>`;\n\t\t\tif (max_chars) {\n\t\t\t\tthis.title_field[0].setAttribute(\"title\", this.title || this.label);\n\t\t\t}\n\t\t}\n\t\tthis.subtitle && this.subtitle_field.html(this.subtitle);\n\t}\n\n\tdelete(animate = true, dismissed = false) {\n\t\tlet remove_widget = (setup_new) => {\n\t\t\tthis.widget.remove();\n\t\t\t!dismissed && this.options.on_delete && this.options.on_delete(this.name, setup_new);\n\t\t};\n\n\t\tif (animate) {\n\t\t\tthis.widget.addClass(\"zoom-out\");\n\t\t\t// wait for animation\n\t\t\tsetTimeout(() => {\n\t\t\t\tremove_widget(true);\n\t\t\t}, 300);\n\t\t} else {\n\t\t\tremove_widget(false);\n\t\t}\n\t}\n\n\tedit() {\n\t\tconst dialog_class = get_dialog_constructor(this.widget_type);\n\n\t\tthis.edit_dialog = new dialog_class({\n\t\t\tfor_workspace: this.options?.for_workspace,\n\t\t\tlabel: this.label,\n\t\t\ttype: this.widget_type,\n\t\t\tvalues: this.get_config(),\n\t\t\tprimary_action: (data) => {\n\t\t\t\tObject.assign(this, data);\n\t\t\t\tdata.name = this.name;\n\t\t\t\tthis.new = true;\n\t\t\t\tthis.refresh();\n\t\t\t\tthis.options.on_edit && this.options.on_edit(data);\n\t\t\t},\n\t\t\tprimary_action_label: __(\"Save\"),\n\t\t});\n\n\t\tthis.edit_dialog.make();\n\t}\n\n\ttoggle_width() {\n\t\tif (this.width == \"Full\") {\n\t\t\tthis.widget.removeClass(\"full-width\");\n\t\t\tthis.width = null;\n\t\t\tthis.refresh();\n\t\t} else {\n\t\t\tthis.widget.addClass(\"full-width\");\n\t\t\tthis.width = \"Full\";\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tconst title = this.width == \"Full\" ? __(\"Collapse\") : __(\"Expand\");\n\t\tthis.resize_button.attr(\"title\", title);\n\t}\n\n\thide_or_show() {\n\t\tif (!this.hidden) {\n\t\t\tthis.body.css(\"opacity\", 0.5);\n\t\t\tthis.title_field.css(\"opacity\", 0.5);\n\t\t\tthis.footer.css(\"opacity\", 0.5);\n\t\t\tthis.hidden = true;\n\t\t} else {\n\t\t\tthis.body.css(\"opacity\", 1);\n\t\t\tthis.title_field.css(\"opacity\", 1);\n\t\t\tthis.footer.css(\"opacity\", 1);\n\t\t\tthis.hidden = false;\n\t\t}\n\t\tthis.show_or_hide_button.empty();\n\n\t\tconst classname = this.hidden ? \"fa fa-eye\" : \"fa fa-eye-slash\";\n\t\tconst title = this.hidden ? __(\"Show\") : __(\"Hide\");\n\n\t\t$(`<i class=\"${classname}\" aria-hidden=\"true\" title=\"${title}\"></i>`).appendTo(\n\t\t\tthis.show_or_hide_button\n\t\t);\n\t}\n\n\tsetup_events() {\n\t\t//\n\t}\n\n\tset_actions() {\n\t\t//\n\t}\n\n\tset_body() {\n\t\t//\n\t}\n\n\tset_footer() {\n\t\t//\n\t}\n}\n", "import Widget from \"./base_widget.js\";\n\nfrappe.provide(\"frappe.utils\");\n\nexport default class OnboardingWidget extends Widget {\n\tasync refresh() {\n\t\tfrappe.utils.load_video_player();\n\t\tthis.new && (await this.get_onboarding_data());\n\t\tthis.set_title();\n\t\tthis.set_actions();\n\t\tthis.set_body();\n\t\tthis.setup_events();\n\t}\n\n\tget_config() {\n\t\treturn {\n\t\t\tlabel: this.onboarding_name,\n\t\t};\n\t}\n\n\tmake_body() {\n\t\tthis.body.empty();\n\t\tthis.steps_wrapper = $(`<div class=\"onboarding-steps-wrapper\"></div>`).appendTo(this.body);\n\t\tthis.step_preview = $(`<div class=\"onboarding-step-preview\">\n\t\t\t<div class=\"onboarding-step-body\"></div>\n\t\t\t<div class=\"onboarding-step-footer\"></div>\n\t\t</div>`).appendTo(this.body);\n\n\t\tthis.step_body = this.step_preview.find(\".onboarding-step-body\");\n\t\tthis.step_footer = this.step_preview.find(\".onboarding-step-footer\");\n\n\t\tthis.steps.forEach((step, index) => {\n\t\t\tthis.add_step(step, index);\n\t\t});\n\n\t\tthis.show_step(this.steps[0]);\n\t}\n\n\tadd_step(step, index) {\n\t\tlet status = \"pending\";\n\n\t\tif (step.is_skipped) status = \"skipped\";\n\t\tif (step.is_complete) status = \"complete\";\n\n\t\tlet $step = $(`<a class=\"onboarding-step ${status}\">\n\t\t\t\t<div class=\"step-title\">\n\t\t\t\t\t<div class=\"step-index step-pending\">${__(index + 1)}</div>\n\t\t\t\t\t<div class=\"step-index step-skipped\">${frappe.utils.icon(\"tick\", \"xs\")}</div>\n\t\t\t\t\t<div class=\"step-index step-complete\">${frappe.utils.icon(\"tick\", \"xs\")}</div>\n\t\t\t\t\t<div>${__(step.title)}</div>\n\t\t\t\t</div>\n\t\t\t</a>`);\n\n\t\tstep.$step = $step;\n\n\t\t// Add skip button\n\t\tif (!step.is_complete && !step.is_skipped) {\n\t\t\tlet skip_html = $(`<div class=\"step-skip\">${__(\"Skip\")}</div>`);\n\n\t\t\tskip_html.appendTo($step);\n\t\t\tskip_html.on(\"click\", () => {\n\t\t\t\tthis.skip_step(step);\n\t\t\t\tevent.stopPropagation();\n\t\t\t});\n\t\t}\n\t\t$step.on(\"click\", () => this.show_step(step));\n\t\t$step.appendTo(this.steps_wrapper);\n\n\t\treturn $step;\n\t}\n\n\tshow_step(step) {\n\t\tthis.active_step && this.active_step.$step.removeClass(\"active\");\n\n\t\tstep.$step.addClass(\"active\");\n\t\tthis.active_step = step;\n\n\t\tlet actions = {\n\t\t\t\"Watch Video\": (step) => this.show_video(step),\n\t\t\t\"Create Entry\": (step) => {\n\t\t\t\tif (step.is_complete) {\n\t\t\t\t\tfrappe.set_route(`/app/List/${step.reference_document}`);\n\t\t\t\t} else {\n\t\t\t\t\tif (step.show_full_form) {\n\t\t\t\t\t\tthis.create_entry(step);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.show_quick_entry(step);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"Show Form Tour\": (step) => this.show_form_tour(step),\n\t\t\t\"Update Settings\": (step) => this.update_settings(step),\n\t\t\t\"View Report\": (step) => this.open_report(step),\n\t\t\t\"Go to Page\": (step) => this.go_to_page(step),\n\t\t};\n\n\t\tconst toggle_content = () => {\n\t\t\tthis.step_body.empty();\n\t\t\tthis.step_footer.empty();\n\t\t\tset_description();\n\n\t\t\tif (step.intro_video_url) {\n\t\t\t\t$(`<button class=\"btn btn-primary btn-sm\">${__(\"Watch Tutorial\")}</button>`)\n\t\t\t\t\t.appendTo(this.step_footer)\n\t\t\t\t\t.on(\"click\", toggle_video);\n\t\t\t} else {\n\t\t\t\t$(\n\t\t\t\t\t`<button class=\"btn btn-primary btn-sm\">${__(\n\t\t\t\t\t\tstep.action_label || step.action\n\t\t\t\t\t)}</button>`\n\t\t\t\t)\n\t\t\t\t\t.appendTo(this.step_footer)\n\t\t\t\t\t.on(\"click\", () => actions[step.action](step));\n\t\t\t}\n\t\t};\n\n\t\tconst set_description = () => {\n\t\t\tlet content = step.description\n\t\t\t\t? frappe.markdown(step.description)\n\t\t\t\t: `<h1>${__(step.title)}</h1>`;\n\n\t\t\tif (step.action === \"Create Entry\") {\n\t\t\t\t// add a secondary action to view list\n\t\t\t\tcontent += `<p>\n\t\t\t\t\t<a href='/app/${frappe.router.slug(step.reference_document)}'>\n\t\t\t\t\t\t${__(\"Show {0} List\", [__(step.reference_document)])}</a>\n\t\t\t\t</p>`;\n\t\t\t}\n\n\t\t\tthis.step_body.html(content);\n\t\t};\n\n\t\tconst toggle_video = () => {\n\t\t\tthis.step_body.empty();\n\t\t\tthis.step_footer.empty();\n\n\t\t\tconst video = $(\n\t\t\t\t`<div class=\"video-player\" data-plyr-provider=\"youtube\" data-plyr-embed-id=\"${step.intro_video_url}\"></div>`\n\t\t\t);\n\t\t\tvideo.appendTo(this.step_body);\n\t\t\tlet plyr = new frappe.Plyr(video[0], {\n\t\t\t\thideControls: true,\n\t\t\t\tresetOnEnd: true,\n\t\t\t});\n\n\t\t\t$(\n\t\t\t\t`<button class=\"btn btn-primary btn-sm\">${__(\n\t\t\t\t\tstep.action_label || step.action\n\t\t\t\t)}</button>`\n\t\t\t)\n\t\t\t\t.appendTo(this.step_footer)\n\t\t\t\t.on(\"click\", () => {\n\t\t\t\t\tplyr.pause();\n\t\t\t\t\tactions[step.action](step);\n\t\t\t\t});\n\n\t\t\t// Fire only once, on hashchange\n\t\t\t$(window).one(\"hashchange\", () => {\n\t\t\t\tplyr.pause();\n\t\t\t});\n\n\t\t\t$(`<button class=\"btn btn-secondary ml-2 btn-sm\">${__(\"Back\")}</button>`)\n\t\t\t\t.appendTo(this.step_footer)\n\t\t\t\t.on(\"click\", toggle_content);\n\t\t};\n\n\t\ttoggle_content();\n\t}\n\n\tgo_to_page(step) {\n\t\tthis.mark_complete(step);\n\t\tfrappe.set_route(step.path).then(() => {\n\t\t\tlet message =\n\t\t\t\tstep.callback_message ||\n\t\t\t\t__(\"You can continue with the onboarding after exploring this page\");\n\t\t\tlet title = step.callback_title || __(\"Awesome Work\");\n\n\t\t\tlet msg_dialog = frappe.msgprint({\n\t\t\t\tmessage: message,\n\t\t\t\ttitle: title,\n\t\t\t\tprimary_action: {\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tmsg_dialog.hide();\n\t\t\t\t\t},\n\t\t\t\t\tlabel: () => __(\"Continue\"),\n\t\t\t\t},\n\t\t\t\twide: true,\n\t\t\t});\n\t\t});\n\t}\n\n\topen_report(step) {\n\t\tlet route = frappe.utils.generate_route({\n\t\t\tname: step.reference_report,\n\t\t\ttype: \"report\",\n\t\t\tis_query_report: step.report_type !== \"Report Builder\",\n\t\t\tdoctype: step.report_reference_doctype,\n\t\t});\n\n\t\tlet current_route = frappe.get_route();\n\n\t\tfrappe.set_route(route).then(() => {\n\t\t\tlet msg_dialog = frappe.msgprint({\n\t\t\t\tmessage: __(step.report_description),\n\t\t\t\ttitle: __(step.reference_report),\n\t\t\t\tprimary_action: {\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tfrappe.set_route(current_route).then(() => {\n\t\t\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmsg_dialog.hide();\n\t\t\t\t\t},\n\t\t\t\t\tlabel: () => __(\"Continue\"),\n\t\t\t\t},\n\t\t\t\tsecondary_action: {\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tmsg_dialog.hide();\n\t\t\t\t\t\tfrappe.set_route(current_route).then(() => {\n\t\t\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlabel: __(\"Go Back\"),\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tfrappe.msg_dialog.custom_onhide = () => this.mark_complete(step);\n\t\t});\n\t}\n\n\tshow_form_tour(step) {\n\t\tlet route;\n\t\tif (step.is_single) {\n\t\t\troute = frappe.router.slug(step.reference_document);\n\t\t} else {\n\t\t\troute = `${frappe.router.slug(step.reference_document)}/new`;\n\t\t}\n\n\t\tlet current_route = frappe.get_route();\n\n\t\tfrappe.route_hooks = {};\n\t\tfrappe.route_hooks.after_load = (frm) => {\n\t\t\tconst on_finish = () => {\n\t\t\t\tlet msg_dialog = frappe.msgprint({\n\t\t\t\t\tmessage: __(\"Let's take you back to onboarding\"),\n\t\t\t\t\ttitle: __(\"Onboarding complete\"),\n\t\t\t\t\tprimary_action: {\n\t\t\t\t\t\taction: () => {\n\t\t\t\t\t\t\tfrappe.set_route(current_route).then(() => {\n\t\t\t\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tmsg_dialog.hide();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabel: () => __(\"Continue\"),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\t\t\tconst tour_name = step.form_tour;\n\t\t\tfrm.tour.init({ tour_name, on_finish }).then(() => frm.tour.start());\n\t\t};\n\n\t\tfrappe.set_route(route);\n\t}\n\n\tupdate_settings(step) {\n\t\tlet current_route = frappe.get_route();\n\n\t\tfrappe.route_hooks = {};\n\t\tfrappe.route_hooks.after_load = (frm) => {\n\t\t\tfrm.scroll_to_field(step.field);\n\t\t\tfrm.doc.__unsaved = true;\n\t\t};\n\n\t\tfrappe.route_hooks.after_save = (frm) => {\n\t\t\tlet success = false;\n\t\t\tlet args = {};\n\n\t\t\tlet value = frm.doc[step.field];\n\t\t\tlet custom_onhide = null;\n\n\t\t\tif (value && step.value_to_validate == \"%\") success = true;\n\t\t\tif (value == step.value_to_validate) success = true;\n\t\t\tif (cstr(value) == cstr(step.value_to_validate)) success = true;\n\n\t\t\tif (success) {\n\t\t\t\targs.message = __(\"Let's take you back to onboarding\");\n\t\t\t\targs.title = __(\"Action Complete\");\n\t\t\t\targs.primary_action = {\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tfrappe.set_route(current_route).then(() => {\n\t\t\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlabel: __(\"Continue\"),\n\t\t\t\t};\n\n\t\t\t\tcustom_onhide = () => args.primary_action.action();\n\t\t\t} else {\n\t\t\t\targs.message = __(\"Looks like you didn't change the value\");\n\t\t\t\targs.title = __(\"Try Again\");\n\t\t\t\targs.secondary_action = {\n\t\t\t\t\taction: () => frappe.set_route(current_route),\n\t\t\t\t\tlabel: __(\"Go Back\"),\n\t\t\t\t};\n\n\t\t\t\targs.primary_action = {\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tfrappe.set_route(current_route).then(() => {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.skip_step(step);\n\t\t\t\t\t\t\t}, 300);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlabel: __(\"Skip Step\"),\n\t\t\t\t};\n\n\t\t\t\tcustom_onhide = () => args.secondary_action.action();\n\t\t\t}\n\n\t\t\tfrappe.msgprint(args);\n\t\t\tfrappe.msg_dialog.custom_onhide = () => custom_onhide();\n\t\t};\n\n\t\tfrappe.set_route(\"Form\", step.reference_document);\n\t}\n\n\tasync create_entry(step) {\n\t\tlet current_route = frappe.get_route();\n\t\tlet docname = await this.get_first_document(step.reference_document);\n\n\t\tfrappe.route_hooks = {};\n\t\tfrappe.route_hooks.after_load = (frm) => {\n\t\t\tconst on_finish = () => {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\tmessage: __(\"Awesome, now try making an entry yourself\"),\n\t\t\t\t\ttitle: __(\"Document Saved\"),\n\t\t\t\t\tprimary_action: {\n\t\t\t\t\t\taction: () => {\n\t\t\t\t\t\t\tfrappe.set_route(current_route).then(() => {\n\t\t\t\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabel: __(\"Continue\"),\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tfrappe.msg_dialog.custom_onhide = () => {\n\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t};\n\t\t\t};\n\t\t\tconst tour_name = step.form_tour;\n\t\t\tfrm.tour.init({ tour_name, on_finish }).then(() => frm.tour.start());\n\t\t};\n\n\t\tlet callback = () => {\n\t\t\tfrappe.msgprint({\n\t\t\t\tmessage: __(\"Let's take you back to onboarding\"),\n\t\t\t\ttitle: __(\"Action Complete\"),\n\t\t\t\tprimary_action: {\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tfrappe.set_route(current_route).then(() => {\n\t\t\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlabel: __(\"Continue\"),\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tfrappe.msg_dialog.custom_onhide = () => {\n\t\t\t\tthis.mark_complete(step);\n\t\t\t};\n\t\t};\n\n\t\tif (step.is_submittable) {\n\t\t\tfrappe.route_hooks.after_save = () => {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\tmessage: __(\"Submit this document to complete this step.\"),\n\t\t\t\t\ttitle: __(\"Document Saved\"),\n\t\t\t\t});\n\t\t\t};\n\t\t\tfrappe.route_hooks.after_submit = callback;\n\t\t} else {\n\t\t\tfrappe.route_hooks.after_save = callback;\n\t\t}\n\n\t\tfrappe.set_route(\"Form\", step.reference_document, docname);\n\t}\n\n\tshow_quick_entry(step) {\n\t\tlet current_route = frappe.get_route_str();\n\t\tfrappe.ui.form.make_quick_entry(\n\t\t\tstep.reference_document,\n\t\t\t() => {\n\t\t\t\tif (frappe.get_route_str() != current_route) {\n\t\t\t\t\tlet success_dialog = frappe.msgprint({\n\t\t\t\t\t\tmessage: __(\"Let's take you back to onboarding\"),\n\t\t\t\t\t\ttitle: __(\"Document Saved\"),\n\t\t\t\t\t\tprimary_action: {\n\t\t\t\t\t\t\taction: () => {\n\t\t\t\t\t\t\t\tsuccess_dialog.hide();\n\t\t\t\t\t\t\t\tfrappe.set_route(current_route).then(() => {\n\t\t\t\t\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlabel: __(\"Continue\"),\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tfrappe.msg_dialog.custom_onhide = () => {\n\t\t\t\t\t\tfrappe.set_route(current_route).then(() => {\n\t\t\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\tmessage: __(\"Let us continue with the onboarding\"),\n\t\t\t\t\t\ttitle: __(\"Document Saved\"),\n\t\t\t\t\t});\n\t\t\t\t\tthis.mark_complete(step);\n\t\t\t\t}\n\t\t\t},\n\t\t\tnull,\n\t\t\tnull,\n\t\t\ttrue\n\t\t);\n\t}\n\n\tshow_video(step) {\n\t\tfrappe.help.show_video(step.video_url, step.title);\n\t\tthis.mark_complete(step);\n\t}\n\n\tmark_complete(step) {\n\t\tlet $step = step.$step;\n\n\t\tlet callback = () => {\n\t\t\tstep.is_complete = true;\n\t\t\t$step.removeClass(\"skipped\");\n\t\t\t$step.addClass(\"complete\");\n\t\t};\n\n\t\tthis.update_step_status(step, \"is_complete\", 1, callback);\n\t}\n\n\tskip_step(step) {\n\t\tlet $step = step.$step;\n\n\t\tlet callback = () => {\n\t\t\tstep.is_skipped = true;\n\t\t\t$step.removeClass(\"complete\");\n\t\t\t$step.removeClass(\"pending\");\n\t\t\t$step.addClass(\"skipped\");\n\t\t};\n\n\t\tthis.update_step_status(step, \"is_skipped\", 1, callback);\n\t}\n\n\tupdate_step_status(step, status, value, callback) {\n\t\tlet icon_class = {\n\t\t\tis_complete: \"complete\",\n\t\t\tis_skipped: \"skipped\",\n\t\t};\n\t\t//  Clear any hooks\n\t\tfrappe.route_hooks = {};\n\n\t\tfrappe\n\t\t\t.call(\"frappe.desk.desktop.update_onboarding_step\", {\n\t\t\t\tname: step.name,\n\t\t\t\tfield: status,\n\t\t\t\tvalue: value,\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tcallback();\n\n\t\t\t\tstep.$step\n\t\t\t\t\t.removeClass(\"pending\")\n\t\t\t\t\t.removeClass(\"complete\")\n\t\t\t\t\t.removeClass(\"skipped\")\n\t\t\t\t\t.addClass(icon_class[status]);\n\n\t\t\t\tlet pending = this.steps.filter((step) => {\n\t\t\t\t\treturn !(step.is_complete || step.is_skipped);\n\t\t\t\t});\n\n\t\t\t\tif (pending.length == 0) {\n\t\t\t\t\tthis.show_success();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tshow_success() {\n\t\tlet success_message = this.success || __(\"You seem good to go!\");\n\t\tlet success_state_image =\n\t\t\tthis.success_state_image || \"/assets/frappe/images/ui-states/success-color.png\";\n\t\tlet documentation = \"\";\n\t\tif (this.docs_url) {\n\t\t\tdocumentation = __(\n\t\t\t\t'Congratulations on completing the module setup. If you want to learn more you can refer to the documentation <a target=\"_blank\" href=\"{0}\">here</a>.',\n\t\t\t\t[this.docs_url]\n\t\t\t);\n\t\t}\n\n\t\tlet success = $(`<div class=\"text-center onboarding-success\">\n\t\t\t\t\t<img src=\"${success_state_image}\" alt=\"Success State\" class=\"zoom-in success-state\">\n\t\t\t\t\t<h3>${success_message}</h3>\n\t\t\t\t\t<div class=\"text-muted\">${documentation}</div>\n\t\t\t\t\t<button class=\"btn btn-primary btn-sm\">${__(\"Continue\")}</button>\n\t\t\t</div>\n\t\t`);\n\n\t\tsuccess.find(\".btn\").on(\"click\", () => this.delete());\n\n\t\tthis.step_preview.empty();\n\t\tsuccess.appendTo(this.step_preview);\n\t}\n\n\tset_body() {\n\t\tthis.widget.addClass(\"onboarding-widget-box\");\n\t\tif (this.is_dismissed()) {\n\t\t\tthis.widget.hide();\n\t\t} else {\n\t\t\tthis.make_body();\n\t\t}\n\t}\n\n\tis_dismissed() {\n\t\tif (this.in_customize_mode) return false;\n\n\t\tlet dismissed = JSON.parse(localStorage.getItem(\"dismissed-onboarding\") || \"{}\");\n\t\tif (Object.keys(dismissed).includes(this.title)) {\n\t\t\tlet last_hidden = new Date(dismissed[this.title]);\n\t\t\tlet today = new Date();\n\t\t\tlet diff = frappe.datetime.get_hour_diff(today, last_hidden);\n\t\t\treturn diff < 24;\n\t\t}\n\t\treturn false;\n\t}\n\n\tset_actions() {\n\t\tif (this.in_customize_mode) return;\n\n\t\tthis.action_area.empty();\n\t\tconst dismiss = $(\n\t\t\t`<div class=\"small\" style=\"cursor:pointer;\">${__(\n\t\t\t\t\"Dismiss\",\n\t\t\t\tnull,\n\t\t\t\t\"Stop showing the onboarding widget.\"\n\t\t\t)}</div>`\n\t\t);\n\t\tdismiss.on(\"click\", () => {\n\t\t\tlet dismissed = JSON.parse(localStorage.getItem(\"dismissed-onboarding\") || \"{}\");\n\t\t\tdismissed[this.title] = frappe.datetime.now_datetime();\n\n\t\t\tlocalStorage.setItem(\"dismissed-onboarding\", JSON.stringify(dismissed));\n\t\t\tthis.delete(true, true);\n\t\t\tthis.widget.closest(\".ce-block\").hide();\n\t\t});\n\t\tdismiss.appendTo(this.action_area);\n\t}\n\n\tget_onboarding_data() {\n\t\treturn frappe.model\n\t\t\t.with_doc(\"Module Onboarding\", this.onboarding_name)\n\t\t\t.then((onboarding_doc) => {\n\t\t\t\tif (onboarding_doc) {\n\t\t\t\t\tthis.onboarding_doc = onboarding_doc;\n\t\t\t\t\tthis.label = onboarding_doc.label;\n\t\t\t\t\tthis.title = onboarding_doc.title || __(\"Let's Get Started\");\n\t\t\t\t\tthis.subtitle = onboarding_doc.subtitle;\n\t\t\t\t\tthis.success = onboarding_doc.success;\n\t\t\t\t\tthis.docs_url = onboarding_doc.docs_url;\n\t\t\t\t\tthis.user_can_dismiss = onboarding_doc.user_can_dismiss;\n\t\t\t\t\tconst method =\n\t\t\t\t\t\t\"frappe.desk.doctype.onboarding_step.onboarding_step.get_onboarding_steps\";\n\t\t\t\t\treturn frappe\n\t\t\t\t\t\t.xcall(method, { ob_steps: onboarding_doc.steps })\n\t\t\t\t\t\t.then((steps) => {\n\t\t\t\t\t\t\tthis.steps = steps;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tasync get_first_document(doctype) {\n\t\tconst { message } = await frappe.db.get_value(\n\t\t\t\"Form Tour\",\n\t\t\t{ reference_doctype: doctype },\n\t\t\t[\"first_document\"]\n\t\t);\n\t\tlet docname;\n\n\t\tif (message.first_document) {\n\t\t\tawait frappe.db.get_list(doctype, { order_by: \"creation\" }).then((res) => {\n\t\t\t\tif (Array.isArray(res) && res.length) docname = res[0].name;\n\t\t\t});\n\t\t}\n\n\t\treturn docname || \"new\";\n\t}\n}\n", "import OnboardingWidget from '../../../../../frappe/frappe/public/js/frappe/widgets/onboarding_widget.js'\n\nclass MyOnboardingWidget extends OnboardingWidget {\n\tshow_step(step){\n\t\tstep.description = __(step.description);\n\t\tstep.title = __(step.title);\n    \tsuper.show_step(step);\n\t}\n}\n\nfrappe.widget.widget_factory.onboarding = MyOnboardingWidget\n", "import Widget from \"./base_widget.js\";\n\nfrappe.provide(\"frappe.utils\");\n\nexport default class NumberCardWidget extends Widget {\n\tconstructor(opts) {\n\t\topts.shadow = true;\n\t\tsuper(opts);\n\t}\n\n\tget_config() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tnumber_card_name: this.number_card_name,\n\t\t\tlabel: this.label,\n\t\t\tcolor: this.color,\n\t\t\thidden: this.hidden,\n\t\t};\n\t}\n\n\trefresh() {\n\t\tthis.set_body();\n\t}\n\n\tset_body() {\n\t\tthis.widget.addClass(\"number-widget-box\");\n\t\tthis.make_card();\n\t}\n\n\tmake_card() {\n\t\tfrappe.model.with_doc(\"Number Card\", this.number_card_name || this.name).then((card) => {\n\t\t\tif (!card) {\n\t\t\t\tif (this.document_type) {\n\t\t\t\t\tfrappe.run_serially([\n\t\t\t\t\t\t() => this.create_number_card(),\n\t\t\t\t\t\t() => this.render_card(),\n\t\t\t\t\t]);\n\t\t\t\t} else {\n\t\t\t\t\t// widget doesn't exist so delete\n\t\t\t\t\tthis.delete(false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.card_doc = card;\n\t\t\t\tthis.render_card();\n\t\t\t}\n\n\t\t\tthis.set_events();\n\t\t});\n\t}\n\n\tcreate_number_card() {\n\t\tthis.set_doc_args();\n\t\treturn frappe\n\t\t\t.xcall(\"frappe.desk.doctype.number_card.number_card.create_number_card\", {\n\t\t\t\targs: this.card_doc,\n\t\t\t})\n\t\t\t.then((doc) => {\n\t\t\t\tthis.name = doc.name;\n\t\t\t\tthis.card_doc = doc;\n\t\t\t\tthis.widget.attr(\"data-widget-name\", this.name);\n\t\t\t});\n\t}\n\n\tset_events() {\n\t\t$(this.body).click(() => {\n\t\t\tif (this.in_customize_mode || this.card_doc.type == \"Custom\") return;\n\t\t\tthis.set_route();\n\t\t});\n\t}\n\n\tset_route() {\n\t\tconst is_document_type = this.card_doc.type !== \"Report\";\n\t\tconst name = is_document_type ? this.card_doc.document_type : this.card_doc.report_name;\n\t\tconst route = frappe.utils.generate_route({\n\t\t\tname: name,\n\t\t\ttype: is_document_type ? \"doctype\" : \"report\",\n\t\t\tis_query_report: !is_document_type,\n\t\t});\n\n\t\tif (is_document_type) {\n\t\t\tconst filters = JSON.parse(this.card_doc.filters_json);\n\t\t\tfrappe.route_options = filters.reduce((acc, filter) => {\n\t\t\t\treturn Object.assign(acc, {\n\t\t\t\t\t[`${filter[0]}.${filter[1]}`]: [filter[2], filter[3]],\n\t\t\t\t});\n\t\t\t}, {});\n\t\t}\n\n\t\tfrappe.set_route(route);\n\t}\n\n\tset_doc_args() {\n\t\tthis.card_doc = Object.assign(\n\t\t\t{},\n\t\t\t{\n\t\t\t\tdocument_type: this.document_type,\n\t\t\t\tlabel: this.label,\n\t\t\t\tfunction: this.function,\n\t\t\t\taggregate_function_based_on: this.aggregate_function_based_on,\n\t\t\t\tcolor: this.color,\n\t\t\t\tfilters_json: this.stats_filter,\n\t\t\t}\n\t\t);\n\t}\n\n\tget_settings(type) {\n\t\tthis.filters = this.get_filters();\n\t\tconst settings_map = {\n\t\t\tCustom: {\n\t\t\t\tmethod: this.card_doc.method,\n\t\t\t\targs: {\n\t\t\t\t\tfilters: this.filters,\n\t\t\t\t},\n\t\t\t\tget_number: (res) => this.get_number_for_custom_card(res),\n\t\t\t},\n\t\t\tReport: {\n\t\t\t\tmethod: \"frappe.desk.query_report.run\",\n\t\t\t\targs: {\n\t\t\t\t\treport_name: this.card_doc.report_name,\n\t\t\t\t\tfilters: this.filters,\n\t\t\t\t\tignore_prepared_report: 1,\n\t\t\t\t},\n\t\t\t\tget_number: (res) => this.get_number_for_report_card(res),\n\t\t\t},\n\t\t\t\"Document Type\": {\n\t\t\t\tmethod: \"frappe.desk.doctype.number_card.number_card.get_result\",\n\t\t\t\targs: {\n\t\t\t\t\tdoc: this.card_doc,\n\t\t\t\t\tfilters: this.filters,\n\t\t\t\t},\n\t\t\t\tget_number: (res) => this.get_number_for_doctype_card(res),\n\t\t\t},\n\t\t};\n\t\treturn settings_map[type];\n\t}\n\n\tget_filters() {\n\t\tconst filters = frappe.dashboard_utils.get_all_filters(this.card_doc);\n\t\treturn filters;\n\t}\n\n\trender_card() {\n\t\tthis.prepare_actions();\n\t\tthis.set_title();\n\t\tthis.set_loading_state();\n\n\t\tif (!this.card_doc.type) {\n\t\t\tthis.card_doc.type = \"Document Type\";\n\t\t}\n\n\t\tthis.settings = this.get_settings(this.card_doc.type);\n\n\t\tfrappe.run_serially([() => this.render_number(), () => this.render_stats()]);\n\t}\n\n\tset_loading_state() {\n\t\t$(this.body).html(`<div class=\"number-card-loading text-muted\">\n\t\t\t${__(\"Loading...\")}\n\t\t</div>`);\n\t}\n\n\tget_number() {\n\t\treturn frappe.xcall(this.settings.method, this.settings.args).then((res) => {\n\t\t\treturn this.settings.get_number(res);\n\t\t});\n\t}\n\n\tget_number_for_custom_card(res) {\n\t\tif (typeof res === \"object\") {\n\t\t\tthis.number = res.value;\n\t\t\tthis.set_formatted_number(res);\n\t\t} else {\n\t\t\tthis.formatted_number = res;\n\t\t}\n\t}\n\n\tget_number_for_doctype_card(res) {\n\t\tthis.number = res;\n\t\tif (this.card_doc.function !== \"Count\") {\n\t\t\treturn frappe.model.with_doctype(this.card_doc.document_type, () => {\n\t\t\t\tconst based_on_df = frappe.meta.get_docfield(\n\t\t\t\t\tthis.card_doc.document_type,\n\t\t\t\t\tthis.card_doc.aggregate_function_based_on\n\t\t\t\t);\n\t\t\t\tthis.set_formatted_number(based_on_df);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.formatted_number = res;\n\t\t}\n\t}\n\n\tget_number_for_report_card(res) {\n\t\tconst field = this.card_doc.report_field;\n\t\tconst vals = res.result.reduce((acc, col) => {\n\t\t\tcol[field] && acc.push(col[field]);\n\t\t\treturn acc;\n\t\t}, []);\n\t\tconst col = res.columns.find((col) => col.fieldname == field);\n\t\tthis.number = frappe.report_utils.get_result_of_fn(this.card_doc.report_function, vals);\n\t\tthis.set_formatted_number(col);\n\t}\n\n\tset_formatted_number(df) {\n\t\tconst default_country = frappe.sys_defaults.country;\n\t\tconst shortened_number = frappe.utils.shorten_number(this.number, default_country, 5);\n\t\tlet number_parts = shortened_number.split(\" \");\n\n\t\tconst symbol = number_parts[1] || \"\";\n\t\tconst formatted_number = $(frappe.format(number_parts[0], df)).text();\n\n\t\tthis.formatted_number = formatted_number + \" \" + __(symbol);\n\t}\n\n\trender_number() {\n\t\treturn this.get_number().then(() => {\n\t\t\t$(this.body).html(`<div class=\"widget-content\">\n\t\t\t\t<div class=\"number\" style=\"color:${this.card_doc.color}\">${this.formatted_number}</div>\n\t\t\t\t</div>`);\n\t\t});\n\t}\n\n\trender_stats() {\n\t\tif (this.card_doc.type !== \"Document Type\") {\n\t\t\treturn;\n\t\t}\n\n\t\tlet caret_html = \"\";\n\t\tlet color_class = \"\";\n\n\t\treturn this.get_percentage_stats().then(() => {\n\t\t\tif (this.percentage_stat == 0 || this.percentage_stat == undefined) {\n\t\t\t\tcolor_class = \"grey-stat\";\n\t\t\t} else if (this.percentage_stat > 0) {\n\t\t\t\tcaret_html = `<span class=\"indicator-pill-round green\">\n\t\t\t\t\t\t${frappe.utils.icon(\"arrow-up-right\", \"xs\")}\n\t\t\t\t\t</span>`;\n\t\t\t\tcolor_class = \"green-stat\";\n\t\t\t} else {\n\t\t\t\tcaret_html = `<span class=\"indicator-pill-round red\">\n\t\t\t\t\t\t${frappe.utils.icon(\"arrow-down-left\", \"xs\")}\n\t\t\t\t\t</span>`;\n\t\t\t\tcolor_class = \"red-stat\";\n\t\t\t}\n\n\t\t\tconst stats_qualifier_map = {\n\t\t\t\tDaily: __(\"since yesterday\"),\n\t\t\t\tWeekly: __(\"since last week\"),\n\t\t\t\tMonthly: __(\"since last month\"),\n\t\t\t\tYearly: __(\"since last year\"),\n\t\t\t};\n\t\t\tconst stats_qualifier = stats_qualifier_map[this.card_doc.stats_time_interval];\n\n\t\t\tlet stat = (() => {\n\t\t\t\tif (this.percentage_stat == undefined) return NaN;\n\t\t\t\tconst parts = this.percentage_stat.split(\" \");\n\t\t\t\tconst symbol = parts[1] || \"\";\n\t\t\t\treturn Math.abs(parts[0]) + \" \" + symbol;\n\t\t\t})();\n\n\t\t\t// don't show stats if not valid number - skip showing `NaN %` in card\n\t\t\tif (isNaN(stat)) return;\n\n\t\t\t$(this.body).find(\".widget-content\").append(`<div class=\"card-stats ${color_class}\">\n\t\t\t\t<span class=\"percentage-stat-area\">\n\t\t\t\t\t${caret_html}\n\t\t\t\t\t<span class=\"percentage-stat\">\n\t\t\t\t\t\t${stat} %\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"stat-period text-muted\">\n\t\t\t\t\t${stats_qualifier}\n\t\t\t\t</span>\n\t\t\t</div>`);\n\t\t});\n\t}\n\n\tget_percentage_stats() {\n\t\treturn frappe\n\t\t\t.xcall(\"frappe.desk.doctype.number_card.number_card.get_percentage_difference\", {\n\t\t\t\tdoc: this.card_doc,\n\t\t\t\tfilters: this.filters,\n\t\t\t\tresult: this.number,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tif (res !== undefined) {\n\t\t\t\t\tthis.percentage_stat = frappe.utils.shorten_number(res);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tprepare_actions() {\n\t\tif (this.in_customize_mode) return;\n\n\t\tlet actions = [\n\t\t\t{\n\t\t\t\tlabel: __(\"Refresh\"),\n\t\t\t\taction: \"action-refresh\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tthis.render_card();\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Edit\"),\n\t\t\t\taction: \"action-edit\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tlet number_card = this.number_card_name || this.name;\n\t\t\t\t\tfrappe.set_route(\"Form\", \"Number Card\", number_card);\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tthis.set_card_actions(actions);\n\t}\n\n\tset_card_actions(actions) {\n\t\t/* eslint-disable indent */\n\t\tthis.card_actions = $(`<div class=\"card-actions dropdown pull-right\">\n\t\t\t\t<a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n\t\t\t\t...\n\t\t\t\t</a>\n\t\t\t\t<ul class=\"dropdown-menu\" style=\"max-height: 300px; overflow-y: auto;\">\n\t\t\t\t\t${actions\n\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t(action) =>\n\t\t\t\t\t\t\t\t`<li class=\"dropdown-item\">\n\t\t\t\t\t\t\t\t\t<a data-action=\"${action.action}\">${action.label}</a>\n\t\t\t\t\t\t\t\t</li>`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.join(\"\")}\n\t\t\t\t</ul>\n\t\t\t</div>`);\n\t\t/* eslint-disable indent */\n\n\t\tthis.card_actions.find(\"a[data-action]\").each((i, o) => {\n\t\t\tconst action = o.dataset.action;\n\t\t\t$(o).click(actions.find((a) => a.action === action));\n\t\t});\n\n\t\tthis.action_area.html(this.card_actions);\n\t}\n}\n", "import NumberCardWidget from '../../../../../frappe/frappe/public/js/frappe/widgets/number_card_widget.js'\n\nclass MyNumberCardWidget extends NumberCardWidget {\n\tset_title() {\n\t\t$(this.title_field).html(`<div class=\"number-label\">${__(this.card_doc.label)}</div>`);\n\t}\n}\n\nfrappe.widget.widget_factory.number_card = MyNumberCardWidget", "import Widget from \"./base_widget.js\";\n\nfrappe.provide(\"frappe.widget.utils\");\nfrappe.provide(\"frappe.dashboards\");\nfrappe.provide(\"frappe.dashboards.chart_sources\");\n\nexport default class ChartWidget extends Widget {\n\tconstructor(opts) {\n\t\topts.shadow = true;\n\t\tsuper(opts);\n\t\tthis.height = this.height || 240;\n\t}\n\n\tget_config() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tchart_name: this.chart_name,\n\t\t\tlabel: this.label,\n\t\t\thidden: this.hidden,\n\t\t\twidth: this.width,\n\t\t};\n\t}\n\n\trefresh() {\n\t\tdelete this.dashboard_chart;\n\t\tthis.set_body();\n\t\tthis.make_chart();\n\t}\n\n\tset_chart_title() {\n\t\tconst max_chars = this.widget.width() < 600 ? 40 : 60;\n\t\tthis.set_title(max_chars);\n\t}\n\n\tset_body() {\n\t\tthis.widget.addClass(\"dashboard-widget-box\");\n\t\tif (this.width == \"Full\") {\n\t\t\tthis.widget.addClass(\"full-width\");\n\t\t}\n\t}\n\n\tsetup_container() {\n\t\tthis.body.empty();\n\n\t\tif (this.chart_doc.type == \"Heatmap\") {\n\t\t\tthis.setup_heatmap_container();\n\t\t}\n\n\t\tthis.loading = $(\n\t\t\t`<div class=\"chart-loading-state text-muted\" style=\"height: ${this.height}px;\">${__(\n\t\t\t\t\"Loading...\"\n\t\t\t)}</div>`\n\t\t);\n\t\tthis.loading.appendTo(this.body);\n\n\t\tthis.empty = $(\n\t\t\t`<div class=\"chart-loading-state text-muted\" style=\"height: ${this.height}px;\">${__(\n\t\t\t\t\"No Data\"\n\t\t\t)}</div>`\n\t\t);\n\t\tthis.empty.hide().appendTo(this.body);\n\n\t\tthis.chart_wrapper = $(`<div></div>`);\n\t\tthis.chart_wrapper.appendTo(this.body);\n\n\t\tthis.$heatmap_legend = null;\n\t\tthis.set_chart_title();\n\t}\n\n\tsetup_heatmap_container() {\n\t\tthis.widget.addClass(\"heatmap-chart\");\n\t\tthis.widget.removeClass(\"full-width\").addClass(\"full-width\");\n\t\tthis.width = \"Full\";\n\t}\n\n\tset_summary() {\n\t\tif (!this.$summary) {\n\t\t\tthis.$summary = $(`<div class=\"report-summary\"></div>`).hide();\n\t\t\tthis.head.after(this.$summary);\n\t\t} else {\n\t\t\tthis.$summary.empty();\n\t\t}\n\n\t\tthis.summary.forEach((summary) => {\n\t\t\tfrappe.utils.build_summary_item(summary).appendTo(this.$summary);\n\t\t});\n\t\tthis.summary.length && this.$summary.show();\n\t}\n\n\tmake_chart() {\n\t\tthis.get_settings().then(() => {\n\t\t\tif (!this.settings) {\n\t\t\t\tthis.deleted = true;\n\t\t\t\tthis.widget.remove();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.chart_settings) {\n\t\t\t\tthis.chart_settings = {};\n\t\t\t}\n\t\t\tthis.setup_container();\n\t\t\tif (!this.in_customize_mode) {\n\t\t\t\tthis.action_area.empty();\n\t\t\t\tthis.prepare_chart_actions();\n\n\t\t\t\tif (this.chart_doc.timeseries && this.chart_doc.chart_type !== \"Custom\") {\n\t\t\t\t\tthis.render_time_series_filters();\n\t\t\t\t}\n\t\t\t}\n\t\t\tfrappe.run_serially([\n\t\t\t\t() => this.prepare_chart_object(),\n\t\t\t\t() => this.setup_filter_button(),\n\t\t\t\t() => this.fetch_and_update_chart(),\n\t\t\t]);\n\t\t});\n\t}\n\n\trender_time_series_filters() {\n\t\tlet filters = this.get_time_series_filters();\n\t\tfrappe.dashboard_utils.render_chart_filters(filters, \"chart-actions\", this.action_area, 0);\n\t}\n\n\tget_time_series_filters() {\n\t\tlet filters;\n\t\tif (this.chart_doc.type == \"Heatmap\") {\n\t\t\tfilters = [\n\t\t\t\t{\n\t\t\t\t\tlabel: this.chart_settings.heatmap_year || this.chart_doc.heatmap_year,\n\t\t\t\t\toptions: frappe.dashboard_utils.get_years_since_creation(\n\t\t\t\t\t\tfrappe.boot.user.creation\n\t\t\t\t\t),\n\t\t\t\t\taction: (selected_item) => {\n\t\t\t\t\t\tthis.selected_heatmap_year = selected_item;\n\t\t\t\t\t\tthis.save_chart_config_for_user({\n\t\t\t\t\t\t\theatmap_year: this.selected_heatmap_year,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fetch_and_update_chart();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t} else {\n\t\t\tfilters = [\n\t\t\t\t{\n\t\t\t\t\tlabel: this.chart_settings.time_interval || this.chart_doc.time_interval,\n\t\t\t\t\toptions: [\"Yearly\", \"Quarterly\", \"Monthly\", \"Weekly\", \"Daily\"],\n\t\t\t\t\ticon: \"calendar\",\n\t\t\t\t\tclass: \"time-interval-filter\",\n\t\t\t\t\taction: (selected_item) => {\n\t\t\t\t\t\tthis.selected_time_interval = selected_item;\n\t\t\t\t\t\tthis.save_chart_config_for_user({\n\t\t\t\t\t\t\ttime_interval: this.selected_time_interval,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.fetch_and_update_chart();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: this.chart_settings.timespan || this.chart_doc.timespan,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t\"Select Date Range\",\n\t\t\t\t\t\t\"Last Year\",\n\t\t\t\t\t\t\"Last Quarter\",\n\t\t\t\t\t\t\"Last Month\",\n\t\t\t\t\t\t\"Last Week\",\n\t\t\t\t\t],\n\t\t\t\t\tclass: \"timespan-filter\",\n\t\t\t\t\taction: (selected_item) => {\n\t\t\t\t\t\tthis.selected_timespan = selected_item;\n\n\t\t\t\t\t\tif (this.selected_timespan === \"Select Date Range\") {\n\t\t\t\t\t\t\tthis.render_date_range_field();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.selected_from_date = null;\n\t\t\t\t\t\t\tthis.selected_to_date = null;\n\t\t\t\t\t\t\tif (this.date_field_wrapper) {\n\t\t\t\t\t\t\t\tthis.date_field_wrapper.hide();\n\n\t\t\t\t\t\t\t\t// Title maybe hidden becuase of date range fields\n\t\t\t\t\t\t\t\t// in half width chart\n\t\t\t\t\t\t\t\tthis.title_field.show();\n\t\t\t\t\t\t\t\tthis.subtitle_field.show();\n\t\t\t\t\t\t\t\tthis.head.css(\"flex-direction\", \"row\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.save_chart_config_for_user({\n\t\t\t\t\t\t\t\ttimespan: this.selected_timespan,\n\t\t\t\t\t\t\t\tfrom_date: null,\n\t\t\t\t\t\t\t\tto_date: null,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.fetch_and_update_chart();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\t\treturn filters;\n\t}\n\n\tfetch_and_update_chart() {\n\t\tthis.args = {\n\t\t\ttimespan: this.selected_timespan || this.chart_settings.timespan,\n\t\t\ttime_interval: this.selected_time_interval || this.chart_settings.time_interval,\n\t\t\tfrom_date: this.selected_from_date || this.chart_settings.from_date,\n\t\t\tto_date: this.selected_to_date || this.chart_settings.to_date,\n\t\t\theatmap_year: this.selected_heatmap_year || this.chart_settings.heatmap_year,\n\t\t};\n\n\t\tthis.fetch(this.filters, true, this.args).then((data) => {\n\t\t\tif (this.chart_doc.chart_type == \"Report\") {\n\t\t\t\tthis.report_result = data;\n\t\t\t\tthis.summary = data.report_summary;\n\t\t\t\tdata = this.get_report_chart_data(data);\n\t\t\t}\n\n\t\t\tthis.update_chart_object();\n\t\t\tthis.data = data;\n\t\t\tthis.render();\n\t\t});\n\t}\n\n\trender_date_range_field() {\n\t\tif (!this.date_field_wrapper || !this.date_field_wrapper.is(\":visible\")) {\n\t\t\tthis.date_field_wrapper = $(\n\t\t\t\t`<div class=\"dashboard-date-field pull-right\"></div>`\n\t\t\t).insertAfter(this.action_area.find(\".timespan-filter\"));\n\n\t\t\tif (this.width !== \"Full\" && this.widget.width() < 700) {\n\t\t\t\tthis.title_field.hide();\n\t\t\t\tthis.subtitle_field.hide();\n\t\t\t\tthis.head.css(\"flex-direction\", \"row-reverse\");\n\t\t\t}\n\n\t\t\tthis.date_range_field = frappe.ui.form.make_control({\n\t\t\t\tdf: {\n\t\t\t\t\tfieldtype: \"DateRange\",\n\t\t\t\t\tfieldname: \"from_date\",\n\t\t\t\t\tplaceholder: \"Date Range\",\n\t\t\t\t\tinput_class: \"input-xs\",\n\t\t\t\t\tdefault: [this.chart_settings.from_date, this.chart_settings.to_date],\n\t\t\t\t\tvalue: [this.chart_settings.from_date, this.chart_settings.to_date],\n\t\t\t\t\treqd: 1,\n\t\t\t\t\tchange: () => {\n\t\t\t\t\t\tlet selected_date_range = this.date_range_field.get_value();\n\t\t\t\t\t\tthis.selected_from_date = selected_date_range[0];\n\t\t\t\t\t\tthis.selected_to_date = selected_date_range[1];\n\n\t\t\t\t\t\tif (selected_date_range && selected_date_range.length == 2) {\n\t\t\t\t\t\t\tthis.save_chart_config_for_user({\n\t\t\t\t\t\t\t\ttimespan: this.selected_timespan,\n\t\t\t\t\t\t\t\tfrom_date: this.selected_from_date,\n\t\t\t\t\t\t\t\tto_date: this.selected_to_date,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.fetch_and_update_chart();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tparent: this.date_field_wrapper,\n\t\t\t\trender_input: 1,\n\t\t\t});\n\n\t\t\tthis.date_range_field.$input.focus();\n\t\t}\n\t}\n\n\tget_report_chart_data(result) {\n\t\tif (result.chart && this.chart_doc.use_report_chart) {\n\t\t\treturn result.chart.data;\n\t\t} else {\n\t\t\tlet y_fields = [];\n\t\t\tthis.chart_doc.y_axis.map((field) => {\n\t\t\t\ty_fields.push(field.y_field);\n\t\t\t});\n\n\t\t\tlet chart_fields = {\n\t\t\t\ty_fields: y_fields,\n\t\t\t\tx_field: this.chart_doc.x_field,\n\t\t\t\tchart_type: this.chart_doc.type,\n\t\t\t\tcolor: this.chart_doc.color,\n\t\t\t};\n\t\t\tlet columns = result.columns.map((col) => {\n\t\t\t\treturn frappe.report_utils.prepare_field_from_column(col);\n\t\t\t});\n\n\t\t\tlet data = frappe.report_utils.make_chart_options(columns, result, chart_fields).data;\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tprepare_chart_actions() {\n\t\tlet actions = [\n\t\t\t{\n\t\t\t\tlabel: __(\"Refresh\"),\n\t\t\t\taction: \"action-refresh\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tdelete this.dashboard_chart;\n\t\t\t\t\tthis.make_chart();\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Edit\"),\n\t\t\t\taction: \"action-edit\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tfrappe.set_route(\"Form\", \"Dashboard Chart\", this.chart_doc.name);\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __(\"Reset Chart\"),\n\t\t\t\taction: \"action-reset\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tthis.reset_chart();\n\t\t\t\t\tdelete this.dashboard_chart;\n\t\t\t\t\tthis.make_chart();\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tif (this.chart_doc.document_type) {\n\t\t\tactions.push({\n\t\t\t\tlabel: __(\"{0} List\", [this.chart_doc.document_type]),\n\t\t\t\taction: \"action-list\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tfrappe.set_route(\"List\", this.chart_doc.document_type);\n\t\t\t\t},\n\t\t\t});\n\t\t} else if (this.chart_doc.chart_type === \"Report\") {\n\t\t\tactions.push({\n\t\t\t\tlabel: __(\"{0} Report\", [this.chart_doc.report_name]),\n\t\t\t\taction: \"action-list\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tfrappe.set_route(\"query-report\", this.chart_doc.report_name, this.filters);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tthis.set_chart_actions(actions);\n\t}\n\n\tsetup_filter_button() {\n\t\tif (this.in_customize_mode) return;\n\n\t\tthis.is_document_type =\n\t\t\tthis.chart_doc.chart_type !== \"Report\" && this.chart_doc.chart_type !== \"Custom\";\n\n\t\tthis.filter_button = $(\n\t\t\t`<div class=\"filter-chart btn btn-xs pull-right\">\n\t\t\t\t${frappe.utils.icon(\"filter\", \"sm\")}\n\t\t\t</div>`\n\t\t);\n\n\t\tthis.filter_button.appendTo(this.action_area);\n\n\t\tif (this.is_document_type) {\n\t\t\tif (this.filter_group) {\n\t\t\t\tthis.filters = this.filter_group.get_filters();\n\t\t\t}\n\t\t\tthis.create_filter_group_and_add_filters();\n\t\t} else {\n\t\t\tthis.filter_button.on(\"click\", () => {\n\t\t\t\tlet fields;\n\n\t\t\t\tfrappe.dashboard_utils\n\t\t\t\t\t.get_filters_for_chart_type(this.chart_doc)\n\t\t\t\t\t.then((filters) => {\n\t\t\t\t\t\tif (!this.is_document_type) {\n\t\t\t\t\t\t\tif (!filters) {\n\t\t\t\t\t\t\t\tfields = [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\t\t\t\t\t\t\toptions: __(\"No Filters Set\"),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfields = filters\n\t\t\t\t\t\t\t\t\t.filter((df) => df.fieldname)\n\t\t\t\t\t\t\t\t\t.map((df) => {\n\t\t\t\t\t\t\t\t\t\tObject.assign(df, df.dashboard_config || {});\n\t\t\t\t\t\t\t\t\t\treturn df;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfields = [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfieldtype: \"HTML\",\n\t\t\t\t\t\t\t\t\tfieldname: \"filter_area\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setup_filter_dialog(fields);\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tsetup_filter_dialog(fields) {\n\t\tlet me = this;\n\t\tlet dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Set Filters for {0}\", [this.chart_doc.chart_name]),\n\t\t\tfields: fields,\n\t\t\tprimary_action: function () {\n\t\t\t\tlet values = this.get_values();\n\t\t\t\tif (values) {\n\t\t\t\t\tthis.hide();\n\t\t\t\t\tme.filters = values;\n\t\t\t\t\tme.save_chart_config_for_user({ filters: me.filters });\n\t\t\t\t\tme.fetch_and_update_chart();\n\t\t\t\t}\n\t\t\t},\n\t\t\tprimary_action_label: \"Set\",\n\t\t});\n\n\t\tdialog.show();\n\n\t\tif (this.chart_doc.chart_type == \"Report\") {\n\t\t\t//Set query report object so that it can be used while fetching filter values in the report\n\t\t\tfrappe.query_report = new frappe.views.QueryReport({ filters: dialog.fields_list });\n\t\t\tfrappe.query_reports[this.chart_doc.report_name].onload &&\n\t\t\t\tfrappe.query_reports[this.chart_doc.report_name].onload(frappe.query_report);\n\t\t}\n\t\tdialog.set_values(this.filters);\n\t}\n\n\treset_chart() {\n\t\tthis.save_chart_config_for_user(null, 1);\n\t\tthis.chart_settings = {};\n\t\tthis.filters = null;\n\t\tthis.selected_time_interval = null;\n\t\tthis.selected_timespan = null;\n\t\tthis.selected_heatmap_year = null;\n\t}\n\n\tsave_chart_config_for_user(config, reset = 0) {\n\t\tObject.assign(this.chart_settings, config);\n\t\tfrappe.xcall(\n\t\t\t\"frappe.desk.doctype.dashboard_settings.dashboard_settings.save_chart_config\",\n\t\t\t{\n\t\t\t\treset: reset,\n\t\t\t\tconfig: this.chart_settings,\n\t\t\t\tchart_name: this.chart_doc.chart_name,\n\t\t\t}\n\t\t);\n\t}\n\n\tcreate_filter_group_and_add_filters() {\n\t\tthis.filter_group = new frappe.ui.FilterGroup({\n\t\t\tdoctype: this.chart_doc.document_type,\n\t\t\tparent_doctype: this.chart_doc.parent_document_type,\n\t\t\tfilter_button: this.filter_button,\n\t\t\ton_change: () => {\n\t\t\t\tthis.filters = this.filter_group.get_filters();\n\t\t\t\tthis.save_chart_config_for_user({\n\t\t\t\t\tfilters: this.filters,\n\t\t\t\t});\n\t\t\t\tthis.fetch_and_update_chart();\n\t\t\t},\n\t\t});\n\n\t\tthis.filters &&\n\t\t\tfrappe.model.with_doctype(this.chart_doc.document_type, () => {\n\t\t\t\tthis.filter_group.add_filters_to_filter_group(this.filters);\n\t\t\t});\n\t}\n\n\tset_chart_actions(actions) {\n\t\t/* eslint-disable indent */\n\t\tthis.chart_actions = $(`<div class=\"chart-actions dropdown pull-right\">\n\t\t\t<button data-toggle=\"dropdown\"\n\t\t\t\taria-haspopup=\"true\"aria-expanded=\"false\"\n\t\t\t\tclass=\"btn btn-xs btn-secondary chart-menu\"\n\t\t\t>\n\t\t\t\t<svg class=\"icon icon-sm\">\n\t\t\t\t\t<use href=\"#icon-dot-horizontal\">\n\t\t\t\t\t</use>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t\t<ul class=\"dropdown-menu dropdown-menu-right\">\n\t\t\t\t${actions\n\t\t\t\t\t.map(\n\t\t\t\t\t\t(action) =>\n\t\t\t\t\t\t\t`<li><a class=\"dropdown-item\" data-action=\"${action.action}\">${action.label}</a></li>`\n\t\t\t\t\t)\n\t\t\t\t\t.join(\"\")}\n\t\t\t</ul>\n\t\t</div>\n\t\t`);\n\t\t/* eslint-enable indent */\n\n\t\tthis.chart_actions.find(\"a[data-action]\").each((i, o) => {\n\t\t\tconst action = o.dataset.action;\n\t\t\t$(o).click(actions.find((a) => a.action === action));\n\t\t});\n\t\tthis.chart_actions.appendTo(this.action_area);\n\t}\n\n\tfetch(filters, refresh = false, args) {\n\t\tlet method = this.settings.method;\n\n\t\tif (this.chart_doc.chart_type == \"Report\") {\n\t\t\targs = {\n\t\t\t\treport_name: this.chart_doc.report_name,\n\t\t\t\tfilters: filters,\n\t\t\t\tignore_prepared_report: 1,\n\t\t\t};\n\t\t} else {\n\t\t\targs = {\n\t\t\t\tchart_name: this.chart_doc.name,\n\t\t\t\tfilters: filters,\n\t\t\t\trefresh: refresh ? 1 : 0,\n\t\t\t\ttime_interval: args && args.time_interval ? args.time_interval : null,\n\t\t\t\ttimespan: args && args.timespan ? args.timespan : null,\n\t\t\t\tfrom_date: args && args.from_date ? args.from_date : null,\n\t\t\t\tto_date: args && args.to_date ? args.to_date : null,\n\t\t\t\theatmap_year: args && args.heatmap_year ? args.heatmap_year : null,\n\t\t\t};\n\t\t}\n\t\treturn frappe.xcall(method, args);\n\t}\n\n\tasync get_source_doctype() {\n\t\tif (this.chart_doc.document_type) {\n\t\t\treturn this.chart_doc.document_type;\n\t\t}\n\t\tif (this.chart_doc.chart_type == \"Report\" && this.chart_doc.report_name) {\n\t\t\treturn await frappe.db\n\t\t\t\t.get_value(\"Report\", this.chart_doc.report_name, \"ref_doctype\")\n\t\t\t\t.then((r) => r.message.ref_doctype);\n\t\t}\n\t}\n\n\tasync render() {\n\t\tlet setup_dashboard_chart = () => {\n\t\t\tconst chart_args = this.get_chart_args();\n\n\t\t\tif (!this.dashboard_chart) {\n\t\t\t\tthis.dashboard_chart = frappe.utils.make_chart(this.chart_wrapper[0], chart_args);\n\t\t\t} else {\n\t\t\t\tthis.dashboard_chart.update(this.data);\n\t\t\t}\n\t\t};\n\n\t\tif (!this.data || !this.data.labels || !Object.keys(this.data).length) {\n\t\t\tthis.chart_wrapper.hide();\n\t\t\tthis.loading.hide();\n\t\t\tthis.$summary && this.$summary.hide();\n\t\t\tthis.empty.show();\n\t\t} else {\n\t\t\tthis.loading.hide();\n\t\t\tthis.empty.hide();\n\t\t\tthis.chart_wrapper.show();\n\t\t\tthis.chart_doc.document_type = await this.get_source_doctype();\n\n\t\t\tif (this.chart_doc.document_type) {\n\t\t\t\tfrappe.model.with_doctype(this.chart_doc.document_type, setup_dashboard_chart);\n\t\t\t} else {\n\t\t\t\tsetup_dashboard_chart();\n\t\t\t}\n\n\t\t\tthis.width == \"Full\" && this.summary && this.set_summary();\n\t\t\tthis.chart_doc.type == \"Heatmap\" && this.render_heatmap_legend();\n\t\t}\n\t}\n\n\tget_chart_args() {\n\t\tlet colors = this.get_chart_colors();\n\t\tlet fieldtype, options;\n\n\t\tconst chart_type_map = {\n\t\t\tLine: \"line\",\n\t\t\tBar: \"bar\",\n\t\t\tPercentage: \"percentage\",\n\t\t\tPie: \"pie\",\n\t\t\tDonut: \"donut\",\n\t\t\tHeatmap: \"heatmap\",\n\t\t};\n\n\t\tlet max_slices = [\"Pie\", \"Donut\"].includes(this.chart_doc.type) ? 6 : 9;\n\t\tlet chart_args = {\n\t\t\tdata: this.data,\n\t\t\ttype: chart_type_map[this.chart_doc.type],\n\t\t\tcolors: colors,\n\t\t\theight: this.height,\n\t\t\tmaxSlices: this.chart_doc.number_of_groups || max_slices,\n\t\t\taxisOptions: {\n\t\t\t\txIsSeries: this.chart_doc.timeseries,\n\t\t\t\tshortenYAxisNumbers: 1,\n\t\t\t},\n\t\t};\n\n\t\tif (this.chart_doc.document_type) {\n\t\t\tlet doctype_meta = frappe.get_meta(this.chart_doc.document_type);\n\t\t\tlet field = doctype_meta.fields.find(\n\t\t\t\t(x) => x.fieldname == this.chart_doc.value_based_on\n\t\t\t);\n\t\t\tfieldtype = field?.fieldtype;\n\t\t\toptions = field?.options;\n\t\t}\n\n\t\tif (this.chart_doc.chart_type == \"Report\" && this.report_result?.chart?.fieldtype) {\n\t\t\tfieldtype = this.report_result.chart.fieldtype;\n\t\t\toptions = this.report_result.chart.options;\n\t\t}\n\n\t\tchart_args.tooltipOptions = {\n\t\t\tformatTooltipY: (value) =>\n\t\t\t\tfrappe.format(\n\t\t\t\t\tvalue,\n\t\t\t\t\t{ fieldtype, options },\n\t\t\t\t\t{ always_show_decimals: true, inline: true }\n\t\t\t\t),\n\t\t};\n\n\t\tif (this.chart_doc.type == \"Heatmap\") {\n\t\t\tconst heatmap_year = parseInt(\n\t\t\t\tthis.selected_heatmap_year ||\n\t\t\t\t\tthis.chart_settings.heatmap_year ||\n\t\t\t\t\tthis.chart_doc.heatmap_year\n\t\t\t);\n\t\t\tchart_args.data.start = new Date(`${heatmap_year}-01-01`);\n\t\t\tchart_args.data.end = new Date(`${heatmap_year + 1}-01-01`);\n\t\t}\n\n\t\tlet set_options = (options) => {\n\t\t\tlet custom_options = JSON.parse(options);\n\t\t\tfor (let key in custom_options) {\n\t\t\t\tif (\n\t\t\t\t\ttypeof chart_args[key] === \"object\" &&\n\t\t\t\t\ttypeof custom_options[key] === \"object\"\n\t\t\t\t) {\n\t\t\t\t\tchart_args[key] = Object.assign(chart_args[key], custom_options[key]);\n\t\t\t\t} else {\n\t\t\t\t\tchart_args[key] = custom_options[key];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (this.custom_options) {\n\t\t\tset_options(this.custom_options);\n\t\t}\n\n\t\tif (this.chart_doc.custom_options) {\n\t\t\tset_options(this.chart_doc.custom_options);\n\t\t}\n\n\t\treturn chart_args;\n\t}\n\n\tget_chart_colors() {\n\t\tlet colors = [];\n\t\tif (this.chart_doc.y_axis.length) {\n\t\t\tthis.chart_doc.y_axis.map((field) => {\n\t\t\t\tcolors.push(field.color);\n\t\t\t});\n\t\t} else if ([\"Line\", \"Bar\"].includes(this.chart_doc.type)) {\n\t\t\tcolors = [this.chart_doc.color || []];\n\t\t} else if (this.chart_doc.type == \"Heatmap\") {\n\t\t\tcolors = [];\n\t\t}\n\n\t\treturn colors;\n\t}\n\n\trender_heatmap_legend() {\n\t\tlet legend_colors;\n\n\t\tlet set_legend_color = (options) => {\n\t\t\tlegend_colors = JSON.parse(options).colors;\n\t\t};\n\n\t\tif (this.custom_options) {\n\t\t\tset_legend_color(this.custom_options);\n\t\t}\n\n\t\tif (this.chart_doc.custom_options) {\n\t\t\tset_legend_color(this.chart_doc.custom_options);\n\t\t}\n\n\t\tif (!this.$heatmap_legend && this.widget.width() > 991) {\n\t\t\tthis.$heatmap_legend = $(`\n\t\t\t\t<div class=\"heatmap-legend\">\n\t\t\t\t\t<ul class=\"legend-colors\">\n\t\t\t\t\t\t<li style=\"background-color: ${legend_colors[0] || \"#ebedf0\"}\"></li>\n\t\t\t\t\t\t<li style=\"background-color: ${legend_colors[1] || \"#c6e48b\"}\"></li>\n\t\t\t\t\t\t<li style=\"background-color: ${legend_colors[2] || \"#7bc96f\"}\"></li>\n\t\t\t\t\t\t<li style=\"background-color: ${legend_colors[3] || \"#239a3b\"}\"></li>\n\t\t\t\t\t\t<li style=\"background-color: ${legend_colors[4] || \"#196127\"}\"></li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div class=\"legend-label\">\n\t\t\t\t\t\t<div style=\"margin-bottom: 45px\">${__(\"Less\")}</div>\n\t\t\t\t\t\t<div>${__(\"More\")}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t`);\n\t\t\tthis.body.append(this.$heatmap_legend);\n\t\t}\n\t}\n\n\tupdate_last_synced() {\n\t\tif (!this.chart_doc.last_synced_on) {\n\t\t\treturn;\n\t\t}\n\t\tlet last_synced_text = __(\"Last synced {0}\", [\n\t\t\tcomment_when(this.chart_doc.last_synced_on),\n\t\t]);\n\t\tthis.subtitle_field.html(last_synced_text);\n\t}\n\n\tupdate_chart_object() {\n\t\tfrappe.db.get_doc(\"Dashboard Chart\", this.chart_doc.name).then((doc) => {\n\t\t\tthis.chart_doc = doc;\n\t\t\tthis.update_last_synced();\n\t\t});\n\t}\n\n\tprepare_chart_object() {\n\t\tif (this.chart_doc.type == \"Heatmap\" && !this.chart_doc.heatmap_year) {\n\t\t\tthis.chart_doc.heatmap_year = frappe.dashboard_utils.get_year(\n\t\t\t\tfrappe.datetime.now_date()\n\t\t\t);\n\t\t}\n\n\t\treturn this.set_chart_filters();\n\t}\n\n\tset_chart_filters() {\n\t\tlet user_saved_filters = this.chart_settings.filters || null;\n\t\tlet chart_saved_filters = frappe.dashboard_utils.get_all_filters(this.chart_doc);\n\n\t\tif (this.chart_doc.chart_type == \"Report\") {\n\t\t\treturn frappe.dashboard_utils\n\t\t\t\t.get_filters_for_chart_type(this.chart_doc)\n\t\t\t\t.then((filters) => {\n\t\t\t\t\tchart_saved_filters = this.update_default_date_filters(\n\t\t\t\t\t\tfilters,\n\t\t\t\t\t\tchart_saved_filters\n\t\t\t\t\t);\n\t\t\t\t\tthis.filters =\n\t\t\t\t\t\tfrappe.utils.parse_array(user_saved_filters) ||\n\t\t\t\t\t\tfrappe.utils.parse_array(this.filters) ||\n\t\t\t\t\t\tfrappe.utils.parse_array(chart_saved_filters);\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.filters =\n\t\t\t\tfrappe.utils.parse_array(user_saved_filters) ||\n\t\t\t\tfrappe.utils.parse_array(this.filters) ||\n\t\t\t\tfrappe.utils.parse_array(chart_saved_filters);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\n\tupdate_default_date_filters(report_filters, chart_filters) {\n\t\tif (report_filters) {\n\t\t\treport_filters.map((f) => {\n\t\t\t\tif ([\"Date\", \"DateRange\"].includes(f.fieldtype) && f.default) {\n\t\t\t\t\tif (f.reqd || chart_filters[f.fieldname]) {\n\t\t\t\t\t\tchart_filters[f.fieldname] = f.default;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn chart_filters;\n\t}\n\n\tget_settings() {\n\t\treturn frappe.model.with_doc(\"Dashboard Chart\", this.chart_name).then((chart_doc) => {\n\t\t\tif (chart_doc) {\n\t\t\t\tthis.chart_doc = chart_doc;\n\t\t\t\tif (this.chart_doc.chart_type == \"Custom\") {\n\t\t\t\t\t// custom source\n\t\t\t\t\tif (frappe.dashboards.chart_sources[this.chart_doc.source]) {\n\t\t\t\t\t\tthis.settings = frappe.dashboards.chart_sources[this.chart_doc.source];\n\t\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst method =\n\t\t\t\t\t\t\t\"frappe.desk.doctype.dashboard_chart_source.dashboard_chart_source.get_config\";\n\t\t\t\t\t\treturn frappe\n\t\t\t\t\t\t\t.xcall(method, { name: this.chart_doc.source })\n\t\t\t\t\t\t\t.then((config) => {\n\t\t\t\t\t\t\t\tfrappe.dom.eval(config);\n\t\t\t\t\t\t\t\tthis.settings =\n\t\t\t\t\t\t\t\t\tfrappe.dashboards.chart_sources[this.chart_doc.source];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else if (this.chart_doc.chart_type == \"Report\") {\n\t\t\t\t\tthis.settings = {\n\t\t\t\t\t\tmethod: \"frappe.desk.query_report.run\",\n\t\t\t\t\t};\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t} else {\n\t\t\t\t\tthis.settings = {\n\t\t\t\t\t\tmethod: \"frappe.desk.doctype.dashboard_chart.dashboard_chart.get\",\n\t\t\t\t\t};\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n", "import ChartWidget from '../../../../../frappe/frappe/public/js/frappe/widgets/chart_widget.js'\n\nclass MyChartWidget extends ChartWidget {\n\tset_chart_title() {\n        this.label = __(this.label || this.name);\n        super.set_chart_title();\n    }\n}\n\nfrappe.widget.widget_factory.chart = MyChartWidget\n\nfrappe.dashboard_utils.render_chart_filters = function(filters, button_class, container, append) {\n        //console.log('override renderchartfilter');\n\t\tfilters.forEach(filter => {\n\t\t\tlet icon_html = '', filter_class = '';\n\n\t\t\tif (filter.icon) {\n\t\t\t\ticon_html = frappe.utils.icon(filter.icon);\n\t\t\t}\n\n\t\t\tif (filter.class) {\n\t\t\t\tfilter_class = filter.class;\n\t\t\t}\n            //fisher \u5728filter.label\u524D\u52A0\u4E86\u7FFB\u8BD1\u51FD\u6570\n\t\t\tlet chart_filter_html =\n\t\t\t\t`<div class=\"${button_class} ${filter_class} btn-group dropdown pull-right\">\n\t\t\t\t\t<a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n\t\t\t\t\t\t<button class=\"btn btn-secondary btn-xs\">\n\t\t\t \t\t\t\t${icon_html}\n\t\t\t\t\t\t\t<span class=\"filter-label\">${__(filter.label)}</span>\n\t\t\t\t\t\t\t${frappe.utils.icon('select', 'xs')}\n\t\t\t\t\t\t</button>\n\t\t\t\t</a>`;\n\t\t\tlet options_html;\n            //fisher \u4EE5\u4E0B\u4E24\u4E2AOption\u524D\u52A0\u4E86\u7FFB\u8BD1\u51FD\u6570\uFF0C\u4F7F\u7528selected_item \u539F\u503C\u53D6\u4EE3\u5DF2\u7FFB\u8BD1\u7684\u6807\u7B7E    \n\t\t\tif (filter.fieldnames) {\n\t\t\t\toptions_html = filter.options.map((option, i) =>\n\t\t\t\t\t`<li>\n\t\t\t\t\t\t<a class=\"dropdown-item\" data-fieldname=\"${filter.fieldnames[i]}\" selected_item=\"${option}\">${__(option)}</a>\n\t\t\t\t\t</li>`).join('');\n\t\t\t} else {\n\t\t\t\toptions_html = filter.options.map( option => `<li><a class=\"dropdown-item\" selected_item=\"${option}\">${__(option)}</a></li>`).join('');\n\t\t\t}\n\n\t\t\tlet dropdown_html = chart_filter_html + `<ul class=\"dropdown-menu\">${options_html}</ul></div>`;\n\t\t\tlet $chart_filter = $(dropdown_html);\n\n\t\t\tif (append) {\n\t\t\t\t$chart_filter.prependTo(container);\n\t\t\t} else $chart_filter.appendTo(container);\n\n\t\t\t$chart_filter.find('.dropdown-menu').on('click', 'li a', (e) => {\n\t\t\t\tlet $el = $(e.currentTarget);\n\t\t\t\tlet fieldname;\n\t\t\t\tif ($el.attr('data-fieldname')) {\n\t\t\t\t\tfieldname = $el.attr('data-fieldname');\n\t\t\t\t}\n\t\t\t\t//fisher \u4F7F\u7528selected_item \u539F\u503C\u53D6\u4EE3\u5DF2\u7FFB\u8BD1\u7684\u6807\u7B7E,\u4E0B\u4E00\u884C\u7684selected_text\u4E5F\u52A0\u4E0A\u7FFB\u8BD1\u51FD\u6570 \t\n\t\t\t\tlet selected_item = $el.attr('selected_item');\t// $el.text();\n\t\t\t\t$el.parents(`.${button_class}`).find('.filter-label').text(__(selected_item));\n\t\t\t\tfilter.action(selected_item, fieldname);\n\t\t\t});\n\t\t});\n\n\t}\n", "// \u65B0\u52A0\u4E00\u4E2A\u81EA\u52A8\u5B8C\u6210\u7684\u9009\u62E9\u6846\nfrappe.ui.Page = class MyPage  extends frappe.ui.Page{\n    add_auto_select(label, options, change) {\n        let field = this.add_field({label:label, fieldtype:\"Autocomplete\", options: options, change: change});\n\t\treturn field.$wrapper.find(\"input\").empty();\n\t}\n}", "//fisher \u5F97\u5236\u4E86\u539Ffuzzy_search,\u5C06\u8FD9\u4E00\u884C\u53BB\u6389\u7FFB\u8BD1\u51FD\u6570var item = _item || '';\nfrappe.search.utils._fuzzy_search = function(keywords, _item) {\n    \t// Returns 10 for case-perfect contain, 0 for not found\n\t\t//  \t9 for perfect contain,\n\t\t//  \t0 - 6 for fuzzy contain\n\n\t\t// **Specific use-case step**\n\t\tkeywords = keywords || '';\n\t\tvar item = _item || '';\n\t\tvar item_without_hyphen = item.replace(/-/g, \" \");\n\n\t\tvar item_length = item.length;\n\t\tvar query_length = keywords.length;\n\t\tvar length_ratio = query_length / item_length;\n\t\tvar max_skips = 3, max_mismatch_len = 2;\n\n\t\tif (query_length > item_length) {\n\t\t\treturn 0;\n\t\t}\n\n\t\t// check for perfect string matches or\n\t\t// matches that start with the keyword\n\t\tif ([item, item_without_hyphen].includes(keywords)\n\t\t\t\t|| [item, item_without_hyphen].some((txt) => txt.toLowerCase().indexOf(keywords) === 0)) {\n\t\t\treturn 10 + length_ratio;\n\t\t}\n\n\t\tif (item.indexOf(keywords) !== -1 && keywords !== keywords.toLowerCase()) {\n\t\t\treturn 9 + length_ratio;\n\t\t}\n\n\t\titem = item.toLowerCase();\n\t\tkeywords = keywords.toLowerCase();\n\n\t\tif (item.indexOf(keywords) !== -1) {\n\t\t\treturn 8 + length_ratio;\n\t\t}\n\n\t\tvar skips = 0, mismatches = 0;\n\t\touter: for (var i = 0, j = 0; i < query_length; i++) {\n\t\t\tif (mismatches !== 0) skips++;\n\t\t\tif (skips > max_skips) return 0;\n\t\t\tvar k_ch = keywords.charCodeAt(i);\n\t\t\tmismatches = 0;\n\t\t\twhile (j < item_length) {\n\t\t\t\tif (item.charCodeAt(j++) === k_ch) {\n\t\t\t\t\tcontinue outer;\n\t\t\t\t}\n\t\t\t\tif(++mismatches > max_mismatch_len)  return 0 ;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Since indexOf didn't pass, there will be atleast 1 skip\n\t\t// hence no divide by zero, but just to be safe\n\t\tif((skips + mismatches) > 0) {\n\t\t\treturn (5 + length_ratio)/(skips + mismatches);\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n}    \n\n//fisher \u652F\u6301\u4E2D\u6587\u6216\u82F1\u6587\u68C0\u7D22\nfrappe.search.utils.fuzzy_search = function(keywords, _item) {\n    let item = __(_item || '');\n    let result = this._fuzzy_search(keywords, item);\n    if (result === 0 && frappe.boot.lang != 'en') {\n        result = this._fuzzy_search(keywords, _item);\n    }\n    return result;\n}\n\n\n", "\n// \u4FEE\u6539link\u7C7B\u578B\u6570\u636E\u7684\u7FFB\u8BD1\uFF0C\u4E3B\u8981\u5C31\u662F\u6DFB\u52A0\u4E86\u4E00\u4E2A\u65B9\u6CD5set_formatted_input\uFF0C\u7ED9input\u8BBE\u7F6E\u503C\u7684\u65F6\u5019\u8BBE\u7F6E\u7FFB\u8BD1\u8FC7\u540E\u7684\u503C\n// \u7136\u540E\u5728\u83B7\u53D6\u7126\u70B9\u548C\u5931\u53BB\u7126\u70B9\u7684\u65F6\u5019\u53D6\u503C\u903B\u8F91\u4FEE\u6539\u4E00\u4E0B\nfrappe.ui.form.ControlLink = class ControlLink extends frappe.ui.form.ControlLink {\n\tmake_input() {\t\t\n\t\tvar me = this;\n\t\t// line-height: 1 is for Mozilla 51, shows extra padding otherwise\n\t\t$('<div class=\"link-field ui-front\" style=\"position: relative; line-height: 1;\">\\\n\t\t\t<input type=\"text\" class=\"input-with-feedback form-control data-value\">\\\n\t\t\t<span class=\"link-btn\">\\\n\t\t\t\t<a class=\"btn-open no-decoration\" title=\"' + __(\"Open Link\") + '\">\\\n\t\t\t\t\t<i class=\"octicon octicon-arrow-right\"></i></a>\\\n\t\t\t</span>\\\n\t\t</div>').prependTo(this.input_area);\n\t\tthis.$input_area = $(this.input_area);\n\t\tthis.$input = this.$input_area.find('input');\n\t\tthis.$link = this.$input_area.find('.link-btn');\n\t\tthis.$link_open = this.$link.find('.btn-open');\n\t\tthis.set_input_attributes();\n\t\tthis.$input.on(\"focus\", function() {\n\t\t\tsetTimeout(function() {\n\t\t\t\tif(me.$input.val() && me.get_options()) {\n                    let doctype = me.get_options();\n\t\t\t\t\t// \u4FEE\u6539\u53D6\u503C\u903B\u8F91\uFF0C\u76F4\u63A5\u4ECEdoc\u4E2D\u53D6\uFF0C\u4E0D\u4ECEinput\u6846\u4E2D\u53D6\u4E86\n\t\t\t\t\tlet real_value = me.doc ? me.doc[me.df['fieldname']] : me.$input.attr(\"data-value\")\n\t\t\t\t\tlet name = real_value ? real_value : me.get_input_value();\n\t\t\t\t\tme.$link.toggle(true);\n\t\t\t\t\tme.$link_open.attr('href', frappe.utils.get_form_link(doctype, name));\n\t\t\t\t}\n\n\t\t\t\tif(!me.$input.val()) {\n\t\t\t\t\tme.$input.val(\"\").trigger(\"input\");\n\t\t\t\t}\n\t\t\t}, 500);\n\t\t});\n\t\tthis.$input.on(\"blur\", function() {\n\t\t\t// if this disappears immediately, the user's click\n\t\t\t// does not register, hence timeout\n\t\t\tsetTimeout(function() {\n\t\t\t\tme.$link.toggle(false);\n\t\t\t}, 500);\n\t\t});\n\t\tthis.$input.attr('data-target', this.df.options);\n\t\tthis.input = this.$input.get(0);\n\t\tthis.has_input = true;\n\t\tthis.translate_values = true;\n\t\tthis.setup_buttons();\n\t\tthis.setup_awesomeplete();\n    }\n\n    setup_awesomeplete() {\n\t\tvar me = this;\n\n\t\tthis.$input.cache = {};\n\n\t\tthis.awesomplete = new Awesomplete(me.input, {\n\t\t\tminChars: 0,\n\t\t\tmaxItems: 99,\n\t\t\tautoFirst: true,\n\t\t\tlist: [],\n\t\t\tdata: function (item) {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: item.label || item.value,\n\t\t\t\t\tvalue: item.value\n\t\t\t\t};\n\t\t\t},\n\t\t\tfilter: function() {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\titem: function (item) {\n\t\t\t\tvar d = this.get_item(item.value);\n\t\t\t\tif(!d.label) {\td.label = d.value; }\n\n\t\t\t\tvar _label = (me.translate_values) ? __(d.label) : d.label;\n\t\t\t\tvar html = d.html || \"<strong>\" + _label + \"</strong>\";\n\t\t\t\tif(d.description && d.value!==d.description) {\n\t\t\t\t\thtml += '<br><span class=\"small\">' + __(d.description) + '</span>';\n\t\t\t\t}\n\t\t\t\treturn $('<li></li>')\n\t\t\t\t\t.data('item.autocomplete', d)\n\t\t\t\t\t.prop('aria-selected', 'false')\n\t\t\t\t\t.html('<a><p>' + html + '</p></a>')\n\t\t\t\t\t.get(0);\n\t\t\t},\n\t\t\tsort: function() {\n\t\t\t\treturn 0;\n\t\t\t},\n\t\t\t// \u6DFB\u52A0\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u8BA9\u5B83\u9009\u62E9\u4E4B\u540E\u4E0D\u81EA\u52A8\u7ED9\u4ED6\u8D4B\u503C\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u672C\u6765\u5C31\u4F1A\u7ED9\u8F93\u5165\u6846\u8D4B\u503C\u7684\uFF0C\u9632\u6B62\u591A\u6B21\u8D4B\u503C\u95EA\u4E00\u4E0B\n\t\t\treplace: function(text) {\n\t\t\t\t\n\t\t\t}\n\t\t});\n\n\t\tthis.$input.on(\"input\", frappe.utils.debounce(function(e) {\n\t\t\tme.$link.toggle(false);\n\t\t\tvar doctype = me.get_options();\n\t\t\tif(!doctype) return;\n\t\t\tif (!me.$input.cache[doctype]) {\n\t\t\t\tme.$input.cache[doctype] = {};\n\t\t\t}\n\n\t\t\tvar term = e.target.value;\n\n\t\t\tif (me.$input.cache[doctype][term]!=null) {\n\t\t\t\t// immediately show from cache\n\t\t\t\tme.awesomplete.list = me.$input.cache[doctype][term];\n\t\t\t}\n\t\t\tvar args = {\n\t\t\t\t'txt': term,\n\t\t\t\t'doctype': doctype,\n\t\t\t\t'ignore_user_permissions': me.df.ignore_user_permissions,\n\t\t\t\t'reference_doctype': me.get_reference_doctype() || \"\"\n\t\t\t};\n\n\t\t\tme.set_custom_query(args);\n\n\t\t\tfrappe.call({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tmethod:'frappe.desk.search.search_link',\n\t\t\t\tno_spinner: true,\n\t\t\t\targs: args,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!me.$input.is(\":focus\")) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tr.results = me.merge_duplicates(r.results);\n\n\t\t\t\t\t// show filter description in awesomplete\n\t\t\t\t\tif (args.filters) {\n\t\t\t\t\t\tlet filter_string = me.get_filter_description(args.filters);\n\t\t\t\t\t\tif (filter_string) {\n\t\t\t\t\t\t\tconst title = filter_string.replace(/<b>/g,'').replace(/[</b>]/g,'');\n\t\t\t\t\t\t\tr.results.push({\n\t\t\t\t\t\t\t\thtml: `<span class=\"text-muted\" style=\"line-height: 1.5\" title=\"${title}\">${filter_string}</span>`,\n\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\taction: () => {}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!me.df.only_select) {\n\t\t\t\t\t\tif(frappe.model.can_create(doctype)) {\n\t\t\t\t\t\t\t// new item\n\t\t\t\t\t\t\tr.results.push({\n\t\t\t\t\t\t\t\tlabel: \"<span class='text-primary link-option'>\"\n\t\t\t\t\t\t\t\t\t+ \"<i class='fa fa-plus' style='margin-right: 5px;'></i> \"\n\t\t\t\t\t\t\t\t\t+ __(\"Create a new {0}\", [__(me.get_options())])\n\t\t\t\t\t\t\t\t\t+ \"</span>\",\n\t\t\t\t\t\t\t\tvalue: \"create_new__link_option\",\n\t\t\t\t\t\t\t\taction: me.new_doc\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// advanced search\n\n\t\t\t\t\t\tif (locals && locals['DocType']) {\n\t\t\t\t\t\t\t// not applicable in web forms\n\t\t\t\t\t\t\tr.results.push({\n\t\t\t\t\t\t\t\tlabel: \"<span class='text-primary link-option'>\"\n\t\t\t\t\t\t\t\t\t+ \"<i class='fa fa-search' style='margin-right: 5px;'></i> \"\n\t\t\t\t\t\t\t\t\t+ __(\"Advanced Search\")\n\t\t\t\t\t\t\t\t\t+ \"</span>\",\n\t\t\t\t\t\t\t\tvalue: \"advanced_search__link_option\",\n\t\t\t\t\t\t\t\taction: me.open_advanced_search\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tme.$input.cache[doctype][term] = r.results;\n\t\t\t\t\tme.awesomplete.list = me.$input.cache[doctype][term];\n\t\t\t\t}\n\t\t\t});\n\t\t}, 500));\n\n\t\tthis.$input.on(\"blur\", function() {\n\t\t\tif(me.selected) {\n\t\t\t\tme.selected = false;\n\t\t\t\treturn;\n            }\n            // \u4FEE\u6539\u53D6\u503C\u5BF9\u6BD4\u903B\u8F91\uFF0C \u8F93\u5165\u6846\u7684\u503C\u548C\u7FFB\u8BD1\u8FC7\u540E\u7684doc\u4E2D\u503C\u4E0D\u4E00\u6837\uFF0C\u5C31\u53D6\u8F93\u5165\u6846\u7684\u503C\uFF0C\u4E00\u6837\u5C31\u53D6doc\u4E2D\u7684\u503C\n\t\t\tvar input_value = me.get_input_value();\n\t\t\tvar real_value = me.doc ? me.doc[me.df['fieldname']] : me.$input.attr(\"data-value\")\n\t\t\tvar value = __(real_value) != input_value ? input_value : real_value\n\t\t\tif(value!==me.last_value) {\n\t\t\t\tme.parse_validate_and_set_in_model(value);\n\t\t\t}\n\t\t});\n\n\t\tthis.$input.on(\"awesomplete-open\", function() {\n\t\t\tme.$wrapper.css({\"z-index\": 100});\n\t\t\tme.$wrapper.find('ul').css({\"z-index\": 100});\n\t\t\tme.autocomplete_open = true;\n\t\t});\n\n\t\tthis.$input.on(\"awesomplete-close\", function() {\n\t\t\tme.$wrapper.css({\"z-index\": 1});\n\t\t\tme.autocomplete_open = false;\n\t\t});\n\n\t\tthis.$input.on(\"awesomplete-select\", function(e) {\n\t\t\tvar o = e.originalEvent;\n\t\t\tvar item = me.awesomplete.get_item(o.text.value);\n\n\t\t\tme.autocomplete_open = false;\n\n\t\t\t// prevent selection on tab\n\t\t\tvar TABKEY = 9;\n\t\t\tif(e.keyCode === TABKEY) {\n\t\t\t\te.preventDefault();\n\t\t\t\tme.awesomplete.close();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif(item.action) {\n\t\t\t\titem.value = \"\";\n\t\t\t\titem.action.apply(me);\n\t\t\t}\n\n\t\t\t// if remember_last_selected is checked in the doctype against the field,\n\t\t\t// then add this value\n\t\t\t// to defaults so you do not need to set it again\n\t\t\t// unless it is changed.\n\t\t\tif(me.df.remember_last_selected_value) {\n\t\t\t\tfrappe.boot.user.last_selected_values[me.df.options] = item.value;\n\t\t\t}\n\t\t\tme.parse_validate_and_set_in_model(item.value);\n\t\t\t\n\t\t});\n\n\t\tthis.$input.on(\"awesomplete-selectcomplete\", function(e) {\n\t\t\tvar o = e.originalEvent;\n\t\t\tif(o.text.value.indexOf(\"__link_option\") !== -1) {\n\t\t\t\tme.$input.val(\"\");\n\t\t\t}\n\t\t});\n\t}\n\n\tget_filter_description(filters) {\n\t\tlet doctype = this.get_options();\n\t\tlet filter_array = [];\n\t\tlet meta = null;\n\n\t\tfrappe.model.with_doctype(doctype, () => {\n\t\t\tmeta = frappe.get_meta(doctype);\n\t\t});\n\n\t\t// convert object style to array\n\t\tif (!Array.isArray(filters)) {\n\t\t\tfor (let fieldname in filters) {\n\t\t\t\tlet value = filters[fieldname];\n\t\t\t\tif (!Array.isArray(value)) {\n\t\t\t\t\tvalue = ['=', value];\n\t\t\t\t}\n\t\t\t\tfilter_array.push([fieldname, ...value]); // fieldname, operator, value\n\t\t\t}\n\t\t} else {\n\t\t\tfilter_array = filters;\n\t\t}\n\n\t\t// add doctype if missing\n\t\tfilter_array = filter_array.map(filter => {\n\t\t\tif (filter.length === 3) {\n\t\t\t\treturn [doctype, ...filter]; // doctype, fieldname, operator, value\n\t\t\t}\n\t\t\treturn filter;\n\t\t});\n\n\t\tfunction get_filter_description(filter) {\n\t\t\tlet doctype = filter[0];\n\t\t\tlet fieldname = filter[1];\n\t\t\tlet docfield = frappe.meta.get_docfield(doctype, fieldname);\n\t\t\tlet label = docfield ? docfield.label : frappe.model.unscrub(fieldname);\n\n\t\t\tif (docfield && docfield.fieldtype === 'Check') {\n\t\t\t\tfilter[3] = filter[3] ? __('Yes'): __('No');\n\t\t\t}\n\n\t\t\tif (filter[3] && Array.isArray(filter[3]) && filter[3].length > 5) {\n\t\t\t\tfilter[3] = filter[3].slice(0, 5);\n\t\t\t\tfilter[3].push('...');\n\t\t\t}\n\n\t\t\tlet value = filter[3] == null || filter[3] === ''\n\t\t\t\t? __('empty')\n\t\t\t\t: filter[3];\n\n\t\t\treturn [__(label).bold(), __(filter[2]), (Array.isArray(filter[3]) ? String(value.map(v => __(v))) : String(__(value))).bold()].join(' ');\n\t\t}\n\n\t\tlet filter_string = filter_array\n\t\t\t.map(get_filter_description)\n\t\t\t.join(', ');\n\n\t\treturn __('Filters applied for {0}', [filter_string]);\n\t}\n\n    // \u6DFB\u52A0\u7684\u65B9\u6CD5\n    set_formatted_input(value) {\n\t\tvar me = this\n\t\tme.$input && me.$input.attr(\"data-value\", value === undefined ? '' : value)\n\t\tme.$input && me.$input.val(me.format_for_input(__(value)));\n\t\tsuper.set_formatted_input(value);\n\t}\n\n\t// \u83B7\u53D6\u672C\u6765\u7684\u503C\n\tget_value() {\n\t\tlet me = this\n\t\tlet real_value = me.doc ? me.doc[me.df['fieldname']] : (me.$input ? me.$input.attr(\"data-value\") : undefined)\n\t\tlet value = real_value ? real_value : me.get_input_value();\n\t\tif(this.get_status()==='Write') {\n\t\t\treturn this.parse ? this.parse(value) : value;\n\t\t} else {\n\t\t\treturn value? value: this.value || null;\n\t\t}\n\t}\n}\n\nfrappe.ui.form.ControlAutocomplete = class ControlAutocomplete extends frappe.ui.form.ControlAutocomplete {\n\tsetup_awesomplete() {\n\t\tconst settings = super.setup_awesomplete() || {};\n\t\treturn Object.assign(settings, {\n\t\t\tfilter: function(item, input) {\t\t\t\t\n\t\t\t\tlet hay = item.value;\n\t\t\t\t//fisher \u652F\u6301\u4E2D\u82F1\u6587\u68C0\u7D22\n\t\t\t\tif (__(item.value) != item.value)\thay += __(item.value)\n\t\t\t\treturn Awesomplete.FILTER_CONTAINS(hay, input);\n\t\t\t}\n\t\t})\n\t}\n    // \u6DFB\u52A0\u7684\u65B9\u6CD5\n    set_formatted_input(value) {\n\t\tvar me = this\n\t\tvalue && me.$input && me.$input.attr(\"data-value\", value === undefined ? '' : value)\n\t\tvalue && me.$input && me.$input.val(me.format_for_input(__(value)));\n\t}\n\n\t// \u83B7\u53D6\u672C\u6765\u7684\u503C\n\tget_value() {\n\t\tlet me = this\n\t\tlet real_value = me.$input && me.$input.attr(\"data-value\") ? me.$input.attr(\"data-value\") : (me.doc ? me.doc[me.df['fieldname']] : undefined)\n\t\tlet value = real_value ? real_value : me.get_input_value();\n\t\tif(this.get_status()==='Write') {\n\t\t\treturn this.parse ? this.parse(value) : value;\n\t\t} else {\n\t\t\treturn value || undefined;\n\t\t}\n\t}\n\n\tget_parsed_value(value) {\n\t\tlet me = this;\n\t\tif (me.doc){\n\t\t\tlet real_value = me.$input && me.$input.attr(\"data-value\") ? me.$input.attr(\"data-value\") : (me.doc ? me.doc[me.df['fieldname']] : undefined)\n\t\t\tvalue = real_value ? real_value : me.get_input_value();\n\t\t} else {\n\t\t\tvalue = super.get_parsed_value(value);\n\t\t}\n\t\treturn value;\n\t}\n}\n\n// const MyControlMultiSelect = frappe.ui.form.ControlMultiSelect.extend({\n// \tget_awesomplete_settings() {\n// \t\tvar me = this;\n// \t\tthis.$input.on(\"awesomplete-select\", function(e) {\n// \t\t\tvar o = e.originalEvent;\n// \t\t\tvar item = me.awesomplete.get_item(o.text.value);\n\n// \t\t\tme.autocomplete_open = false;\n\n// \t\t\t// prevent selection on tab\n// \t\t\tvar TABKEY = 9;\n// \t\t\tif(e.keyCode === TABKEY) {\n// \t\t\t\te.preventDefault();\n// \t\t\t\tme.awesomplete.close();\n// \t\t\t\treturn false;\n// \t\t\t}\n\n// \t\t\tif(item.action) {\n// \t\t\t\titem.value = \"\";\n// \t\t\t\titem.action.apply(me);\n// \t\t\t}\n\n// \t\t\t// if remember_last_selected is checked in the doctype against the field,\n// \t\t\t// then add this value\n// \t\t\t// to defaults so you do not need to set it again\n// \t\t\t// unless it is changed.\n// \t\t\tif(me.df.remember_last_selected_value) {\n// \t\t\t\tfrappe.boot.user.last_selected_values[me.df.options] = item.value;\n// \t\t\t}\n// \t\t\tme.parse_validate_and_set_in_model(item.value);\n\t\t\t\n// \t\t});\n// \t\tconst settings = this._super();\n// \t\treturn Object.assign(settings, {\n// \t\t\tdata: function (item) {\n// \t\t\t\treturn {\n// \t\t\t\t\tlabel: item.label || item.value,\n// \t\t\t\t\tvalue: item.value\n// \t\t\t\t};\n// \t\t\t},\n// \t\t\titem: function (item) {\n// \t\t\t\tvar d = this.get_item(item.value);\n// \t\t\t\tif(!d.label) {\td.label = d.value; }\n\n// \t\t\t\tvar _label = __(d.label);\n// \t\t\t\tvar html = d.html || \"<strong>\" + _label + \"</strong>\";\n// \t\t\t\treturn $('<li></li>')\n// \t\t\t\t\t.data('item.autocomplete', d)\n// \t\t\t\t\t.prop('aria-selected', 'false')\n// \t\t\t\t\t.html(`<a><p title=\"${_label}\">${html}</p></a>`)\n// \t\t\t\t\t.get(0);\n// \t\t\t},\n// \t\t\treplace: function(text) {\n// \t\t\t\tconst before = this.input.value.match(/^.+,\\s*|/)[0];\n// \t\t\t\tthis.input.value = before + text + \", \";\n// \t\t\t}\n// \t\t});\n// \t},\n// \tget_selected_value: function(translated){\t\t\t\t\n// \t\tlet options = this.df.options || [];\n// \t\tif(typeof this.df.options===\"string\") {\n// \t\t\toptions = this.df.options.split(\"\\n\");\n// \t\t}\n// \t\tlet input = this.input.value;\t\t\n// \t\tinput = input.split(',').map(op => op.trim()).filter(n => n != null && n !=\"\");\t\t\n// \t\tlet get_single = (val)=>{\n// \t\t\tfor (var option of options){\n// \t\t\t\t//console.log('option and val', option, __(option), val);\n// \t\t\t\tif (option === val || __(option) === val){\n// \t\t\t\t\treturn translated? __(option): option\n// \t\t\t\t}\n// \t\t\t}\n// \t\t\treturn null;\n// \t\t}\n// \t\tinput = input.map(val =>{return get_single(val)}).filter(n => n != null).join(', ');\n// \t\treturn input && translated?  input + \", \": input\n// \t},\n//     // \u6BCF\u6B21\u4F20\u8FDB\u6765\u7684\u662F\u5355\u4E2A\u503C\uFF0C\u4E4B\u524D\u7684val()\u957F\u8FD9\u6837 \u9009\u98791\u4E2D\u6587,english option2, \n//     set_formatted_input: function(value) {\t\t\n// \t\tif (!value && this.input && ! this.input.value) return;\n// \t\tlet data = this.get_selected_value(true);\t\t\n// \t\tthis.$input && this.$input.val(this.format_for_input(data));\n// \t},\n\n// \t// \u83B7\u53D6\u672C\u6765\u7684\u503C\n// \tget_value() {\t\t\n// \t\tlet data = this.get_selected_value(false);\t\t\n// \t\treturn data;\n// \t}\n// })\n\n// //frappe.ui.form.ControlMultiSelect = MyControlMultiSelect\n\nfrappe.ui.FieldSelect = class FieldSelect extends frappe.ui.FieldSelect {\n\t//fisher \u652F\u6301\u4E2D\u82F1\u6587\u68C0\u7D22\n\tinit(opts) {\n\t\tsuper.init(opts);\n\t\tthis.awesomplete.filter = function(item, input) {\n\t\t\tif (! input) return\n\t\t\tlet hay = item.label + item.value;\t\t\t\t\t\t\n\t\t\treturn Awesomplete.FILTER_CONTAINS(hay, input);\n\t\t}\n\t}\n}\n\n// frappe.ui.FieldSelect = MyFieldSelect\n", "frappe.ui.form.add_options = function (input, options_list) {\n\tlet $select = $(input);\n\tif (!Array.isArray(options_list)) {\n\t\treturn $select;\n\t}\n\t// create options\n\tfor (var i = 0, j = options_list.length; i < j; i++) {\n\t\tvar v = options_list[i];\n\t\tvar value = null;\n\t\tvar label = null;\n\t\tif (!is_null(v)) {\n\t\t\tvar is_value_null = is_null(v.value);\n\t\t\tvar is_label_null = is_null(v.label);\n\t\t\tvar is_disabled = Boolean(v.disabled);\n\t\t\tvar is_selected = Boolean(v.selected);\n\n\t\t\tif (is_value_null && is_label_null) {\n\t\t\t\t//\u652F\u6301\u5206\u53F7(;)\u5206\u9694\u7684\u503C\u4E0E\u6807\u7B7E\uFF0C\u4EE5\u89E3\u51B3\u4E0B\u62C9\u503C\u4E00\u8BCD\u591A\u4E49\u95EE\u9898\n\t\t\t\tif (v && typeof v ==='string' && v.includes(\";\")) {\n\t\t\t\t\tconst value_arr = v.split(\";\");\n\t\t\t\t\tvalue = value_arr[0];\n\t\t\t\t\tlabel = __(value_arr.slice(-1)[0]);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = v;\n\t\t\t\t\tlabel = __(v);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvalue = is_value_null ? \"\" : v.value;\n\t\t\t\tlabel = is_label_null ? __(value) : __(v.label);\n\t\t\t}\n\t\t}\n\n\t\t$(\"<option>\")\n\t\t\t.html(cstr(label))\n\t\t\t.attr(\"value\", value)\n\t\t\t.prop(\"disabled\", is_disabled)\n\t\t\t.prop(\"selected\", is_selected)\n\t\t\t.appendTo($select.get(0));\n\t}\n\t// select the first option\n\t$select.get(0).selectedIndex = 0;\n\t$select.trigger(\"select-change\");\n\treturn $select;\n};\n\n// \u652F\u6301\u7528;\u5206\u9694\u7684\u503C\u4E0E\u6807\u7B7E\u9009\u9879\uFF0C\u901A\u8FC7\u81EA\u5B9A\u4E49\u9009\u9879\uFF0C\u5B9E\u73B0\u4E00\u8BCD\u591A\u4E49\u7FFB\u8BD1\n(function($) {\n\t$.fn.add_options = function(options_list) {\n\t\t// create options\n\t\tfor(var i=0, j=options_list.length; i<j; i++) {\n\t\t\tvar v = options_list[i];\n\t\t\tvar value = null;\n\t\t\tvar label = null;\n\t\t\tif (!is_null(v)) {\n\t\t\t\tvar is_value_null = is_null(v.value);\n\t\t\t\tvar is_label_null = is_null(v.label);\n\t\t\t\tvar is_disabled = Boolean(v.disabled);\n\n\t\t\t\tif (is_value_null && is_label_null) {\n\t\t\t\t\t//\u652F\u6301\u5206\u53F7(;)\u5206\u9694\u7684\u503C\u4E0E\u6807\u7B7E\uFF0C\u4EE5\u89E3\u51B3\u4E0B\u62C9\u503C\u4E00\u8BCD\u591A\u4E49\u95EE\u9898\n\t\t\t\t\tif (v && typeof v ==='string' && v.includes(\";\")) {\n\t\t\t\t\t\tconst value_arr = v.split(\";\");\n\t\t\t\t\t\tvalue = value_arr[0];\n\t\t\t\t\t\tlabel = __(value_arr.slice(-1)[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = v;\n\t\t\t\t\t\tlabel = __(v);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvalue = is_value_null ? \"\" : v.value;\n\t\t\t\t\tlabel = is_label_null ? __(value) : __(v.label);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$('<option>').html(cstr(label))\n\t\t\t\t.attr('value', value)\n\t\t\t\t.prop('disabled', is_disabled)\n\t\t\t\t.appendTo(this);\n\t\t}\n\t\t// select the first option\n\t\tthis.selectedIndex = 0;\n\t\t$(this).trigger('select-change');\n\t\treturn $(this);\n\t};\n\t$.fn.set_working = function() {\n\t\tthis.prop('disabled', true);\n\t};\n\t$.fn.done_working = function() {\n\t\tthis.prop('disabled', false);\n\t};\n\n\tlet original_val = $.fn.val;\n\t$.fn.val = function() {\n\t\tlet result = original_val.apply(this, arguments);\n\t\tif (arguments.length > 0) $(this).trigger('select-change');\n\t\treturn result;\n\t};\n})(jQuery);", "// \u65F6\u95F4\u533A\u95F4\u8BED\u8A00\u6CA1\u6709\u8BBE\u7F6E\n\nfrappe.ui.form.ControlDateRange = class ControlDateRange extends frappe.ui.form.ControlDateRange {\n    set_date_options() {\n\t\tsuper.set_date_options();\n\t\tlet lang = \"en\";\n\t\tfrappe.boot.user && (lang = frappe.boot.user.language);\n\t\tif($.fn.datepicker.language[lang]) {\n\t\t\tthis.datepicker_options.language = lang\n        }\n\t}\n}\n\n// frappe.ui.form.ControlDateRange = MyControlDateRange", "frappe.ui.form.ControlTable = class ControlTable extends frappe.ui.form.ControlTable {\n\tmake() {\n\t\tsuper.make();\n\t\tthis.$wrapper.off('paste', ':text');\n\t\tthis.$wrapper.on('paste', ':text', e => {\n\t\t\tconst table_field = this.df.fieldname;\n\t\t\tconst grid = this.grid;\n\t\t\tconst grid_pagination = grid.grid_pagination;\n\t\t\tconst grid_rows = grid.grid_rows;\n\t\t\tconst doctype = grid.doctype;\n\t\t\tconst row_docname = $(e.target).closest('.grid-row').data('name');\n\t\t\tconst in_grid_form = $(e.target).closest('.form-in-grid').length;\n\t\t\tlet pasted_data = frappe.utils.get_clipboard_data(e);\n\n\t\t\tif (!pasted_data || in_grid_form) return;\n\n\t\t\tlet data = frappe.utils.csv_to_array(pasted_data, '\\t');\n\n\t\t\tif (data.length === 1 && data[0].length === 1) return;\n\n\t\t\tlet fieldnames = [];\n\t\t\t// for raw data with column header\n\t\t\tif (this.get_field(data[0][0])) {\n\t\t\t\tdata[0].forEach(column => {\n\t\t\t\t\tfieldnames.push(this.get_field(column));\n\t\t\t\t});\n\t\t\t\tdata.shift();\n\t\t\t} else {\n\t\t\t\t// no column header, map to the existing visible columns\n\t\t\t\tconst visible_columns = grid_rows[0].get_visible_columns();\n\t\t\t\tlet target_column_matched = false;\n\t\t\t\tvisible_columns.forEach(column => {\n\t\t\t\t\t// consider all columns after the target column.\n\t\t\t\t\tif (target_column_matched || column.fieldname === $(e.target).data('fieldname')) {\n\t\t\t\t\t\tfieldnames.push(column.fieldname);\n\t\t\t\t\t\ttarget_column_matched = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet row_idx = locals[doctype][row_docname].idx;\n\t\t\tlet data_length = data.length;\n\t\t\tdata.forEach((row, i) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tlet blank_row = !row.filter(Boolean).length;\n\t\t\t\t\tif (!blank_row) {\n\t\t\t\t\t\tif (row_idx > this.frm.doc[table_field].length) {\n\t\t\t\t\t\t\tthis.grid.add_new_row();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (row_idx > 1 && (row_idx - 1) % grid_pagination.page_length === 0) {\n\t\t\t\t\t\t\tgrid_pagination.go_to_page(grid_pagination.page_index + 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst row_name = grid_rows[row_idx - 1].doc.name;\n\t\t\t\t\t\trow.forEach((value, data_index) => {\n\t\t\t\t\t\t\tconst fieldname =fieldnames[data_index];\n\t\t\t\t\t\t\tif (fieldname) {\n                                //fisher \u4FDD\u5B58\u6587\u672C\u7F16\u8F91\u5668\u5B57\u6BB5\u7684\u56DE\u8F66\u6362\u884C\n                                if (value) {\n                                    const fieldtype = frappe.meta.get_field(doctype,fieldname).fieldtype;\n\t\t\t\t\t\t            value = (fieldtype && fieldtype ==='Text Editor')? value.replace(/[\\n\\r]/g,'<br>') : value;\n                                 };\n\t\t\t\t\t\t\t\tfrappe.model.set_value(doctype, row_name, fieldname, value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\trow_idx++;\n\t\t\t\t\t}\n                    //fisher \u79FB\u5230\u5916\u9762\u6765\uFF0C\u590D\u5236\u7684\u6700\u540E\u7A7A\u884C\u4E0D\u4F1A\u5BFC\u81F4\u8FDB\u5EA6\u6761\u8D70\u4E0D\u5B8C\n                    if (data_length >= 10) {\n                        let progress = i + 1;\n                        frappe.show_progress(__('Processing'), progress, data_length, null, true);\n                    }\n\t\t\t\t}, 0);\n\t\t\t});\n\t\t\treturn false; // Prevent the default handler from running.\n\t\t});\n\t}\n};", "\nfrappe.provide(\"frappe.form.formatters\");\n\n// \u4FEE\u6539\u65E5\u671F\u65F6\u95F4\u683C\u5F0F\u5316\uFF0C YYYY-MM-DD  HH:mm:ss\nfrappe.form.formatters.Datetime = function(value) {\n\tif(value) {\n\t\tvar m = moment(frappe.datetime.convert_to_user_tz(value));\n\t\tif(frappe.boot.sysdefaults.time_zone) {\n\t\t\tm = m.tz(frappe.boot.sysdefaults.time_zone);\n\t\t}\n\t\treturn m.format(frappe.boot.sysdefaults.date_format.toUpperCase() + ' HH:mm:ss');\n\t} else {\n\t\treturn \"\";\n\t}\n}\n\n// \u8FD9\u6837\u7684\u8BDD\u6240\u6709\u8868\u5355\u7684data\u7C7B\u578B\u90FD\u4F1A\u8C03\u7528\u7FFB\u8BD1\u65B9\u6CD5\nfrappe.form.formatters.Data = function(value) {\n\treturn value==null ? \"\" : __(value);\n}\n\nfrappe.form.formatters.MultiSelect = function(value) {\n\tif (typeof value == \"string\") {\n\t\treturn __(value);\n\t} else if (Array.isArray(value)) {\n\t\treturn value.map(v => __(v));\n\t}\n}", "import DataTable from \"frappe-datatable\";\n//import Style from \"./style.js\";\n\n// \u91CD\u65B0\u5B9A\u4E49\u9ED8\u8BA4\u503C\uFF0C \u628A\u8FD9\u51E0\u4E2A\u82F1\u6587\u6539\u6210\u4E2D\u6587\nconst DEFAULT_OPTIONS = {\n    headerDropdown: [\n        {\n            label: __('Sort Ascending'),  //'\u5347\u5E8F',\n            action: function (column) {\n                this.sortColumn(column.colIndex, 'asc');\n            }\n        },\n        {\n            label: __('Sort Descending'), //'\u964D\u5E8F',\n            action: function (column) {\n                this.sortColumn(column.colIndex, 'desc');\n            }\n        },\n        {\n            label: __('Reset sorting'),  //'\u91CD\u7F6E',\n            action: function (column) {\n                this.sortColumn(column.colIndex, 'none');\n            }\n        },\n        {\n            label: __('Remove column'), //'\u5220\u9664\u5217',\n            action: function (column) {\n                this.removeColumn(column.colIndex);\n            }\n        }\n    ]\n};\n\nclass MyDataTable extends DataTable {\n\t//constructor(wrapper, options) {\n\t// \tsuper(wrapper, options);\n\t// \t// \u8FD9\u91CC\u662F\u89E3\u51B3\u8868\u683C\u6709\u5782\u76F4\u6EDA\u52A8\u6761\u800C\u8868\u683C\u5BBD\u5EA6\u53C8\u5C0F\u4E8Etable\u7684\u5BBD\u5EA6\u65F6\uFF0C\u5782\u76F4\u6EDA\u52A8\u6761\u906E\u76D6\u6570\u636E\n\t// \t// \u53CA\u9AD8\u5EA6\u5C0F\u4E8Etable\u7684\u9AD8\u5EA6\u65F6\uFF0C\u6700\u540E\u4E00\u6761\u7EBF\u753B\u4E0D\u51FA\u6765\n\t// \tthis.style = new Style(this);\n\t// \tthis.style.setBodyStyle();\n    // }\n\tbuildOptions(options) {\n\t\tsuper.buildOptions(options);\n\t\t// \u89E3\u51B3headerDropdown\u82F1\u6587\n\t\tthis.options.headerDropdown = [\n\t\t\t...DEFAULT_OPTIONS.headerDropdown,\n\t\t\t...options.headerDropdown\n\t\t];\n\t}\n}\n\n// \u91CD\u65B0\u5B9A\u4E49\u7528\u5230DataTable\u7684\u90A3\u4E9Bclass, \u5C31\u662F\u51FA\u73B0 new DataTable\u7684\u5730\u65B9\u90FD\u8981\u91CD\u5199\nlet MyQueryReport = class MyQueryReport extends frappe.views.QueryReport {\n\trender_datatable() {\n\t\tlet data = this.data;\n\t\tlet columns = this.columns.filter((col) => !col.hidden);\n\n\t\tif (this.raw_data.add_total_row) {\n\t\t\tdata = data.slice();\n\t\t\tdata.splice(-1, 1);\n\t\t}\n\n\t\tthis.$report.show();\n\t\tif (this.datatable && this.datatable.options\n\t\t\t&& (this.datatable.options.showTotalRow ===this.raw_data.add_total_row)) {\n\t\t\tthis.datatable.options.treeView = this.tree_report;\n\t\t\tthis.datatable.refresh(data, columns);\n\t\t} else {\n\t\t\tlet datatable_options = {\n\t\t\t\tcolumns: columns,\n\t\t\t\tdata: data,\n\t\t\t\tinlineFilters: true,\n\t\t\t\ttreeView: this.tree_report,\n\t\t\t\tlayout: 'fixed',\n\t\t\t\tcellHeight: 33,\n\t\t\t\tshowTotalRow: this.raw_data.add_total_row,\n\t\t\t\tdirection: frappe.utils.is_rtl() ? 'rtl' : 'ltr',\n\t\t\t\thooks: {\n\t\t\t\t\tcolumnTotal: frappe.utils.report_column_total\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (this.report_settings.get_datatable_options) {\n\t\t\t\tdatatable_options = this.report_settings.get_datatable_options(datatable_options);\n\t\t\t}\n\t\t\tthis.datatable = new MyDataTable(this.$report[0], datatable_options);\n\t\t}\n\n\t\tif (typeof this.report_settings.initial_depth == \"number\") {\n\t\t\tthis.datatable.rowmanager.setTreeDepth(this.report_settings.initial_depth);\n\t\t}\n\t\tif (this.report_settings.after_datatable_render) {\n\t\t\tthis.report_settings.after_datatable_render(this.datatable);\n\t\t}\n\t}\n}\n\nfrappe.views.QueryReport = MyQueryReport\n\nlet MyReportView = class MyReportView extends frappe.views.ReportView {\n    setup_datatable(values) {\n\t\tthis.$datatable_wrapper.empty();\n\t\tthis.datatable = new MyDataTable(this.$datatable_wrapper[0], {\n\t\t\tcolumns: this.columns,\n\t\t\tdata: this.get_data(values),\n\t\t\tgetEditor: this.get_editing_object.bind(this),\n\t\t\tcheckboxColumn: true,\n\t\t\tinlineFilters: true,\n\t\t\tcellHeight: 35,\n\t\t\tdirection: frappe.utils.is_rtl() ? 'rtl' : 'ltr',\n\t\t\tevents: {\n\t\t\t\tonRemoveColumn: (column) => {\n\t\t\t\t\tthis.remove_column_from_datatable(column);\n\t\t\t\t},\n\t\t\t\tonSwitchColumn: (column1, column2) => {\n\t\t\t\t\tthis.switch_column(column1, column2);\n\t\t\t\t},\n\t\t\t\tonCheckRow: () => {\n\t\t\t\t\tconst checked_items = this.get_checked_items();\n\t\t\t\t\tthis.toggle_actions_menu_button(checked_items.length > 0);\n\t\t\t\t}\n\t\t\t},\n\t\t\thooks: {\n\t\t\t\tcolumnTotal: frappe.utils.report_column_total\n\t\t\t},\n\t\t\theaderDropdown: [{\n\t\t\t\tlabel: __('Add Column'),\n\t\t\t\taction: (datatabe_col) => {\n\t\t\t\t\tlet columns_in_picker = [];\n\t\t\t\t\tconst columns = this.get_columns_for_picker();\n\n\t\t\t\t\tcolumns_in_picker = columns[this.doctype]\n\t\t\t\t\t\t.filter(df => !this.is_column_added(df))\n\t\t\t\t\t\t.map(df => ({\n\t\t\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\t\t\tvalue: df.fieldname\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tdelete columns[this.doctype];\n\n\t\t\t\t\tfor (let cdt in columns) {\n\t\t\t\t\t\tcolumns[cdt]\n\t\t\t\t\t\t\t.filter(df => !this.is_column_added(df))\n\t\t\t\t\t\t\t.map(df => ({\n\t\t\t\t\t\t\t\tlabel: __(df.label) + ` (${cdt})`,\n\t\t\t\t\t\t\t\tvalue: df.fieldname + ',' + cdt\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t.forEach(df => columns_in_picker.push(df));\n\t\t\t\t\t}\n\n\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __('Add Column'),\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: __('Select Column'),\n\t\t\t\t\t\t\t\tfieldname: 'column',\n\t\t\t\t\t\t\t\tfieldtype: 'Autocomplete',\n\t\t\t\t\t\t\t\toptions: columns_in_picker\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: __('Insert Column Before {0}', [datatabe_col.docfield.label.bold()]),\n\t\t\t\t\t\t\t\tfieldname: 'insert_before',\n\t\t\t\t\t\t\t\tfieldtype: 'Check'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprimary_action: ({ column, insert_before }) => {\n\t\t\t\t\t\t\tif (!columns_in_picker.map(col => col.value).includes(column)) {\n\t\t\t\t\t\t\t\tfrappe.show_alert({message: __('Invalid column'), indicator: 'orange'});\n\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet doctype = this.doctype;\n\t\t\t\t\t\t\tif (column.includes(',')) {\n\t\t\t\t\t\t\t\t[column, doctype] = column.split(',');\n\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\tlet index = datatabe_col.colIndex;\n\t\t\t\t\t\t\tif (insert_before) {\n\t\t\t\t\t\t\t\tindex = index - 1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.add_column_to_datatable(column, doctype, index);\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\td.show();\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t}\n}\n\nfrappe.views.ReportView = MyReportView\n\n// \u8FD9\u4E2A\u6570\u636E\u5BFC\u5165\u7684\u662F\u52A8\u6001\u52A0\u8F7D\u7684\uFF0C\u5728\u8FD9\u91CC\u4F1A\u627E\u4E0D\u5230frappe.data_import.ImportPreview\uFF0C\n// \u8FD9\u4E2A\u662F\u653Edoctype: core/doctype/data_import_beta\u91CC\u9762\u7684\uFF0C\u5E94\u8BE5\u4E0D\u4F1A\u7528\u5230\uFF0C\u7528\u5230\u518D\u8BF4\u7684\u8BDD\uFF0C\u7528doctype\u7684hooks\u5E94\u8BE5\u53EF\u4EE5\u89E3\u51B3\n// let MyImportPreview = class MyImportPreview extends frappe.data_import.ImportPreview {\n//     render_datatable() {\n// \t\tif (this.datatable) {\n// \t\t\tthis.datatable.destroy();\n// \t\t}\n\n// \t\tthis.datatable = new DataTable(this.$table_preview.get(0), {\n// \t\t\tdata: this.data,\n// \t\t\tcolumns: this.columns,\n// \t\t\tlayout: this.columns.length < 10 ? 'fluid' : 'fixed',\n// \t\t\tcellHeight: 35,\n// \t\t\tserialNoColumn: false,\n// \t\t\tcheckboxColumn: false,\n// \t\t\tnoDataMessage: __('No Data'),\n// \t\t\tdisableReorderColumn: true\n// \t\t});\n\n// \t\tlet {\n// \t\t\tmax_rows_exceeded,\n// \t\t\tmax_rows_in_preview,\n// \t\t\ttotal_number_of_rows\n// \t\t} = this.preview_data;\n// \t\tif (max_rows_exceeded) {\n// \t\t\tlet parts = [max_rows_in_preview, total_number_of_rows];\n// \t\t\tthis.wrapper.find('.table-message').html(`\n// \t\t\t\t<div class=\"text-muted margin-top text-medium\">\n// \t\t\t\t${__('Showing only first {0} rows out of {1}', parts)}\n// \t\t\t\t</div>\n// \t\t\t`);\n// \t\t}\n\n// \t\tif (this.data.length === 0) {\n// \t\t\tthis.datatable.style.setStyle('.dt-scrollable', {\n// \t\t\t\theight: 'auto'\n// \t\t\t});\n// \t\t}\n\n// \t\tthis.datatable.style.setStyle('.dt-dropdown', {\n// \t\t\tdisplay: 'none'\n// \t\t});\n// \t}\n// }\n\n// frappe.data_import.ImportPreview = MyImportPreview\n\n// \u8FD9\u4E2A\u662F\u5728erpnext/accounts/page/bank_reconciliation/bank_reconciliation.js\u4E2D\u5199\u7684\uFF0C\u5728\u8FD9\u91CC\u4F1A\u627E\u4E0D\u5230\uFF0C\n// \u7B49\u7528\u5230\u518D\u8BF4\u5427\n// let MybankTransactionUpload = class MybankTransactionUpload extends erpnext.accounts.bankTransactionUpload {\n//     create_datatable() {\n// \t\ttry {\n// \t\t\tthis.datatable = new DataTable('.transactions-table', {\n// \t\t\t\tcolumns: this.data.columns,\n// \t\t\t\tdata: this.data.data\n// \t\t\t})\n// \t\t}\n// \t\tcatch(err) {\n// \t\t\tlet msg = __(`Your file could not be processed by ERPNext.\n// \t\t\t\t\t\t<br>It should be a standard CSV or XLSX file.\n// \t\t\t\t\t\t<br>The headers should be in the first row.`)\n// \t\t\tfrappe.throw(msg)\n// \t\t}\n\n// \t}\n// }\n\n// erpnext.accounts.bankTransactionUpload = MybankTransactionUpload", "let MyGanttView = class MyGanttView extends frappe.views.GanttView {\n    get required_libs() {\n\t\treturn [\n\t\t\t\"assets/erpnext_oob/js/lib/gantt/frappe-gantt.css\",\n\t\t\t\"assets/erpnext_oob/js/lib/gantt/frappe-gantt.min.js\"\n\t\t];\n\t}\n}\n\nfrappe.views.GanttView = MyGanttView", "erpnext.stock.StockController.prototype.show_general_ledger = function() {\n    var me = this;\n    if(this.frm.doc.docstatus > 0) {\n        cur_frm.add_custom_button(__('Accounting Ledger'), function() {\n            frappe.route_options = {\n                voucher_no: me.frm.doc.name,\n                from_date: me.frm.doc.posting_date,\n                to_date: moment(me.frm.doc.modified).format('YYYY-MM-DD'),\n                company: me.frm.doc.company,\n                //group_by: \"Group by Voucher (Consolidated)\",    //fisher \u4E0E\u7CFB\u7EDF\u9ED8\u8BA4\u8BE5\u53C2\u6570\u6709\u51B2\u7A81\uFF0C\u5728\u6B64\u4E0D\u8D4B\u503C\n                show_cancelled_entries: me.frm.doc.docstatus === 2\n            };\n            frappe.set_route(\"query-report\", \"General Ledger\");\n        }, __(\"View\"));\n    }\n}"],
  "mappings": "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",
  "names": []
}
